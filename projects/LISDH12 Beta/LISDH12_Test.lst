****** BUILD Of 'LISDH12_Test' (2016-10-19 5:51:33 PM)


****** EVENT HANDLERS
                                                                                                                                                                                                                                                      0:    0x0077   Address Priority 0 Event.   Code for 'Boot' starts at 119.
                                                                                                                                                                                                                                                      1:    0x00C4   Address Priority 1 Event.   Code for 'NewGateway' starts at 196.
                                                                                                                                                                                                                                                      2:    0x00D1   Address Priority 2 Event.   Code for 'AccelerometerInt1' starts at 209.
                                                                                                                                                                                                                                                      3:    0x0118   Address Priority 3 Event.   Code for 'ReedSwitchChanged' starts at 280.
                                                                                                                                                                                                                                                      4:    0x0139   Address Priority 4 Event.   Code for 'SubscriptionDelivery' starts at 313.
                                                                                                                                                                                                                                                      5:    0x0199   Address Priority 5 Event.   Code for 'Publish' starts at 409.
                                                                                                                                                                                                                                                      6:    0x0000   Address Priority 6 Event.   No Event defined.
                                                                                                                                                                                                                                                      7:    0x0000   Address Priority 7 Event.   No Event defined.
                                                                                                                                                                                                                                                      8:    0x0000   Address Priority 8 Event.   No Event defined.
                                                                                                                                                                                                                                                      9:    0x0000   Address Priority 9 Event.   No Event defined.
                                                                                                                                                                                                                                                      10:   0x0000   Address Priority 10 Event.  No Event defined.
                                                                                                                                                                                                                                                      11:   0x0000   Address Priority 11 Event.  No Event defined.
                                                                                                                                                                                                                                                      12:   0x0000   Address Priority 12 Event.  No Event defined.
                                                                                                                                                                                                                                                      13:   0x0000   Address Priority 13 Event.  No Event defined.
                                                                                                                                                                                                                                                      14:   0x0000   Address Priority 14 Event.  No Event defined.
                                                                                                                                                                                                                                                      15:   0x0000   Address Priority 15 Event.  No Event defined.
                                                                                                                                                                                                                                                      16:   0x0000   Address Priority 16 Event.  No Event defined.
                                                                                                                                                                                                                                                      17:   0x0000   Address Priority 17 Event.  No Event defined.
                                                                                                                                                                                                                                                      18:   0x0000   Address Priority 18 Event.  No Event defined.
                                                                                                                                                                                                                                                      19:   0x0000   Address Priority 19 Event.  No Event defined.
                                                                                                                                                                                                                                                      20:   0x0000   Address Priority 20 Event.  No Event defined.
                                                                                                                                                                                                                                                      21:   0x0000   Address Priority 21 Event.  No Event defined.
                                                                                                                                                                                                                                                      22:   0x0000   Address Priority 22 Event.  No Event defined.
                                                                                                                                                                                                                                                      23:   0x0000   Address Priority 23 Event.  No Event defined.
                                                                                                                                                                                                                                                      24:   0x0000   Address Priority 24 Event.  No Event defined.
                                                                                                                                                                                                                                                      25:   0x0000   Address Priority 25 Event.  No Event defined.
                                                                                                                                                                                                                                                      26:   0x0000   Address Priority 26 Event.  No Event defined.
                                                                                                                                                                                                                                                      27:   0x0000   Address Priority 27 Event.  No Event defined.
                                                                                                                                                                                                                                                      28:   0x0000   Address Priority 28 Event.  No Event defined.
                                                                                                                                                                                                                                                      29:   0x0000   Address Priority 29 Event.  No Event defined.
                                                                                                                                                                                                                                                      30:   0x0000   Address Priority 30 Event.  No Event defined.
                                                                                                                                                                                                                                                      31:   0x0000   Address Priority 31 Event.  No Event defined.

****** RUNTIME INFORMATION
                                                                                                                                                                                                                                                      32:   0x0A37   ScriptSizeLS (Size of the code in 2-byte instructions = 2615)
                                                                                                                                                                                                                                                      33:   0x0000   CodeSizeMS (Size of the code in 2-byte instructions = 2615)
                                                                                                                                                                                                                                                      34:   0x0029   CodeSizeInBlocks = 41
                                                                                                                                                                                                                                                      35:   0x0004   StringSizeInBlocks = 4
                                                                                                                                                                                                                                                      36:   0x0000   Reserved
                                                                                                                                                                                                                                                      37:   0x0000   Reserved
                                                                                                                                                                                                                                                      38:   0x6F25   Compile Date and Time 2016-10-19 17:51:33
                                                                                                                                                                                                                                                      39:   0x1F9A   Compile Date and Time 2016-10-19 17:51:33
                                                                                                                                                                                                                                                      40:   0x0000   Reserved
                                                                                                                                                                                                                                                      41:   0x0000   Reserved
                                                                                                                                                                                                                                                      42:   0x0000   Reserved
                                                                                                                                                                                                                                                      43:   0x0000   Reserved
                                                                                                                                                                                                                                                      44:   0x0000   Reserved
                                                                                                                                                                                                                                                      45:   0x0000   PinMode Pin0=NotUsed  Pin1=NotUsed
                                                                                                                                                                                                                                                      46:   0x0000   PinMode Pin2=NotUsed  Pin3=NotUsed
                                                                                                                                                                                                                                                      47:   0x0000   PinMode Pin4=NotUsed  Pin5=NotUsed
                                                                                                                                                                                                                                                      48:   0x0000   PinMode Pin6=NotUsed  Pin7=NotUsed
                                                                                                                                                                                                                                                      49:   0x0000   PinMode Pin8=NotUsed   Pin9=NotUsed
                                                                                                                                                                                                                                                      50:   0x0000   PinMode Pin10=NotUsed   Pin11=NotUsed
                                                                                                                                                                                                                                                      51:   0x0000   PinMode Pin12=NotUsed   Pin13=NotUsed
                                                                                                                                                                                                                                                      52:   0x0000   PinMode Pin14=NotUsed   Pin15=NotUsed
                                                                                                                                                                                                                                                      53:   0x0000   PinMode Pin16=NotUsed   Pin17=NotUsed
                                                                                                                                                                                                                                                      54:   0x0000   PinMode Pin18=NotUsed   Pin19=NotUsed
                                                                                                                                                                                                                                                      55:   0x0000   PinMode Pin20=NotUsed   Pin21=NotUsed
                                                                                                                                                                                                                                                      56:   0x0000   PinMode Pin22=NotUsed   Pin23=NotUsed
                                                                                                                                                                                                                                                      57:   0x0000   Reserved
                                                                                                                                                                                                                                                      58:   0x0000   Reserved
                                                                                                                                                                                                                                                      59:   0x0000   Reserved
                                                                                                                                                                                                                                                      60:   0x0000   Reserved
                                                                                                                                                                                                                                                      61:   0x1800   IdleThread EntryPoint ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                                      62:   0x0015   SystemIdle
                                                                                                                                                                                                                                                      63:   0x5002   BranchBack 62

****** CLASS INFORMATION
                                                                                                                                                                                                                                                      64:   0x0049   Class Descriptor for class 'Global'. Next Descriptor at 73.
                                                                                                                                                                                                                                                      65:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                                      66:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                                      67:   0x000C   Size of RefObject data.(12).
                                                                                                                                                                                                                                                      68:   0x0028   Size of all data.(40).
                                                                                                                                                                                                                                                      69:   0x6C47   Part of the class name 'Global'.
                                                                                                                                                                                                                                                      70:   0x626F   Part of the class name 'Global'.
                                                                                                                                                                                                                                                      71:   0x6C61   Part of the class name 'Global'.
                                                                                                                                                                                                                                                      72:   0x0000   Part of the class name 'Global'.
                                                                                                                                                                                                                                                      73:   0x0055   Class Descriptor for class 'LISDH12_Test'. Next Descriptor at 85.
                                                                                                                                                                                                                                                      74:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                                      75:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                                      76:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                                                                                                      77:   0x0000   Size of all data.(0).
                                                                                                                                                                                                                                                      78:   0x494C   Part of the class name 'LISDH12_Test'.
                                                                                                                                                                                                                                                      79:   0x4453   Part of the class name 'LISDH12_Test'.
                                                                                                                                                                                                                                                      80:   0x3148   Part of the class name 'LISDH12_Test'.
                                                                                                                                                                                                                                                      81:   0x5F32   Part of the class name 'LISDH12_Test'.
                                                                                                                                                                                                                                                      82:   0x6554   Part of the class name 'LISDH12_Test'.
                                                                                                                                                                                                                                                      83:   0x7473   Part of the class name 'LISDH12_Test'.
                                                                                                                                                                                                                                                      84:   0x0000   Part of the class name 'LISDH12_Test'.
                                                                                                                                                                                                                                                      85:   0x005F   Class Descriptor for class 'LIS2DH12'. Next Descriptor at 95.
                                                                                                                                                                                                                                                      86:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                                      87:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                                      88:   0x0004   Size of RefObject data.(4).
                                                                                                                                                                                                                                                      89:   0x0008   Size of all data.(8).
                                                                                                                                                                                                                                                      90:   0x494C   Part of the class name 'LIS2DH12'.
                                                                                                                                                                                                                                                      91:   0x3253   Part of the class name 'LIS2DH12'.
                                                                                                                                                                                                                                                      92:   0x4844   Part of the class name 'LIS2DH12'.
                                                                                                                                                                                                                                                      93:   0x3231   Part of the class name 'LIS2DH12'.
                                                                                                                                                                                                                                                      94:   0x0000   Part of the class name 'LIS2DH12'.
                                                                                                                                                                                                                                                      95:   0x0067   Class Descriptor for class 'MQTT'. Next Descriptor at 103.
                                                                                                                                                                                                                                                      96:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                                      97:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                                      98:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                                                                                                      99:   0x0000   Size of all data.(0).
                                                                                                                                                                                                                                                      100:  0x514D   Part of the class name 'MQTT'.
                                                                                                                                                                                                                                                      101:  0x5454   Part of the class name 'MQTT'.
                                                                                                                                                                                                                                                      102:  0x0000   Part of the class name 'MQTT'.
                                                                                                                                                                                                                                                      103:  0x0072   Class Descriptor for class 'TempSensor'. Next Descriptor at 114.
                                                                                                                                                                                                                                                      104:  0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                                                                                                      105:  0x0000   Offset of RefObject data.(0).
                                                                                                                                                                                                                                                      106:  0x0000   Size of RefObject data.(0).
                                                                                                                                                                                                                                                      107:  0x0000   Size of all data.(0).
                                                                                                                                                                                                                                                      108:  0x6554   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                                      109:  0x706D   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                                      110:  0x6553   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                                      111:  0x736E   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                                      112:  0x726F   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                                      113:  0x0000   Part of the class name 'TempSensor'.
                                                                                                                                                                                                                                                      114:  0x0000   End Of Class Data.

****** APPLIACTION STATEMENTS
*************************************************************************************************************

000001  Class LISDH12_Test                                                                                                                                                                                                                            115:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000002      
000003      Const Version As String = "V1.00"
000004      Shared data As dataType
000005      Const Sub_Topic As String = "MCThings/Publish"
000006      Shared Sub_Topic_Knock_Enable As String
000007      Shared Publish_data As Boolean
000008      Shared TimeSinceKnockTriggered As Integer
000009      Shared TimeSinceDoorClosed As Integer
000010      Shared accel As LIS2DH12 
000011      
                                                                                                                                                                                                                                                      117:  0x0001                           EventType=Boot
                                                                                                                                                                                                                                                      118:  0x0700                           EventCategory=Interrupt
000012      Shared Event Boot()                                                                                                                                                                                                                       119:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000013          Publish_data = True                                                                                                                                                                                                                   120:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      121:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      122:  0xC818   PopFieldU8              Publish_data

000014          Sub_Topic_Knock_Enable = "MCThings/" + Device.mcUID().ToString("X8") + "/EnableDoorKnock"                                                                                                                                             123:  0x8412   PushLiteral             18
                                                                                                                                                                                                                                                      124:  0x8416   PushLiteral             22
                                                                                                                                                                                                                                                      125:  0x00F8   DeviceUID               
                                                                                                                                                                                                                                                      126:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      127:  0x0069   StrFormat               
                                                                                                                                                                                                                                                      128:  0x0056   StrAdd                  
                                                                                                                                                                                                                                                      129:  0x8418   PushLiteral             24
                                                                                                                                                                                                                                                      130:  0x0056   StrAdd                  
                                                                                                                                                                                                                                                      131:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      132:  0xD400   PopFieldRef             Sub_Topic_Knock_Enable

000015          TimeSinceKnockTriggered = 0                                                                                                                                                                                                           133:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      134:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      135:  0xD020   PopFieldI32             TimeSinceKnockTriggered

000016          TimeSinceDoorClosed = 0                                                                                                                                                                                                               136:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      137:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      138:  0xD024   PopFieldI32             TimeSinceDoorClosed

000017          MQTT.Subscribe(Sub_Topic)                                                                                                                                                                                                             139:  0x840C   PushLiteral             12
                                                                                                                                                                                                                                                      140:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      141:  0x5800   JumpSubr                2527
                                                                                                                                                                                                                                                      142:  0x09DF                           

000018          MQTT.Subscribe(Sub_Topic_Knock_Enable)                                                                                                                                                                                                143:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      144:  0xC400   PushFieldRef            Sub_Topic_Knock_Enable
                                                                                                                                                                                                                                                      145:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      146:  0x5800   JumpSubr                2527
                                                                                                                                                                                                                                                      147:  0x09DF                           

000019          MQTT.Publish("Status", "Booted: " + Version)                                                                                                                                                                                          148:  0x841E   PushLiteral             30
                                                                                                                                                                                                                                                      149:  0x8421   PushLiteral             33
                                                                                                                                                                                                                                                      150:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      151:  0x5800   JumpSubr                2363
                                                                                                                                                                                                                                                      152:  0x093B                           

000020          accel = New LIS2DH12                                                                                                                                                                                                                  153:  0x8055   PushConstU10            85 (0x0055)
                                                                                                                                                                                                                                                      154:  0x0010   ClassNew                
                                                                                                                                                                                                                                                      155:  0x1D7C   BranchSubr              536
                                                                                                                                                                                                                                                      156:  0x1D83   BranchSubr              544
                                                                                                                                                                                                                                                      157:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      158:  0xD404   PopFieldRef             accel

000021          //MQTT.Publish("WHO_AM_I", accel.GetID)
000022          If accel.online Then                                                                                                                                                                                                                  159:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      160:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                                      161:  0xB804   PushFieldU8             online
                                                                                                                                                                                                                                                      162:  0x3C14   BranchFalse             183

000023              MQTT.Publish("Status", "LIS2DH12TR Sensor Online")                                                                                                                                                                                163:  0x841E   PushLiteral             30
                                                                                                                                                                                                                                                      164:  0x8426   PushLiteral             38
                                                                                                                                                                                                                                                      165:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      166:  0x5800   JumpSubr                2363
                                                                                                                                                                                                                                                      167:  0x093B                           

000024              //accel.ConfigureShockInterrupt(0.1, 20) //default 0.8, 0 (magnitude in g, duraton in ms)
000025              'set accelerometer to cause interrupt if accelation is > 1.15Gs for longer than 2ms (any axis)
000026              accel.ConfigureShockInterrupt(1.15, 20.0)                                                                                                                                                                                         168:  0x0110   PushConstI32            1066611507 (0x3F933333)
                                                                                                                                                                                                                                                      169:  0x3333                           
                                                                                                                                                                                                                                                      170:  0x3F93                           
                                                                                                                                                                                                                                                      171:  0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                                      172:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      173:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                                      174:  0x5800   JumpSubr                1821
                                                                                                                                                                                                                                                      175:  0x071D                           
                                                                                                                                                                                                                                                      176:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000027              MQTT.Publish("KnockEnable", "True")                                                                                                                                                                                               177:  0x842E   PushLiteral             46
                                                                                                                                                                                                                                                      178:  0x8401   PushLiteral             1
                                                                                                                                                                                                                                                      179:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      180:  0x5800   JumpSubr                2363
                                                                                                                                                                                                                                                      181:  0x093B                           

000028              'accel.ConfigureOrientationInterrupt(2.4, 500) //orientation not used in door sensor
                                                                                                                                                                                                                                                      182:  0x400A   Branch                  193
000029          Else                                                                                                                                                                                                                                  

000030              MQTT.Publish("Status", "Accel Sensor Offline")                                                                                                                                                                                    183:  0x841E   PushLiteral             30
                                                                                                                                                                                                                                                      184:  0x8432   PushLiteral             50
                                                                                                                                                                                                                                                      185:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      186:  0x5800   JumpSubr                2363
                                                                                                                                                                                                                                                      187:  0x093B                           

000031              MQTT.Publish("KnockEnable", "False")                                                                                                                                                                                              188:  0x842E   PushLiteral             46
                                                                                                                                                                                                                                                      189:  0x8404   PushLiteral             4
                                                                                                                                                                                                                                                      190:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      191:  0x5800   JumpSubr                2363
                                                                                                                                                                                                                                                      192:  0x093B                           

000032          End If
000033      End Event                                                                                                                                                                                                                                 193:  0x0091   Return                  

000034      
                                                                                                                                                                                                                                                      194:  0x0005                           EventType=NewGateway
                                                                                                                                                                                                                                                      195:  0x0700                           EventCategory=Interrupt
000035      Shared Event NewGateway()                                                                                                                                                                                                                 196:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000036          MQTT.Subscribe(Sub_Topic)                                                                                                                                                                                                             197:  0x840C   PushLiteral             12
                                                                                                                                                                                                                                                      198:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      199:  0x5800   JumpSubr                2527
                                                                                                                                                                                                                                                      200:  0x09DF                           

000037          MQTT.Subscribe(Sub_Topic_Knock_Enable)                                                                                                                                                                                                201:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      202:  0xC400   PushFieldRef            Sub_Topic_Knock_Enable
                                                                                                                                                                                                                                                      203:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      204:  0x5800   JumpSubr                2527
                                                                                                                                                                                                                                                      205:  0x09DF                           

000038      End Event                                                                                                                                                                                                                                 206:  0x0091   Return                  

000039      
                                                                                                                                                                                                                                                      207:  0x0212                           EventType=AccelerometerInt1
                                                                                                                                                                                                                                                      208:  0x0700                           EventCategory=Interrupt
000040      Shared Event AccelerometerInt1()                                                                                                                                                                                                          209:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000041          'debounce interrupt
000042          //Thread.Sleep(100000)
000043          //Thread.ClearHardwareEvent()
000044          
000045          'Read Int source register to clear interrupt
000046          If ((accel.GetINT1ActiveInterrupt() & LIS2DH12.INT_ACTIVE) = LIS2DH12.INT_ACTIVE) Then                                                                                                                                                210:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      211:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                                      212:  0x5800   JumpSubr                1579
                                                                                                                                                                                                                                                      213:  0x062B                           
                                                                                                                                                                                                                                                      214:  0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                                      215:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      216:  0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                                      217:  0x2430   BranchNE                266

000047              'interrupt generated 
000048              LedRed = True                                                                                                                                                                                                                     218:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      219:  0x0809   PopAndSetDigitalPin     Pin9

000049              If ReedSwitch = False Then //If door is closed                                                                                                                                                                                    220:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                                      221:  0x382C   BranchTrue              266

000050                  //if more than 60 seconds since Knock last triggered, and more than 5 seconds since door closed
000051                  If (Device.Uptime() - TimeSinceKnockTriggered > 60) And (Device.Uptime() - TimeSinceDoorClosed > 5) Then                                                                                                                      222:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                                      223:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      224:  0xC020   PushFieldI32            TimeSinceKnockTriggered
                                                                                                                                                                                                                                                      225:  0x0031   IntSub                  
                                                                                                                                                                                                                                                      226:  0x803C   PushConstU10            60 (0x003C)
                                                                                                                                                                                                                                                      227:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                                      228:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                                      229:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      230:  0xC024   PushFieldI32            TimeSinceDoorClosed
                                                                                                                                                                                                                                                      231:  0x0031   IntSub                  
                                                                                                                                                                                                                                                      232:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                                      233:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                                      234:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      235:  0x3C1E   BranchFalse             266
                                                                                                                                                                                                                                                      236:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000052                      Dim timeSinceLastTransient As Integer = Device.GetTimeSpan()                                                                                                                                                              237:  0x00FB   DeviceGetTimeSpan       
                                                                                                                                                                                                                                                      238:  0x9000   PopLocalI32             timeSinceLastTransient

000053                      'If at least two transients within 0.75 seconds
000054                      If timeSinceLastTransient < 750000 And timeSinceLastTransient > 0 Then                                                                                                                                                    239:  0x8800   PushLocalI32            timeSinceLastTransient
                                                                                                                                                                                                                                                      240:  0x0110   PushConstI32            750000 (0x000B71B0)
                                                                                                                                                                                                                                                      241:  0x71B0                           
                                                                                                                                                                                                                                                      242:  0x000B                           
                                                                                                                                                                                                                                                      243:  0x0024   IntCmpLT                
                                                                                                                                                                                                                                                      244:  0x8800   PushLocalI32            timeSinceLastTransient
                                                                                                                                                                                                                                                      245:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      246:  0x0022   IntCmpGT                
                                                                                                                                                                                                                                                      247:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      248:  0x3C10   BranchFalse             265

000055                          Thread.Sleep(1000000) //sleep 1 second                                                                                                                                                                                249:  0x0110   PushConstI32            1000000 (0x000F4240)
                                                                                                                                                                                                                                                      250:  0x4240                           
                                                                                                                                                                                                                                                      251:  0x000F                           
                                                                                                                                                                                                                                                      252:  0x00D5   ThreadSleep             
                                                                                                                                                                                                                                                      253:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000056                          If ReedSwitch = False Then //If door is still closed (prevent door opening transients from triggering)                                                                                                                254:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                                      255:  0x3809   BranchTrue              265

000057                              TimeSinceKnockTriggered = Device.Uptime()                                                                                                                                                                         256:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                                      257:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      258:  0xD020   PopFieldI32             TimeSinceKnockTriggered

000058                              MQTT.Publish("Doorknock", True)                                                                                                                                                                                   259:  0x8439   PushLiteral             57
                                                                                                                                                                                                                                                      260:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      261:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                                      262:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      263:  0x5800   JumpSubr                2395
                                                                                                                                                                                                                                                      264:  0x095B                           

000059                          End If
000060                      End If
                                                                                                                                                                                                                                                      265:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000061                  End If                                                                                                                                                                                                                        

000062              End If      
000063          End If 
000064          
000065          'restart interrupt       
000066          accel.SetINT1ActiveInterrupt(LIS2DH12.INT_SRC_XH | LIS2DH12.INT_SRC_YH | LIS2DH12.INT_SRC_ZH)                                                                                                                                         266:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      267:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      268:  0x002D   IntOr                   
                                                                                                                                                                                                                                                      269:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      270:  0x002D   IntOr                   
                                                                                                                                                                                                                                                      271:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      272:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                                      273:  0x5800   JumpSubr                1573
                                                                                                                                                                                                                                                      274:  0x0625                           

000067          LedRed = False                                                                                                                                                                                                                        275:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      276:  0x0809   PopAndSetDigitalPin     Pin9

000068      End Event                                                                                                                                                                                                                                 277:  0x0091   Return                  

000069      
                                                                                                                                                                                                                                                      278:  0x030C                           EventType=ReedSwitchChanged
                                                                                                                                                                                                                                                      279:  0x0700                           EventCategory=Interrupt
000070      Shared Event ReedSwitchChanged()                                                                                                                                                                                                          280:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                                      281:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000071          TimeSinceDoorClosed = Device.Uptime()                                                                                                                                                                                                 282:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                                      283:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      284:  0xD024   PopFieldI32             TimeSinceDoorClosed

000072          Thread.Sleep(500000) //debounce                                                                                                                                                                                                       285:  0x0110   PushConstI32            500000 (0x0007A120)
                                                                                                                                                                                                                                                      286:  0xA120                           
                                                                                                                                                                                                                                                      287:  0x0007                           
                                                                                                                                                                                                                                                      288:  0x00D5   ThreadSleep             
                                                                                                                                                                                                                                                      289:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000073          Thread.ClearHardwareEvent()                                                                                                                                                                                                           290:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      291:  0x00FA   SetCleartHardwareEvent  

000074          LedGreen = True                                                                                                                                                                                                                       292:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      293:  0x080A   PopAndSetDigitalPin     Pin10

000075          Dim Door_Status As Boolean = ReedSwitch                                                                                                                                                                                               294:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                                      295:  0x9000   PopLocalI32             Door_Status

000076          MQTT.Publish("Door", Door_Status)                                                                                                                                                                                                     296:  0x843D   PushLiteral             61
                                                                                                                                                                                                                                                      297:  0x8800   PushLocalI32            Door_Status
                                                                                                                                                                                                                                                      298:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                                      299:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      300:  0x5800   JumpSubr                2395
                                                                                                                                                                                                                                                      301:  0x095B                           

000077          MQTT.BeaconPublish(dataType.DOOR, Door_Status)                                                                                                                                                                                        302:  0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                                      303:  0x8800   PushLocalI32            Door_Status
                                                                                                                                                                                                                                                      304:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                                      305:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      306:  0x5800   JumpSubr                2444
                                                                                                                                                                                                                                                      307:  0x098C                           

000078          LedGreen = False                                                                                                                                                                                                                      308:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      309:  0x080A   PopAndSetDigitalPin     Pin10

000079      End Event                                                                                                                                                                                                                                 310:  0x0091   Return                  

000080      
                                                                                                                                                                                                                                                      311:  0x0003                           EventType=SubscriptionDelivery
                                                                                                                                                                                                                                                      312:  0x0700                           EventCategory=Interrupt
000081      Shared Event SubscriptionDelivery()                                                                                                                                                                                                       313:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                                      314:  0xE023   AllocateStackSpace      ValTypeSize=1, RefTypeSize=3

000082          Dim msg As Message = Lplan.GetDelivery()                                                                                                                                                                                              315:  0x00FE   LplanGetDelivery        
                                                                                                                                                                                                                                                      316:  0x9400   PopLocalRef             msg

000083          'Dim payload As ListOfByte = msg.PayLoad
000084          Dim tmp As Boolean = True 'payload.ExtractFloat(0)                                                                                                                                                                                    317:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      318:  0x9000   PopLocalI32             tmp

000085          Dim tmp_str As String = msg.PayLoad.ToString()                                                                                                                                                                                        319:  0x8C00   PushLocalRef            msg
                                                                                                                                                                                                                                                      320:  0xC404   PushFieldRef            Offset=4
                                                                                                                                                                                                                                                      321:  0x006B   StrFromListOfByte       
                                                                                                                                                                                                                                                      322:  0x9401   PopLocalRef             tmp_str

000086          Dim topic As String = msg.Topic.ToString()                                                                                                                                                                                            323:  0x8C00   PushLocalRef            msg
                                                                                                                                                                                                                                                      324:  0xC400   PushFieldRef            Offset=0
                                                                                                                                                                                                                                                      325:  0x9402   PopLocalRef             topic

000087          'MQTT.Publish("Status", "Received Message: " + topic + " : " + tmp_str)
000088          If topic = Sub_Topic Then                                                                                                                                                                                                             326:  0x8C02   PushLocalRef            topic
                                                                                                                                                                                                                                                      327:  0x840C   PushLiteral             12
                                                                                                                                                                                                                                                      328:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      329:  0x0058   StrCmpEQ                
                                                                                                                                                                                                                                                      330:  0x3C18   BranchFalse             355

000089              If Boolean.TryConvert(tmp_str, tmp) Then                                                                                                                                                                                          331:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                                      332:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                                      333:  0x008A   TryCvtStrToBoo          
                                                                                                                                                                                                                                                      334:  0x9000   PopLocalI32             tmp
                                                                                                                                                                                                                                                      335:  0x3C0B   BranchFalse             347

000090                  Publish_data = tmp                                                                                                                                                                                                            336:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                                      337:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      338:  0xC818   PopFieldU8              Publish_data

000091                  MQTT.Publish("Publish", Publish_data)                                                                                                                                                                                         339:  0x8440   PushLiteral             64
                                                                                                                                                                                                                                                      340:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      341:  0xB818   PushFieldU8             Publish_data
                                                                                                                                                                                                                                                      342:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                                      343:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      344:  0x5800   JumpSubr                2395
                                                                                                                                                                                                                                                      345:  0x095B                           

                                                                                                                                                                                                                                                      346:  0x4007   Branch                  354
000092              Else                                                                                                                                                                                                                              

000093                  MQTT.Publish("Publish", tmp_str + " :Boolean Conversion failed")                                                                                                                                                              347:  0x8440   PushLiteral             64
                                                                                                                                                                                                                                                      348:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                                      349:  0x8443   PushLiteral             67
                                                                                                                                                                                                                                                      350:  0x0056   StrAdd                  
                                                                                                                                                                                                                                                      351:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      352:  0x5800   JumpSubr                2363
                                                                                                                                                                                                                                                      353:  0x093B                           

000094              End If 
                                                                                                                                                                                                                                                      354:  0x4033   Branch                  406
000095          ElseIf topic = Sub_Topic_Knock_Enable Then                                                                                                                                                                                            355:  0x8C02   PushLocalRef            topic
                                                                                                                                                                                                                                                      356:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      357:  0xC400   PushFieldRef            Sub_Topic_Knock_Enable
                                                                                                                                                                                                                                                      358:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      359:  0x0058   StrCmpEQ                
                                                                                                                                                                                                                                                      360:  0x3C26   BranchFalse             399

000096              If Boolean.TryConvert(tmp_str, tmp) Then                                                                                                                                                                                          361:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                                      362:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                                      363:  0x008A   TryCvtStrToBoo          
                                                                                                                                                                                                                                                      364:  0x9000   PopLocalI32             tmp
                                                                                                                                                                                                                                                      365:  0x3C19   BranchFalse             391

000097                  If accel.online Then                                                                                                                                                                                                          366:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      367:  0xC404   PushFieldRef            accel
                                                                                                                                                                                                                                                      368:  0xB804   PushFieldU8             online
                                                                                                                                                                                                                                                      369:  0x3C0A   BranchFalse             380

000098                      MQTT.Publish("KnockEnable", tmp)                                                                                                                                                                                          370:  0x842E   PushLiteral             46
                                                                                                                                                                                                                                                      371:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                                      372:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                                      373:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      374:  0x5800   JumpSubr                2395
                                                                                                                                                                                                                                                      375:  0x095B                           

000099                      If tmp Then                                                                                                                                                                                                               376:  0x8800   PushLocalI32            tmp
                                                                                                                                                                                                                                                      377:  0x3C01   BranchFalse             379

000100                          //accel.Active()
                                                                                                                                                                                                                                                      378:  0x4000   Branch                  379
000101                      Else                                                                                                                                                                                                                      

000102                          //accel.Standby()
000103                      End If
                                                                                                                                                                                                                                                      379:  0x400A   Branch                  390
000104                  Else                                                                                                                                                                                                                          

000105                      MQTT.Publish("Status", "Accel Sensor Offline")                                                                                                                                                                            380:  0x841E   PushLiteral             30
                                                                                                                                                                                                                                                      381:  0x8432   PushLiteral             50
                                                                                                                                                                                                                                                      382:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      383:  0x5800   JumpSubr                2363
                                                                                                                                                                                                                                                      384:  0x093B                           

000106                      MQTT.Publish("KnockEnable", "False")                                                                                                                                                                                      385:  0x842E   PushLiteral             46
                                                                                                                                                                                                                                                      386:  0x8404   PushLiteral             4
                                                                                                                                                                                                                                                      387:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      388:  0x5800   JumpSubr                2363
                                                                                                                                                                                                                                                      389:  0x093B                           

000107                  End If
                                                                                                                                                                                                                                                      390:  0x4007   Branch                  398
000108              Else                                                                                                                                                                                                                              

000109                  MQTT.Publish("KnockEnable", tmp_str + " :Boolean Conversion failed")                                                                                                                                                          391:  0x842E   PushLiteral             46
                                                                                                                                                                                                                                                      392:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                                                                                                      393:  0x8443   PushLiteral             67
                                                                                                                                                                                                                                                      394:  0x0056   StrAdd                  
                                                                                                                                                                                                                                                      395:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      396:  0x5800   JumpSubr                2363
                                                                                                                                                                                                                                                      397:  0x093B                           

000110              End If
                                                                                                                                                                                                                                                      398:  0x4007   Branch                  406
000111          Else                                                                                                                                                                                                                                  

000112              MQTT.Publish("Status", topic + " :Unknown Command")                                                                                                                                                                               399:  0x841E   PushLiteral             30
                                                                                                                                                                                                                                                      400:  0x8C02   PushLocalRef            topic
                                                                                                                                                                                                                                                      401:  0x844B   PushLiteral             75
                                                                                                                                                                                                                                                      402:  0x0056   StrAdd                  
                                                                                                                                                                                                                                                      403:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      404:  0x5800   JumpSubr                2363
                                                                                                                                                                                                                                                      405:  0x093B                           

000113          End If
000114      End Event                                                                                                                                                                                                                                 406:  0x0091   Return                  

000115      
                                                                                                                                                                                                                                                      407:  0x000A                           TimeValue=10
                                                                                                                                                                                                                                                      408:  0x0300                           EventCategory=TimeInSeconds
000116      Shared Event Publish() RaiseEvent Every 10 Seconds //1 Minutes                                                                                                                                                                            409:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000117          LedGreen = True                                                                                                                                                                                                                       410:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      411:  0x080A   PopAndSetDigitalPin     Pin10

000118          Select data                                                                                                                                                                                                                           412:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      413:  0xC01C   PushFieldI32            data
                                                                                                                                                                                                                                                      414:  0x0122   CaseComputed            
                                                                                                                                                                                                                                                      415:  0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                                      416:  0x0004                           NumberOfCaseEntries=4
                                                                                                                                                                                                                                                      417:  0x006B                           CaseElseBranch=525
                                                                                                                                                                                                                                                      418:  0x0002                           CaseValue=2
                                                                                                                                                                                                                                                      419:  0x0008                           CaseBranch=426
                                                                                                                                                                                                                                                      420:  0x0003                           CaseValue=3
                                                                                                                                                                                                                                                      421:  0x0024                           CaseBranch=454
                                                                                                                                                                                                                                                      422:  0x0004                           CaseValue=4
                                                                                                                                                                                                                                                      423:  0x003B                           CaseBranch=477
                                                                                                                                                                                                                                                      424:  0x000B                           CaseValue=11
                                                                                                                                                                                                                                                      425:  0x0054                           CaseBranch=502

000119              Case dataType.UPTIME                                                                                                                                                                                                              426:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000120                  Dim Uptime As Integer = Device.Uptime()                                                                                                                                                                                       427:  0x00F9   DeviceUptime            
                                                                                                                                                                                                                                                      428:  0x9000   PopLocalI32             Uptime

000121                  If Publish_data Then                                                                                                                                                                                                          429:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      430:  0xB818   PushFieldU8             Publish_data
                                                                                                                                                                                                                                                      431:  0x3C06   BranchFalse             438

000122                      MQTT.Publish("Uptime", Uptime)                                                                                                                                                                                            432:  0x8451   PushLiteral             81
                                                                                                                                                                                                                                                      433:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                                                                                                      434:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                                      435:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      436:  0x5800   JumpSubr                2395
                                                                                                                                                                                                                                                      437:  0x095B                           

000123                  End If
000124                  If Uptime < Short.MaxValue Then                                                                                                                                                                                               438:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                                                                                                      439:  0x0110   PushConstI32            32767 (0x00007FFF)
                                                                                                                                                                                                                                                      440:  0x7FFF                           
                                                                                                                                                                                                                                                      441:  0x0000                           
                                                                                                                                                                                                                                                      442:  0x3406   BranchGE                449

000125                      MQTT.BeaconPublish(dataType.UPTIME, Uptime)                                                                                                                                                                               443:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      444:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                                                                                                      445:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                                      446:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      447:  0x5800   JumpSubr                2444
                                                                                                                                                                                                                                                      448:  0x098C                           

000126                  End If
000127                  data = dataType.BATTVOLTAGE                                                                                                                                                                                                   449:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      450:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      451:  0xD01C   PopFieldI32             data

                                                                                                                                                                                                                                                      452:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                                                                                                      453:  0x404F   Branch                  533
000128              Case dataType.BATTVOLTAGE                                                                                                                                                                                                         454:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000129                  Dim BattVolt As Integer = Device.BatteryVoltage()                                                                                                                                                                             455:  0x00ED   DeviceBatteryVoltage    
                                                                                                                                                                                                                                                      456:  0x9000   PopLocalI32             BattVolt

000130                  If Publish_data Then                                                                                                                                                                                                          457:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      458:  0xB818   PushFieldU8             Publish_data
                                                                                                                                                                                                                                                      459:  0x3C06   BranchFalse             466

000131                      MQTT.Publish("BatteryVoltage", BattVolt)                                                                                                                                                                                  460:  0x8454   PushLiteral             84
                                                                                                                                                                                                                                                      461:  0x8800   PushLocalI32            BattVolt
                                                                                                                                                                                                                                                      462:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                                      463:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      464:  0x5800   JumpSubr                2395
                                                                                                                                                                                                                                                      465:  0x095B                           

000132                  End If
000133                  MQTT.BeaconPublish(dataType.BATTVOLTAGE, BattVolt)                                                                                                                                                                            466:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      467:  0x8800   PushLocalI32            BattVolt
                                                                                                                                                                                                                                                      468:  0x1404   Box                     BoxInteger
                                                                                                                                                                                                                                                      469:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      470:  0x5800   JumpSubr                2444
                                                                                                                                                                                                                                                      471:  0x098C                           

000134                  data = dataType.TEMPERATURE                                                                                                                                                                                                   472:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      473:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      474:  0xD01C   PopFieldI32             data

                                                                                                                                                                                                                                                      475:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                                                                                                      476:  0x4038   Branch                  533
000135              Case dataType.TEMPERATURE                                                                                                                                                                                                         477:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000136                  Dim TempC As Float = TempSensor.GetTemp                                                                                                                                                                                       478:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      479:  0x5800   JumpSubr                2533
                                                                                                                                                                                                                                                      480:  0x09E5                           
                                                                                                                                                                                                                                                      481:  0x9000   PopLocalI32             TempC

000137                  If Publish_data Then                                                                                                                                                                                                          482:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      483:  0xB818   PushFieldU8             Publish_data
                                                                                                                                                                                                                                                      484:  0x3C06   BranchFalse             491

000138                      MQTT.Publish("Temperature", TempC)                                                                                                                                                                                        485:  0x8459   PushLiteral             89
                                                                                                                                                                                                                                                      486:  0x8800   PushLocalI32            TempC
                                                                                                                                                                                                                                                      487:  0x1406   Box                     BoxFloat
                                                                                                                                                                                                                                                      488:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      489:  0x5800   JumpSubr                2395
                                                                                                                                                                                                                                                      490:  0x095B                           

000139                  End If
000140                  MQTT.BeaconPublish(dataType.TEMPERATURE, TempC)                                                                                                                                                                               491:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      492:  0x8800   PushLocalI32            TempC
                                                                                                                                                                                                                                                      493:  0x1406   Box                     BoxFloat
                                                                                                                                                                                                                                                      494:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      495:  0x5800   JumpSubr                2444
                                                                                                                                                                                                                                                      496:  0x098C                           

000141                  //data = dataType.TEMPERATURE2
000142                  data = dataType.DOOR                                                                                                                                                                                                          497:  0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                                      498:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      499:  0xD01C   PopFieldI32             data

000143                  '            Case dataType.TEMPERATURE2
000144                  '                //Dim TempC As Float = TempSensor.GetTemp
000145                  '                Dim TempC As Float
000146                  '                Dim TempC_raw As Short = accel.readTemperature()
000147                  '                TempC = TempC_raw / 10.0
000148                  '                If Publish_data Then
000149                  '                    MQTT.Publish("Temperature2", TempC)
000150                  '                End If
000151                  '                MQTT.BeaconPublish(dataType.TEMPERATURE2, TempC)
000152                  '                data = dataType.DOOR
                                                                                                                                                                                                                                                      500:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                                                                                                      501:  0x401F   Branch                  533
000153              Case dataType.DOOR                                                                                                                                                                                                                502:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000154                  Dim Door_Status As Boolean = ReedSwitch                                                                                                                                                                                       503:  0x0C0C   GetAndPushDigitalPin    Pin12
                                                                                                                                                                                                                                                      504:  0x9000   PopLocalI32             Door_Status

000155                  If Publish_data Then                                                                                                                                                                                                          505:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      506:  0xB818   PushFieldU8             Publish_data
                                                                                                                                                                                                                                                      507:  0x3C06   BranchFalse             514

000156                      MQTT.Publish("Door", Door_Status) //True = OPEN False = CLOSED                                                                                                                                                            508:  0x843D   PushLiteral             61
                                                                                                                                                                                                                                                      509:  0x8800   PushLocalI32            Door_Status
                                                                                                                                                                                                                                                      510:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                                      511:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      512:  0x5800   JumpSubr                2395
                                                                                                                                                                                                                                                      513:  0x095B                           

000157                  End If
000158                  MQTT.BeaconPublish(dataType.DOOR, Door_Status)                                                                                                                                                                                514:  0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                                                                                                      515:  0x8800   PushLocalI32            Door_Status
                                                                                                                                                                                                                                                      516:  0x1401   Box                     BoxBoolean
                                                                                                                                                                                                                                                      517:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      518:  0x5800   JumpSubr                2444
                                                                                                                                                                                                                                                      519:  0x098C                           

000159                  data = dataType.UPTIME                                                                                                                                                                                                        520:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      521:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      522:  0xD01C   PopFieldI32             data

                                                                                                                                                                                                                                                      523:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                                                                                                      524:  0x4008   Branch                  533
000160              Case Else                                                                                                                                                                                                                         

000161                  MQTT.Publish("Status", "OnLine")                                                                                                                                                                                              525:  0x841E   PushLiteral             30
                                                                                                                                                                                                                                                      526:  0x845D   PushLiteral             93
                                                                                                                                                                                                                                                      527:  0x000E   PushNothing             
                                                                                                                                                                                                                                                      528:  0x5800   JumpSubr                2363
                                                                                                                                                                                                                                                      529:  0x093B                           

000162                  data = dataType.UPTIME                                                                                                                                                                                                        530:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      531:  0x000C   PushGlobal              
                                                                                                                                                                                                                                                      532:  0xD01C   PopFieldI32             data

000163          End Select
000164          LedGreen = False                                                                                                                                                                                                                      533:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      534:  0x080A   PopAndSetDigitalPin     Pin10

000165      End Event                                                                                                                                                                                                                                 535:  0x0091   Return                  

000166  End Class                                                                                                                                                                                                                                     116:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for LISDH12_Test
    Block Class (Line 1:166)
        LISDH12_Test    Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          Version         (Literal="V1.00")
        dataType        data            (SharedValTypVariableOffset=28)
        String          Sub_Topic       (Literal="MCThings/Publish")
        String          Sub_Topic_Knock_(SharedRefTypVariableOffset=0)
        Boolean         Publish_data    (SharedValTypVariableOffset=24)
        Integer         TimeSinceKnockTr(SharedValTypVariableOffset=32)
        Integer         TimeSinceDoorClo(SharedValTypVariableOffset=36)
        LIS2DH12        accel           (SharedRefTypVariableOffset=4)
        Block Event Boot (Line 12:33)
            Block If Then  (Line 22:29)
            End Block
            Block Else (Line 29:32)
            End Block
        End Block
        Block Event NewGateway (Line 35:38)
        End Block
        Block Event AccelerometerInt1 (Line 40:68)
            Block If Then  (Line 46:63)
                Block If Then  (Line 49:62)
                    Block If Then  (Line 51:61)
                        Integer         timeSinceLastTra(LocalValTypVariableOffset=0)
                        Block If Then  (Line 54:60)
                            Block If Then  (Line 56:59)
                            End Block
                        End Block
                    End Block
                End Block
            End Block
        End Block
        Block Event ReedSwitchChanged (Line 70:79)
            Boolean         Door_Status     (LocalValTypVariableOffset=0)
        End Block
        Block Event SubscriptionDelivery (Line 81:114)
            Message         msg             (LocalRefTypVariableOffset=0)
            Boolean         tmp             (LocalValTypVariableOffset=0)
            String          tmp_str         (LocalRefTypVariableOffset=1)
            String          topic           (LocalRefTypVariableOffset=2)
            Block If Then  (Line 88:95)
                Block If Then  (Line 89:92)
                End Block
                Block Else (Line 92:94)
                End Block
            End Block
            Block ElseIf (Line 95:111)
                Block If Then  (Line 96:108)
                    Block If Then  (Line 97:104)
                        Block If Then  (Line 99:101)
                        End Block
                        Block Else (Line 101:103)
                        End Block
                    End Block
                    Block Else (Line 104:107)
                    End Block
                End Block
                Block Else (Line 108:110)
                End Block
            End Block
            Block Else (Line 111:113)
            End Block
        End Block
        Block Event Publish (Line 116:165)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000007  Class LIS2DH12                                                                                                                                                                                                                                536:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000008      'Constants
000009      Const VERSION As Integer = 3
000010      
000011      'I2C constants
000012      Const LIS2DH12_I2C_ADDR As Byte = 0x19
000013      Const I2C_SPEED As Integer = 250000
000014      
000015      'LIS2DH12 registers
000016      Const STATUS_REG_AUX As Byte = 0x07
000017      Const OUT_TEMP_L As Byte = 0x0c
000018      Const OUT_TEMP_H As Byte = 0x0d
000019      Const WHO_AM_I As Byte = 0x0f
000020      Const TEMP_CFG As Byte = 0x1f
000021      Const CTRL_REG1 As Byte = 0x20
000022      Const CTRL_REG2 As Byte = 0x21
000023      Const CTRL_REG3 As Byte = 0x22
000024      Const CTRL_REG4 As Byte = 0x23
000025      Const CTRL_REG5 As Byte = 0x24
000026      Const CTRL_REG6 As Byte = 0x25
000027      Const REF_DATA_CAP As Byte = 0x26	
000028      Const STATUS As Byte = 0x27
000029      Const OUT_X_L As Byte = 0x28
000030      Const OUT_X_H As Byte = 0x29
000031      Const OUT_Y_L As Byte = 0x2a
000032      Const OUT_Y_H As Byte = 0x2b
000033      Const OUT_Z_L As Byte = 0x2c
000034      Const OUT_Z_H As Byte = 0x2d
000035      Const FIFO_CTRL As Byte = 0x2e
000036      Const FIFO_SRC As Byte = 0x2f
000037      Const INT1_CFG As Byte = 0x30
000038      Const INT1_SRC As Byte = 0x31
000039      Const INT1_THS As Byte = 0x32
000040      Const INT1_DURATION As Byte = 0x33
000041      Const INT2_CFG As Byte = 0x34
000042      Const INT2_SRC As Byte = 0x35
000043      Const INT2_THS As Byte = 0x36
000044      Const INT2_DURATION As Byte = 0x37
000045      Const CLICK_CFG As Byte = 0x38
000046      Const CLICK_SRC As Byte = 0x39
000047      Const CLICK_THS As Byte = 0x3a
000048      Const TIME_LIMIT As Byte = 0x3b
000049      Const TIME_LATENCY As Byte = 0x3c
000050      Const TIME_WINDOW As Byte = 0x3d
000051      Const ACT_THS As Byte = 0x3e
000052      Const ACT_DUR As Byte = 0x3f
000053      
000054      'Temperature constants
000055      Const TEMP_ENABLE As Byte = 0xc0
000056      Const TOR As Byte = 0x40
000057      Const TDA As Byte = 0x04
000058      
000059      'Data Available constants
000060      Const ZYXOR As Byte = 0x80
000061      Const ZOR As Byte = 0x40
000062      Const YOR As Byte = 0x20
000063      Const XOR As Byte = 0x10
000064      Const ZYXDA As Byte = 0x08
000065      Const ZDA As Byte = 0x04
000066      Const YDA As Byte = 0x02
000067      Const XDA As Byte = 0x01
000068      
000069      'Data rate constants
000070      Const DATA_RATE_POWER_DOWN As Byte = 0x00
000071      Const DATA_RATE_1HZ As Byte = 0x01
000072      Const DATA_RATE_10HZ As Byte = 0x02
000073      Const DATA_RATE_25HZ As Byte = 0x03
000074      Const DATA_RATE_50HZ As Byte = 0x04
000075      Const DATA_RATE_100HZ As Byte = 0x05
000076      Const DATA_RATE_200HZ As Byte = 0x06
000077      Const DATA_RATE_400HZ As Byte = 0x07
000078      Const DATA_RATE_1620HZ_LP As Byte = 0x08
000079      Const DATA_RATE_1344HZ As Byte = 0x09
000080      Const DATA_RATE_MASK As Byte = 0xf0
000081      
000082      'Scale Constants
000083      Const SCALE_2G As Byte = 0x00
000084      Const SCALE_4G As Byte = 0x01
000085      Const SCALE_8G As Byte = 0x02
000086      Const SCALE_16G As Byte = 0x03
000087      Const SCALE_MASK As Byte = 0x30
000088      Const UNDEFINED As Byte = 0xff
000089      
000090      'Operating Mode
000091      Const LOW_POWER_MODE As Byte = 0x01
000092      Const NORMAL_MODE As Byte = 0x02
000093      Const HIGH_RESOLUTION_MODE As Byte = 0x03
000094      
000095      Const LPEN_BIT As Byte = 0x08
000096      Const HR_BIT As Byte = 0x08
000097      
000098      'Block data and Data Endian bits
000099      Const BDU_BIT As Byte = 0x80
000100      Const BLE_BIT As Byte = 0x40
000101      
000102      Const CTL5_MASK As Byte = 0xcf
000103      Const RST_MASK As Byte = 0x80
000104      Const BOOT As Byte = 0x80
000105      Const FIFO_EN As Byte = 0x40
000106      Const LIR_INT1 As Byte = 0x08
000107      Const D4D_INT1 As Byte = 0x04
000108      Const LIR_INT2 As Byte = 0x02
000109      Const D4D_INT2 As Byte = 0x01
000110      
000111      Const CTL6_MASK As Byte = 0xfa
000112      Const I2_CLICKen As Byte = 0x80
000113      Const I2_INT1 As Byte = 0x40
000114      Const I2_INT2 As Byte = 0x20
000115      Const BOOT_I2 As Byte = 0x10
000116      Const P2_ACT As Byte = 0x08
000117      Const H_LACTIVE As Byte = 0x02
000118      
000119      
000120      'Interrupt constants
000121      Const INT1_ENABLE_MASK As Byte = 0xfe
000122      Const INT1_CLICK_BIT As Byte = 0x80
000123      Const INT1_AOI1_BIT As Byte = 0x40
000124      Const INT1_AOI2_BIT As Byte = 0x20
000125      Const INT1_DRDY1_BIT As Byte = 0x10
000126      Const INT1_DRDY2_BIT As Byte = 0x08
000127      Const INT1_WTM_BIT As Byte = 0x04
000128      Const INT1_OVERRUN_BIT As Byte = 0x02
000129      Const INT1_PIN As Byte = 0x01
000130      Const INT2_PIN As Byte = 0x02
000131      
000132      
000133      Const INT_ACTIVE As Byte = 0x40
000134      Const INT_SRC_ZH As Byte = 0x20
000135      Const INT_SRC_ZL As Byte = 0x10
000136      Const INT_SRC_YH As Byte = 0x08
000137      Const INT_SRC_YL As Byte = 0x04
000138      Const INT_SRC_XH As Byte = 0x02
000139      Const INT_SRC_XL As Byte = 0x01
000140      
000141      //HP Filter mode
000142      Const HP_FILTER_MODE_MASK As Byte = 0xc0
000143      Const HP_FILTER_NORMAL_MODE_RESET As Byte = 0x00 '(reset by reading REFERENCE/DATACAPTURE (26h) register)
000144      Const HP_FILTER_REF_MODE As Byte = 0x01
000145      Const HP_FILTER_NORMAL_MODE As Byte = 0x02
000146      Const HP_FILTER_NORMAL_MODE_AUTO As Byte = 0x03 'Autoreset on interrupt event
000147      //HP bits mask
000148      Const HP_FILTER_BITS_MASK As Byte = 0x0f
000149      //HP Filter bypass
000150      Const HP_FILTER_BYPASS_BIT As Byte = 0x08
000151      //HP Filter for click
000152      Const HP_FILTER_CLICK_BIT As Byte = 0x04
000153      //HP Filter Enable AOI int 1
000154      Const HP_INT_AOI1_BIT As Byte = 0x00
000155      //HP Filter Enable AOI int 2
000156      Const HP_INT_AOI2_BIT As Byte = 0x01
000157      
000158      'Click Configuration
000159      Const ZD As Byte = 0x20
000160      Const ZS As Byte = 0x10
000161      Const YD As Byte = 0x08
000162      Const YS As Byte = 0x04
000163      Const XD As Byte = 0x02
000164      Const XS As Byte = 0x01
000165      
000166      'Click Source
000167      Const CLICK_IA As Byte = 0x40
000168      Const DClick As Byte = 0x20
000169      Const SClick As Byte = 0x10
000170      Const Sign As Byte = 0x08
000171      Const CLICK_Z As Byte = 0x04
000172      Const CLICK_Y As Byte = 0x02
000173      Const CLICK_X As Byte = 0x01
000174      
000175      //limits
000176      Const LOW_TRIGGER_THRESHOLD As Float = 1.0
000177      Const HIGH_TRIGGER_THRESHOLD As Float = 23.622
000178      Const LSB_RESOLUTION_THRESHOLD As Float = 0.186
000179      
000180      Const LOW_DURATION_MS As Float = 0.0
000181      Const HIGH_DURATION_MS As Float = 635.0
000182      Const DURATION_RESOLUTION As Float = 5.0
000183      
000184      'mode scale factor constants
000185      Const LP_FACTOR As Float = 16
000186      Const NM_FACTOR As Float = 4
000187      'HR factor is 1
000188      
000189      'Axis constants
000190      Const X_AXIS As Byte = 0x01
000191      Const Y_AXIS As Byte = 0x02
000192      Const Z_AXIS As Byte = 0x03
000193      
000194      'Public variables
000195      Public online As Boolean = False
000196      
000197      'Private variables
000198      Private gAccelerometer As I2c
000199      //Private gAddr As ListOfByte 
000200      //Private gData As ListOfByte 
000201      Private gScale As Byte = UNDEFINED                                                                                                                                                                                                        537:  0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                                      538:  0xA805   PopMemberU8             gScale

000202      Private gOperatingMode As Byte = UNDEFINED                                                                                                                                                                                                539:  0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                                      540:  0xA806   PopMemberU8             gOperatingMode

000203      Private gDataRate As Byte = UNDEFINED                                                                                                                                                                                                     541:  0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                                      542:  0xA807   PopMemberU8             gDataRate

000204      
000205      Public Sub New()                                                                                                                                                                                                                          544:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000206          'Initialize Objects
000207          gAccelerometer = I2c.Create(I2C_SPEED, Pin.SCL, Pin.SDA, LIS2DH12_I2C_ADDR)                                                                                                                                                           545:  0x0110   PushConstI32            250000 (0x0003D090)
                                                                                                                                                                                                                                                      546:  0xD090                           
                                                                                                                                                                                                                                                      547:  0x0003                           
                                                                                                                                                                                                                                                      548:  0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                                                                                                      549:  0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                                      550:  0x8019   PushConstU10            25 (0x0019)
                                                                                                                                                                                                                                                      551:  0x803B   PushConstU10            59 (0x003B)
                                                                                                                                                                                                                                                      552:  0x0010   ClassNew                
                                                                                                                                                                                                                                                      553:  0xB400   PopMemberRef            gAccelerometer

000208          If GetID() = 0x00 Then                                                                                                                                                                                                                554:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      555:  0x5800   JumpSubr                2284
                                                                                                                                                                                                                                                      556:  0x08EC                           
                                                                                                                                                                                                                                                      557:  0x3802   BranchTrue              560

000209              online = True                                                                                                                                                                                                                     558:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      559:  0xA804   PopMemberU8             online

000210          End If
000211      End Sub                                                                                                                                                                                                                                   560:  0x0097   ReturnMe                

000212      
000213      Public Function map_range(var As Float, old_min As Float, old_max As Float, new_min As Byte, new_max As Byte) As Byte                                                                                                                     561:  0x1850   EntryPoint              ValTypParams=5, RefTypParams=0
                                                                                                                                                                                                                                                      562:  0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000214          'Convert floats to byte range
000215          Dim old_range As Float = old_max - old_min                                                                                                                                                                                            563:  0x8802   PushLocalI32            old_max
                                                                                                                                                                                                                                                      564:  0x8801   PushLocalI32            old_min
                                                                                                                                                                                                                                                      565:  0x003F   FltSub                  
                                                                                                                                                                                                                                                      566:  0x9005   PopLocalI32             old_range

000216          Dim new_range As Float = new_max - new_min                                                                                                                                                                                            567:  0x8804   PushLocalI32            new_max
                                                                                                                                                                                                                                                      568:  0x8803   PushLocalI32            new_min
                                                                                                                                                                                                                                                      569:  0x0031   IntSub                  
                                                                                                                                                                                                                                                      570:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      571:  0x9006   PopLocalI32             new_range

000217          Return ((((var - old_min) * new_range) / old_range) + new_min).ToByte                                                                                                                                                                 572:  0x8800   PushLocalI32            var
                                                                                                                                                                                                                                                      573:  0x8801   PushLocalI32            old_min
                                                                                                                                                                                                                                                      574:  0x003F   FltSub                  
                                                                                                                                                                                                                                                      575:  0x8806   PushLocalI32            new_range
                                                                                                                                                                                                                                                      576:  0x003C   FltMul                  
                                                                                                                                                                                                                                                      577:  0x8805   PushLocalI32            old_range
                                                                                                                                                                                                                                                      578:  0x003B   FltDiv                  
                                                                                                                                                                                                                                                      579:  0x8803   PushLocalI32            new_min
                                                                                                                                                                                                                                                      580:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      581:  0x0039   FltAdd                  
                                                                                                                                                                                                                                                      582:  0x007B   CvtFltToInt             
                                                                                                                                                                                                                                                      583:  0x007D   CvtIntToByt             
                                                                                                                                                                                                                                                      584:  0x0092   ReturnValType           

000218      End Function                                                                                                                                                                                                                              585:  0x0093   Return0                 

000219      
000220      Public Function map_range(var As Float, old_min As Byte, old_max As Byte, new_min As Float, new_max As Float) As Float                                                                                                                    586:  0x1850   EntryPoint              ValTypParams=5, RefTypParams=0
                                                                                                                                                                                                                                                      587:  0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000221          'convert bytes to floats range
000222          Dim old_range As Float = old_max - old_min                                                                                                                                                                                            588:  0x8802   PushLocalI32            old_max
                                                                                                                                                                                                                                                      589:  0x8801   PushLocalI32            old_min
                                                                                                                                                                                                                                                      590:  0x0031   IntSub                  
                                                                                                                                                                                                                                                      591:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      592:  0x9005   PopLocalI32             old_range

000223          Dim new_range As Float = new_max - new_min                                                                                                                                                                                            593:  0x8804   PushLocalI32            new_max
                                                                                                                                                                                                                                                      594:  0x8803   PushLocalI32            new_min
                                                                                                                                                                                                                                                      595:  0x003F   FltSub                  
                                                                                                                                                                                                                                                      596:  0x9006   PopLocalI32             new_range

000224          Return ((((var - old_min) * new_range) / old_range) + new_min).ToFloat                                                                                                                                                                597:  0x8800   PushLocalI32            var
                                                                                                                                                                                                                                                      598:  0x8801   PushLocalI32            old_min
                                                                                                                                                                                                                                                      599:  0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      600:  0x003F   FltSub                  
                                                                                                                                                                                                                                                      601:  0x8806   PushLocalI32            new_range
                                                                                                                                                                                                                                                      602:  0x003C   FltMul                  
                                                                                                                                                                                                                                                      603:  0x8805   PushLocalI32            old_range
                                                                                                                                                                                                                                                      604:  0x003B   FltDiv                  
                                                                                                                                                                                                                                                      605:  0x8803   PushLocalI32            new_min
                                                                                                                                                                                                                                                      606:  0x0039   FltAdd                  
                                                                                                                                                                                                                                                      607:  0x0092   ReturnValType           

000225      End Function                                                                                                                                                                                                                              608:  0x0093   Return0                 

000226      
000227      Public Sub Power_Cycle()                                                                                                                                                                                                                  609:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000228          'Power cycle accelerometer
000229          Device.DisableAccelerometer()                                                                                                                                                                                                         610:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      611:  0x00EE   DeviceEnableAccel       

000230          'delay 5ms
000231          Thread.Delay(5000)                                                                                                                                                                                                                    612:  0x0110   PushConstI32            5000 (0x00001388)
                                                                                                                                                                                                                                                      613:  0x1388                           
                                                                                                                                                                                                                                                      614:  0x0000                           
                                                                                                                                                                                                                                                      615:  0x00D2   ThreadDelay             

000232          Device.EnableAccelerometer()                                                                                                                                                                                                          616:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      617:  0x00EE   DeviceEnableAccel       

000233          'delay 20ms to accelerometer to boot
000234          Thread.Delay(20000)                                                                                                                                                                                                                   618:  0x0110   PushConstI32            20000 (0x00004E20)
                                                                                                                                                                                                                                                      619:  0x4E20                           
                                                                                                                                                                                                                                                      620:  0x0000                           
                                                                                                                                                                                                                                                      621:  0x00D2   ThreadDelay             

000235      End Sub                                                                                                                                                                                                                                   622:  0x0091   Return                  

000236      
000237      Public Sub reset()                                                                                                                                                                                                                        623:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000238          write(CTRL_REG5, RST_MASK)                                                                                                                                                                                                            624:  0x8024   PushConstU10            36 (0x0024)
                                                                                                                                                                                                                                                      625:  0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                                      626:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      627:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      628:  0x0924                           

000239          Thread.Delay(20000)                                                                                                                                                                                                                   629:  0x0110   PushConstI32            20000 (0x00004E20)
                                                                                                                                                                                                                                                      630:  0x4E20                           
                                                                                                                                                                                                                                                      631:  0x0000                           
                                                                                                                                                                                                                                                      632:  0x00D2   ThreadDelay             

000240      End Sub                                                                                                                                                                                                                                   633:  0x0091   Return                  

000241      
000242      //temperature functions
000243      
000244      Public Sub EnableTemperature(temp As Boolean)                                                                                                                                                                                             634:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      635:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000245          //bits 6,7
000246          'Temperature sensor (T) enable. Default value: 00
000247          '(00: T disabled; 11: T enabled)
000248          Dim enable As Byte = 0
000249          If temp Then                                                                                                                                                                                                                          636:  0x8800   PushLocalI32            temp
                                                                                                                                                                                                                                                      637:  0x3C05   BranchFalse             643

000250              enable = TEMP_ENABLE                                                                                                                                                                                                              638:  0x80C0   PushConstU10            192 (0x00C0)
                                                                                                                                                                                                                                                      639:  0x9001   PopLocalI32             enable

000251              SetBlockData(BDU_BIT) //enable block data update (required for temp reading)                                                                                                                                                      640:  0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                                      641:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      642:  0x1DBE   BranchSubr              1089

000252          End If
000253          write(TEMP_CFG, enable) // write bits 6,7                                                                                                                                                                                             643:  0x801F   PushConstU10            31 (0x001F)
                                                                                                                                                                                                                                                      644:  0x8801   PushLocalI32            enable
                                                                                                                                                                                                                                                      645:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      646:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      647:  0x0924                           

000254      End Sub                                                                                                                                                                                                                                   648:  0x0091   Return                  

000255      
000256      Public Function GetTemperatureEnabled() As Boolean                                                                                                                                                                                        649:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000257          //bits 6,7
000258          'Temperature sensor (T) enable. Default value: 00
000259          '(00: T disabled; 11: T enabled)
000260          If ((read(TEMP_CFG) & TEMP_ENABLE).ToBoolean) And ((GetBlockData() & BDU_BIT).ToBoolean) Then                                                                                                                                         650:  0x801F   PushConstU10            31 (0x001F)
                                                                                                                                                                                                                                                      651:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      652:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      653:  0x0900                           
                                                                                                                                                                                                                                                      654:  0x80C0   PushConstU10            192 (0x00C0)
                                                                                                                                                                                                                                                      655:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      656:  0x0000   Nop                     
                                                                                                                                                                                                                                                      657:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      658:  0x1DBC   BranchSubr              1103
                                                                                                                                                                                                                                                      659:  0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                                      660:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      661:  0x0000   Nop                     
                                                                                                                                                                                                                                                      662:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      663:  0x3C02   BranchFalse             666

000261              Return True                                                                                                                                                                                                                       664:  0x0094   Return1                 

                                                                                                                                                                                                                                                      665:  0x4001   Branch                  667
000262          Else                                                                                                                                                                                                                                  

000263              Return False                                                                                                                                                                                                                      666:  0x0093   Return0                 

000264          End If
000265      End Function                                                                                                                                                                                                                              667:  0x0093   Return0                 

000266      
000267      Public Sub SetTemperatureBits(temp As Byte)                                                                                                                                                                                               668:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000268          //bits 6,7 - rest not used
000269          'Temperature sensor (T) enable. Default value: 00
000270          '(00: T disabled; 11: T enabled)
000271          write(TEMP_CFG, temp) // write bits 6,7                                                                                                                                                                                               669:  0x801F   PushConstU10            31 (0x001F)
                                                                                                                                                                                                                                                      670:  0x8800   PushLocalI32            temp
                                                                                                                                                                                                                                                      671:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      672:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      673:  0x0924                           

000272      End Sub                                                                                                                                                                                                                                   674:  0x0091   Return                  

000273      
000274      Public Function GetTemperatureBits() As Byte                                                                                                                                                                                              675:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000275          //bits 6,7
000276          'Temperature sensor (T) enable. Default value: 00
000277          '(00: T disabled; 11: T enabled)
000278          Return (read(TEMP_CFG) & TEMP_ENABLE)                                                                                                                                                                                                 676:  0x801F   PushConstU10            31 (0x001F)
                                                                                                                                                                                                                                                      677:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      678:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      679:  0x0900                           
                                                                                                                                                                                                                                                      680:  0x80C0   PushConstU10            192 (0x00C0)
                                                                                                                                                                                                                                                      681:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      682:  0x0092   ReturnValType           

000279      End Function                                                                                                                                                                                                                              683:  0x0093   Return0                 

000280      
000281      Public Function GetTemperatureStatus() As Byte                                                                                                                                                                                            684:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000282          'TOR Temperature data overrun. Default value: 0
000283          '(0: no overrun has occurred; 1: new temperature data has overwritten the previous data)
000284          'TDA Temperature new data available. Default value: 0
000285          '(0: new temperature data is not yet available; 1: new temperature data is available)
000286          Return (read(STATUS_REG_AUX) & (TOR | TDA))                                                                                                                                                                                           685:  0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                                                                                                      686:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      687:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      688:  0x0900                           
                                                                                                                                                                                                                                                      689:  0x8044   PushConstU10            68 (0x0044)
                                                                                                                                                                                                                                                      690:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      691:  0x0092   ReturnValType           

000287      End Function                                                                                                                                                                                                                              692:  0x0093   Return0                 

000288      
000289      Public Function NewTemperatureAvailable() As Boolean                                                                                                                                                                                      693:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000290          Return GetTemperatureStatus().ToBoolean                                                                                                                                                                                               694:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      695:  0x540C   BranchSubrBack          684
                                                                                                                                                                                                                                                      696:  0x0000   Nop                     
                                                                                                                                                                                                                                                      697:  0x0092   ReturnValType           

000291      End Function                                                                                                                                                                                                                              698:  0x0093   Return0                 

000292      
000293      Public Function GetTemp() As Byte                                                                                                                                                                                                         699:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                                      700:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000294          'Both the OUT_TEMP_L (0Ch), OUT_TEMP_H (0Dh) registers must be read.
000295          'Temperature data is stored inside OUT_TEMP_H as two’s complement data in 8-bit format
000296          'left-justified.
000297          Dim Temp As Byte = read(OUT_TEMP_L) //dummy read                                                                                                                                                                                      701:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                                      702:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      703:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      704:  0x0900                           
                                                                                                                                                                                                                                                      705:  0x9000   PopLocalI32             Temp

000298          Temp = read(OUT_TEMP_H)                                                                                                                                                                                                               706:  0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                                                                                                      707:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      708:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      709:  0x0900                           
                                                                                                                                                                                                                                                      710:  0x9000   PopLocalI32             Temp

000299          Return Temp                                                                                                                                                                                                                           711:  0x8800   PushLocalI32            Temp
                                                                                                                                                                                                                                                      712:  0x0092   ReturnValType           

000300      End Function                                                                                                                                                                                                                              713:  0x0093   Return0                 

000301      
000302      //accelerometer functions
000303      
000304      Public Function GetStatus() As Byte                                                                                                                                                                                                       714:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000305          'ZYXOR X-, Y- and Z-axis data overrun. Default value: 0
000306          '(0: no overrun has occurred; 1: a new set of data has overwritten the previous set)
000307          'ZOR Z-axis data overrun. Default value: 0
000308          'YOR Y-axis data overrun. Default value: 0
000309          'XOR X-axis data overrun. Default value: 0
000310          'ZYXDA X-, Y- and Z-axis new data available. Default value: 0
000311          '(0: a new set of data is not yet available; 1: a new set of data is available)
000312          'ZDA Z-axis new data available. Default value: 0
000313          'YDA Y-axis new data available. Default value: 0
000314          'XDA Y-axis new data available. Default value: 0
000315          Return read(STATUS)                                                                                                                                                                                                                   715:  0x8027   PushConstU10            39 (0x0027)
                                                                                                                                                                                                                                                      716:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      717:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      718:  0x0900                           
                                                                                                                                                                                                                                                      719:  0x0092   ReturnValType           

000316      End Function                                                                                                                                                                                                                              720:  0x0093   Return0                 

000317      
000318      
000319      Public Sub EnableAxis(axis As Byte)                                                                                                                                                                                                       721:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000320          //x=0,y=1,z=3 to enable axis
000321          write(CTRL_REG1, (read(CTRL_REG1) & ~(X_AXIS | Y_AXIS | Z_AXIS)) | axis) // write bits 0,1,2                                                                                                                                          722:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      723:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      724:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      725:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      726:  0x0900                           
                                                                                                                                                                                                                                                      727:  0x80FC   PushConstU10            252 (0x00FC)
                                                                                                                                                                                                                                                      728:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      729:  0x8800   PushLocalI32            axis
                                                                                                                                                                                                                                                      730:  0x002D   IntOr                   
                                                                                                                                                                                                                                                      731:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      732:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      733:  0x0924                           

000322      End Sub                                                                                                                                                                                                                                   734:  0x0091   Return                  

000323      
000324      Public Function GetAxisEnabled() As Byte                                                                                                                                                                                                  735:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000325          Return (read(CTRL_REG1) & (X_AXIS | Y_AXIS | Z_AXIS))                                                                                                                                                                                 736:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      737:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      738:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      739:  0x0900                           
                                                                                                                                                                                                                                                      740:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      741:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      742:  0x0092   ReturnValType           

000326      End Function                                                                                                                                                                                                                              743:  0x0093   Return0                 

000327      
000328      Public Sub SetSleepToWakeThreshold(threshold As Float)                                                                                                                                                                                    744:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      745:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000329          'A 7-bit unsigned number, with g/LSB. dependant on range setting
000330          '1 LSb = 16 mg @ FS = 2 g
000331          '1 LSb = 32 mg @ FS = 4 g
000332          '1 LSb = 62 mg @ FS = 8 g
000333          '1 LSb = 186 mg @ FS = 16 g
000334          'below threshold, accelerometer operates at 10Hz/LOW_POWER mode, if threshold is exceeded for
000335          'duration (see below), accelerometer resumes the set ODR/mode
000336          Dim thresholdByte As Byte = 0
000337          If threshold <= 2.0 Then                                                                                                                                                                                                              746:  0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      747:  0xE91E   PushConstBit            1<<30  (0x40000000 Or 1073741824)
                                                                                                                                                                                                                                                      748:  0x003A   FltCmp                  
                                                                                                                                                                                                                                                      749:  0x300C   BranchGT                762

000338              SetScale(SCALE_2G)                                                                                                                                                                                                                750:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      751:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      752:  0x1D35   BranchSubr              1062

000339              thresholdByte = map_range(threshold, 0, 2.0, 0, 0x7f)                                                                                                                                                                             753:  0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      754:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      755:  0xE91E   PushConstBit            1<<30  (0x40000000 Or 1073741824)
                                                                                                                                                                                                                                                      756:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      757:  0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      758:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      759:  0x54C7   BranchSubrBack          561
                                                                                                                                                                                                                                                      760:  0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      761:  0x402F   Branch                  809
000340          ElseIf threshold <= 4.0 Then                                                                                                                                                                                                          762:  0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      763:  0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                                      764:  0x003A   FltCmp                  
                                                                                                                                                                                                                                                      765:  0x300C   BranchGT                778

000341              SetScale(SCALE_4G)                                                                                                                                                                                                                766:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      767:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      768:  0x1D25   BranchSubr              1062

000342              thresholdByte = map_range(threshold, 0, 4.0, 0, 0x7f)                                                                                                                                                                             769:  0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      770:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      771:  0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                                      772:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      773:  0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      774:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      775:  0x54D7   BranchSubrBack          561
                                                                                                                                                                                                                                                      776:  0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      777:  0x401F   Branch                  809
000343          ElseIf threshold <= 8.0 Then                                                                                                                                                                                                          778:  0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      779:  0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                                      780:  0x003A   FltCmp                  
                                                                                                                                                                                                                                                      781:  0x300C   BranchGT                794

000344              SetScale(SCALE_8G)                                                                                                                                                                                                                782:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      783:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      784:  0x1D15   BranchSubr              1062

000345              thresholdByte = map_range(threshold, 0, 8.0, 0, 0x7f)                                                                                                                                                                             785:  0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      786:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      787:  0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                                      788:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      789:  0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      790:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      791:  0x54E7   BranchSubrBack          561
                                                                                                                                                                                                                                                      792:  0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      793:  0x400F   Branch                  809
000346          ElseIf threshold <= 16.0 Then                                                                                                                                                                                                         794:  0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      795:  0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      796:  0x003A   FltCmp                  
                                                                                                                                                                                                                                                      797:  0x300B   BranchGT                809

000347              SetScale(SCALE_16G)                                                                                                                                                                                                               798:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      799:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      800:  0x1D05   BranchSubr              1062

000348              thresholdByte = map_range(threshold, 0, 16.0, 0, 0x7f)                                                                                                                                                                            801:  0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      802:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      803:  0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      804:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      805:  0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      806:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      807:  0x54F7   BranchSubrBack          561
                                                                                                                                                                                                                                                      808:  0x9001   PopLocalI32             thresholdByte

000349          End If
000350          If thresholdByte <= 0x7f Then                                                                                                                                                                                                         809:  0x8801   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                                      810:  0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      811:  0x3005   BranchGT                817

000351              write(ACT_THS, thresholdByte)                                                                                                                                                                                                     812:  0x803E   PushConstU10            62 (0x003E)
                                                                                                                                                                                                                                                      813:  0x8801   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                                      814:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      815:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      816:  0x0924                           

000352          End If
000353      End Sub                                                                                                                                                                                                                                   817:  0x0091   Return                  

000354      
000355      Public Sub SetSleepToWakeDuration(duration As Float)                                                                                                                                                                                      818:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      819:  0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000356          'An 8-bit unsigned number, with duration dependant on data rate
000357          'Sleep-to-wake, return-to-sleep duration in ms
000358          '1 LSb = (8*1[LSb]+1)/ODR
000359          'value of 0 @ 50Hz = 1/50 = 20 ms, value of 1 = (8*1 + 1)/50 = 9/50 = 180ms 
000360          'our equation becomes duration = ((8*X)+1)*msPerCount, solving for X
000361          'X = ((duration/msPerCount) - 1)/8
000362          'so if duration is 5000ms, @ 50Hz = ((5000/50)-1)/8 = 249/8 = 31(.125)
000363          'below threshold (see above), accelerometer operates at 10Hz/LOW_POWER mode, if threshold
000364          'is exceeded, accelerometer resumes the set ODR/mode for duration ms
000365          Dim msPerCount As Float = GetmsFromDataRate()                                                                                                                                                                                         820:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      821:  0x1C9A   BranchSubr              976
                                                                                                                                                                                                                                                      822:  0x9001   PopLocalI32             msPerCount

000366          Dim count As Byte = (((duration / msPerCount) - 1) / 8).ToByte                                                                                                                                                                        823:  0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                                      824:  0x8801   PushLocalI32            msPerCount
                                                                                                                                                                                                                                                      825:  0x003B   FltDiv                  
                                                                                                                                                                                                                                                      826:  0xEA01   PushConstFlt            1.0
                                                                                                                                                                                                                                                      827:  0x003F   FltSub                  
                                                                                                                                                                                                                                                      828:  0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                                      829:  0x003B   FltDiv                  
                                                                                                                                                                                                                                                      830:  0x007B   CvtFltToInt             
                                                                                                                                                                                                                                                      831:  0x007D   CvtIntToByt             
                                                                                                                                                                                                                                                      832:  0x9002   PopLocalI32             count

000367          If count > 0xff Then                                                                                                                                                                                                                  833:  0x8802   PushLocalI32            count
                                                                                                                                                                                                                                                      834:  0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                                      835:  0x2C02   BranchLE                838

000368              'need to reduce frequency
000369              count = 0xff                                                                                                                                                                                                                      836:  0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                                      837:  0x9002   PopLocalI32             count

000370          End If
000371          write(ACT_DUR, count)                                                                                                                                                                                                                 838:  0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                                      839:  0x8802   PushLocalI32            count
                                                                                                                                                                                                                                                      840:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      841:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      842:  0x0924                           

000372      End Sub                                                                                                                                                                                                                                   843:  0x0091   Return                  

000373      
000374      Public Sub SetMode(mode As Byte)                                                                                                                                                                                                          844:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000375          'Set Operating Mode
000376          'modes are high-resolution mode, normal mode and low-power mode.
000377          '                                          LP( ctlreg1[3] HR ctlreg4[3]
000378          'Low-power mode (8-bit data output)        1              0 
000379          'Normal mode    (10-bit data output)       0              0
000380          'High-resolution mode (12-bit data output) 0              1
000381          
000382          If mode = LOW_POWER_MODE Then                                                                                                                                                                                                         845:  0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      846:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      847:  0x2417   BranchNE                871

000383              'Set Low Power 8 bit mode (LPEN_BIT = 1, HR_BIT = 0)
000384              write(CTRL_REG1, (read(CTRL_REG1) & ~LPEN_BIT) | LPEN_BIT) // clear bit 3, set LPmode                                                                                                                                             848:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      849:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      850:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      851:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      852:  0x0900                           
                                                                                                                                                                                                                                                      853:  0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                                                                                                      854:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      855:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      856:  0x002D   IntOr                   
                                                                                                                                                                                                                                                      857:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      858:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      859:  0x0924                           

000385              write(CTRL_REG4, (read(CTRL_REG4) & ~HR_BIT)) // clear bit 3, disable HR mode                                                                                                                                                     860:  0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      861:  0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      862:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      863:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      864:  0x0900                           
                                                                                                                                                                                                                                                      865:  0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                                                                                                      866:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      867:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      868:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      869:  0x0924                           

                                                                                                                                                                                                                                                      870:  0x4031   Branch                  920
000386          ElseIf mode = NORMAL_MODE Then                                                                                                                                                                                                        871:  0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      872:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      873:  0x2415   BranchNE                895

000387              'Set Normal 10 bit mode (LPEN_BIT = 0, HR_BIT = 0)
000388              write(CTRL_REG1, (read(CTRL_REG1) & ~LPEN_BIT)) // clear bit 3, disable LPmode                                                                                                                                                    874:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      875:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      876:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      877:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      878:  0x0900                           
                                                                                                                                                                                                                                                      879:  0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                                                                                                      880:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      881:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      882:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      883:  0x0924                           

000389              write(CTRL_REG4, (read(CTRL_REG4) & ~HR_BIT)) // clear bit 3, disable HR mode                                                                                                                                                     884:  0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      885:  0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      886:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      887:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      888:  0x0900                           
                                                                                                                                                                                                                                                      889:  0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                                                                                                      890:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      891:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      892:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      893:  0x0924                           

                                                                                                                                                                                                                                                      894:  0x4019   Branch                  920
000390          ElseIf mode = HIGH_RESOLUTION_MODE Then                                                                                                                                                                                               895:  0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      896:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      897:  0x2416   BranchNE                920

000391              'Set High Resolution 12 bit mode (LPEN_BIT = 0, HR_BIT = 1)
000392              write(CTRL_REG1, (read(CTRL_REG1) & ~LPEN_BIT)) // clear bit 3, disable LPmode                                                                                                                                                    898:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      899:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      900:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      901:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      902:  0x0900                           
                                                                                                                                                                                                                                                      903:  0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                                                                                                      904:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      905:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      906:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      907:  0x0924                           

000393              write(CTRL_REG4, (read(CTRL_REG4) & ~HR_BIT) | HR_BIT) // clear bit 3, enable HR mode                                                                                                                                             908:  0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      909:  0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      910:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      911:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      912:  0x0900                           
                                                                                                                                                                                                                                                      913:  0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                                                                                                      914:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      915:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      916:  0x002D   IntOr                   
                                                                                                                                                                                                                                                      917:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      918:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      919:  0x0924                           

000394          End If
000395      End Sub                                                                                                                                                                                                                                   920:  0x0091   Return                  

000396      
000397      Public Function GetMode() As Byte                                                                                                                                                                                                         921:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                                      922:  0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000398          'Get Operating Mode
000399          'modes are high-resolution mode, normal mode and low-power mode.
000400          '                                          LP( ctlreg1[3] HR ctlreg4[3]
000401          'Low-power mode (8-bit data output)        1              0 
000402          'Normal mode    (10-bit data output)       0              0
000403          'High-resolution mode (12-bit data output) 0              1
000404          
000405          Dim LPbit As Boolean = (read(CTRL_REG1) & LPEN_BIT).ToBoolean// read bit 3, LPmode                                                                                                                                                    923:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      924:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      925:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      926:  0x0900                           
                                                                                                                                                                                                                                                      927:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      928:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      929:  0x0000   Nop                     
                                                                                                                                                                                                                                                      930:  0x9000   PopLocalI32             LPbit

000406          Dim HRbit As Boolean = (read(CTRL_REG4) & HR_BIT).ToBoolean// read bit 3,  HR mode                                                                                                                                                    931:  0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      932:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      933:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      934:  0x0900                           
                                                                                                                                                                                                                                                      935:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      936:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      937:  0x0000   Nop                     
                                                                                                                                                                                                                                                      938:  0x9001   PopLocalI32             HRbit

000407          
000408          If LPbit Then                                                                                                                                                                                                                         939:  0x8800   PushLocalI32            LPbit
                                                                                                                                                                                                                                                      940:  0x3C01   BranchFalse             942

000409              Return LOW_POWER_MODE                                                                                                                                                                                                             941:  0x0094   Return1                 

000410          End If
000411          
000412          If HRbit Then                                                                                                                                                                                                                         942:  0x8801   PushLocalI32            HRbit
                                                                                                                                                                                                                                                      943:  0x3C02   BranchFalse             946

000413              Return HIGH_RESOLUTION_MODE                                                                                                                                                                                                       944:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      945:  0x0092   ReturnValType           

000414          End If
000415          // otherwise normal mode
000416          Return NORMAL_MODE                                                                                                                                                                                                                    946:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      947:  0x0092   ReturnValType           

000417      End Function                                                                                                                                                                                                                              948:  0x0093   Return0                 

000418      
000419      Public Sub SetDataRate(rate As Byte)                                                                                                                                                                                                      949:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000420          'Set Data Rate, bits 4,5,6,7
000421          'Data rate selection. Default value: 0000
000422          '(0000: power-down mode; others: refer to Table 27)
000423          write(CTRL_REG1, (read(CTRL_REG1) & ~DATA_RATE_MASK) | (rate << 4))                                                                                                                                                                   950:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      951:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      952:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      953:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      954:  0x0900                           
                                                                                                                                                                                                                                                      955:  0x800F   PushConstU10            15 (0x000F)
                                                                                                                                                                                                                                                      956:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      957:  0x8800   PushLocalI32            rate
                                                                                                                                                                                                                                                      958:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      959:  0x002E   IntShl                  
                                                                                                                                                                                                                                                      960:  0x002D   IntOr                   
                                                                                                                                                                                                                                                      961:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      962:  0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      963:  0x0924                           

000424      End Sub                                                                                                                                                                                                                                   964:  0x0091   Return                  

000425      
000426      Public Function GetDataRate() As Byte                                                                                                                                                                                                     965:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000427          'Get Data Rate, bits 4,5,6,7
000428          'Data rate selection. Default value: 0000
000429          '(0000: power-down mode; others: refer to Table 27)
000430          Return ((read(CTRL_REG1) & DATA_RATE_MASK) >> 4)                                                                                                                                                                                      966:  0x8020   PushConstU10            32 (0x0020)
                                                                                                                                                                                                                                                      967:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      968:  0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      969:  0x0900                           
                                                                                                                                                                                                                                                      970:  0x80F0   PushConstU10            240 (0x00F0)
                                                                                                                                                                                                                                                      971:  0x001F   IntAnd                  
                                                                                                                                                                                                                                                      972:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      973:  0x002F   IntShr                  
                                                                                                                                                                                                                                                      974:  0x0092   ReturnValType           

000431      End Function                                                                                                                                                                                                                              975:  0x0093   Return0                 

000432      
000433      
000434      Public Function GetmsFromDataRate() As Float                                                                                                                                                                                              976:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                                      977:  0xE060   AllocateStackSpace      ValTypeSize=3, RefTypeSize=0

000435          'Get Data Rate, bits 4,5,6,7
000436          'return as ms
000437          Dim ms As Float = 0.0
000438          Dim mode As Byte = GetMode()                                                                                                                                                                                                          978:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      979:  0x543B   BranchSubrBack          921
                                                                                                                                                                                                                                                      980:  0x9001   PopLocalI32             mode

000439          Dim dataRate As Byte = GetDataRate()                                                                                                                                                                                                  981:  0x000D   PushMe                  
                                                                                                                                                                                                                                                      982:  0x5412   BranchSubrBack          965
                                                                                                                                                                                                                                                      983:  0x9002   PopLocalI32             dataRate

000440          Select dataRate                                                                                                                                                                                                                       984:  0x8802   PushLocalI32            dataRate
                                                                                                                                                                                                                                                      985:  0x0122   CaseComputed            
                                                                                                                                                                                                                                                      986:  0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                                      987:  0x000A                           NumberOfCaseEntries=10
                                                                                                                                                                                                                                                      988:  0x0044                           CaseElseBranch=1057
                                                                                                                                                                                                                                                      989:  0x0000                           CaseValue=0
                                                                                                                                                                                                                                                      990:  0x0014                           CaseBranch=1009
                                                                                                                                                                                                                                                      991:  0x0001                           CaseValue=1
                                                                                                                                                                                                                                                      992:  0x0019                           CaseBranch=1014
                                                                                                                                                                                                                                                      993:  0x0002                           CaseValue=2
                                                                                                                                                                                                                                                      994:  0x001E                           CaseBranch=1019
                                                                                                                                                                                                                                                      995:  0x0003                           CaseValue=3
                                                                                                                                                                                                                                                      996:  0x0021                           CaseBranch=1022
                                                                                                                                                                                                                                                      997:  0x0004                           CaseValue=4
                                                                                                                                                                                                                                                      998:  0x0024                           CaseBranch=1025
                                                                                                                                                                                                                                                      999:  0x0005                           CaseValue=5
                                                                                                                                                                                                                                                      1000: 0x0027                           CaseBranch=1028
                                                                                                                                                                                                                                                      1001: 0x0006                           CaseValue=6
                                                                                                                                                                                                                                                      1002: 0x002A                           CaseBranch=1031
                                                                                                                                                                                                                                                      1003: 0x0007                           CaseValue=7
                                                                                                                                                                                                                                                      1004: 0x002D                           CaseBranch=1034
                                                                                                                                                                                                                                                      1005: 0x0008                           CaseValue=8
                                                                                                                                                                                                                                                      1006: 0x0032                           CaseBranch=1039
                                                                                                                                                                                                                                                      1007: 0x0009                           CaseValue=9
                                                                                                                                                                                                                                                      1008: 0x0037                           CaseBranch=1044

000441              Case DATA_RATE_POWER_DOWN 'no data rate, accel is off!
000442                  ms = 10000.0                                                                                                                                                                                                                  1009: 0x0110   PushConstI32            1176256512 (0x461C4000)
                                                                                                                                                                                                                                                      1010: 0x4000                           
                                                                                                                                                                                                                                                      1011: 0x461C                           
                                                                                                                                                                                                                                                      1012: 0x9000   PopLocalI32             ms

                                                                                                                                                                                                                                                      1013: 0x402D   Branch                  1059
000443              Case DATA_RATE_1HZ                                                                                                                                                                                                                

000444                  ms = 1000.0                                                                                                                                                                                                                   1014: 0x0110   PushConstI32            1148846080 (0x447A0000)
                                                                                                                                                                                                                                                      1015: 0x0000                           
                                                                                                                                                                                                                                                      1016: 0x447A                           
                                                                                                                                                                                                                                                      1017: 0x9000   PopLocalI32             ms

                                                                                                                                                                                                                                                      1018: 0x4028   Branch                  1059
000445              Case DATA_RATE_10HZ                                                                                                                                                                                                               

000446                  ms = 100.0                                                                                                                                                                                                                    1019: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                                                                                                      1020: 0x9000   PopLocalI32             ms

                                                                                                                                                                                                                                                      1021: 0x4025   Branch                  1059
000447              Case DATA_RATE_25HZ                                                                                                                                                                                                               

000448                  ms = 40.0                                                                                                                                                                                                                     1022: 0xEA28   PushConstFlt            40.0
                                                                                                                                                                                                                                                      1023: 0x9000   PopLocalI32             ms

                                                                                                                                                                                                                                                      1024: 0x4022   Branch                  1059
000449              Case DATA_RATE_50HZ                                                                                                                                                                                                               

000450                  ms = 20.0                                                                                                                                                                                                                     1025: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                                      1026: 0x9000   PopLocalI32             ms

                                                                                                                                                                                                                                                      1027: 0x401F   Branch                  1059
000451              Case DATA_RATE_100HZ                                                                                                                                                                                                              

000452                  ms = 10.0                                                                                                                                                                                                                     1028: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                                                                                                      1029: 0x9000   PopLocalI32             ms

                                                                                                                                                                                                                                                      1030: 0x401C   Branch                  1059
000453              Case DATA_RATE_200HZ                                                                                                                                                                                                              

000454                  ms = 5.0                                                                                                                                                                                                                      1031: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                                      1032: 0x9000   PopLocalI32             ms

                                                                                                                                                                                                                                                      1033: 0x4019   Branch                  1059
000455              Case DATA_RATE_400HZ                                                                                                                                                                                                              

000456                  ms = 2.5                                                                                                                                                                                                                      1034: 0x0110   PushConstI32            1075838976 (0x40200000)
                                                                                                                                                                                                                                                      1035: 0x0000                           
                                                                                                                                                                                                                                                      1036: 0x4020                           
                                                                                                                                                                                                                                                      1037: 0x9000   PopLocalI32             ms

                                                                                                                                                                                                                                                      1038: 0x4014   Branch                  1059
000457              Case DATA_RATE_1620HZ_LP 'low power mode only                                                                                                                                                                                     

000458                  ms = 0.617                                                                                                                                                                                                                    1039: 0x0110   PushConstI32            1058927542 (0x3F1DF3B6)
                                                                                                                                                                                                                                                      1040: 0xF3B6                           
                                                                                                                                                                                                                                                      1041: 0x3F1D                           
                                                                                                                                                                                                                                                      1042: 0x9000   PopLocalI32             ms

                                                                                                                                                                                                                                                      1043: 0x400F   Branch                  1059
000459              Case DATA_RATE_1344HZ 'in low power mode this is 5376 Hz                                                                                                                                                                          

000460                  If mode = LOW_POWER_MODE Then                                                                                                                                                                                                 1044: 0x8801   PushLocalI32            mode
                                                                                                                                                                                                                                                      1045: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1046: 0x2405   BranchNE                1052

000461                      ms = 0.186                                                                                                                                                                                                                1047: 0x0110   PushConstI32            1044281033 (0x3E3E76C9)
                                                                                                                                                                                                                                                      1048: 0x76C9                           
                                                                                                                                                                                                                                                      1049: 0x3E3E                           
                                                                                                                                                                                                                                                      1050: 0x9000   PopLocalI32             ms

                                                                                                                                                                                                                                                      1051: 0x4004   Branch                  1056
000462                  Else                                                                                                                                                                                                                          

000463                      ms = 0.744                                                                                                                                                                                                                1052: 0x0110   PushConstI32            1061058249 (0x3F3E76C9)
                                                                                                                                                                                                                                                      1053: 0x76C9                           
                                                                                                                                                                                                                                                      1054: 0x3F3E                           
                                                                                                                                                                                                                                                      1055: 0x9000   PopLocalI32             ms

000464                  End If
                                                                                                                                                                                                                                                      1056: 0x4002   Branch                  1059
000465              Case Else                                                                                                                                                                                                                         

000466                  ms = 20.0                                                                                                                                                                                                                     1057: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                                                                                                      1058: 0x9000   PopLocalI32             ms

000467          End Select
000468          Return ms                                                                                                                                                                                                                             1059: 0x8800   PushLocalI32            ms
                                                                                                                                                                                                                                                      1060: 0x0092   ReturnValType           

000469      End Function                                                                                                                                                                                                                              1061: 0x0093   Return0                 

000470      
000471      Public Sub SetScale(scale As Byte)                                                                                                                                                                                                        1062: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000472          'Set Scale, bits 4,5
000473          'Full-scale selection. Default value: 00
000474          '(00: ±2g; 01: ±4g; 10: ±8g; 11: ±16g)
000475          write(CTRL_REG4, (read(CTRL_REG4) & ~SCALE_MASK) | (scale << 4))                                                                                                                                                                      1063: 0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      1064: 0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      1065: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1066: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1067: 0x0900                           
                                                                                                                                                                                                                                                      1068: 0x80CF   PushConstU10            207 (0x00CF)
                                                                                                                                                                                                                                                      1069: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1070: 0x8800   PushLocalI32            scale
                                                                                                                                                                                                                                                      1071: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      1072: 0x002E   IntShl                  
                                                                                                                                                                                                                                                      1073: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1074: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1075: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1076: 0x0924                           

000476      End Sub                                                                                                                                                                                                                                   1077: 0x0091   Return                  

000477      
000478      Public Function GetScale() As Byte                                                                                                                                                                                                        1078: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000479          'Get Scale, bits 4,5
000480          'Full-scale selection. Default value: 00
000481          '(00: ±2g; 01: ±4g; 10: ±8g; 11: ±16g)
000482          Return ((read(CTRL_REG4) & SCALE_MASK) >> 4)                                                                                                                                                                                          1079: 0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      1080: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1081: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1082: 0x0900                           
                                                                                                                                                                                                                                                      1083: 0x8030   PushConstU10            48 (0x0030)
                                                                                                                                                                                                                                                      1084: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1085: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      1086: 0x002F   IntShr                  
                                                                                                                                                                                                                                                      1087: 0x0092   ReturnValType           

000483      End Function                                                                                                                                                                                                                              1088: 0x0093   Return0                 

000484      
000485      Public Sub SetBlockData(block As Byte)                                                                                                                                                                                                    1089: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000486          'BDU Block data update. Default value: 0
000487          '(0: continuous update; 1: output registers not updated until MSB and LSB
000488          'have been read)
000489          write(CTRL_REG4, (read(CTRL_REG4) & ~BDU_BIT) | block)                                                                                                                                                                                1090: 0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      1091: 0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      1092: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1093: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1094: 0x0900                           
                                                                                                                                                                                                                                                      1095: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1096: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1097: 0x8800   PushLocalI32            block
                                                                                                                                                                                                                                                      1098: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1099: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1100: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1101: 0x0924                           

000490      End Sub                                                                                                                                                                                                                                   1102: 0x0091   Return                  

000491      
000492      Public Function GetBlockData() As Byte                                                                                                                                                                                                    1103: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000493          'Get Scale, bits 4,5
000494          'Full-scale selection. Default value: 00
000495          '(00: ±2g; 01: ±4g; 10: ±8g; 11: ±16g)
000496          Return (read(CTRL_REG4) & BDU_BIT)                                                                                                                                                                                                    1104: 0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      1105: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1106: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1107: 0x0900                           
                                                                                                                                                                                                                                                      1108: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                                      1109: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1110: 0x0092   ReturnValType           

000497      End Function                                                                                                                                                                                                                              1111: 0x0093   Return0                 

000498      
000499      Public Sub SetEndian(endian As Byte)                                                                                                                                                                                                      1112: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000500          'Big/Little Endian data selection. Default value: 0
000501          '(0: data LSb at lower address; 1: data MSb at lower address)
000502          'The BLE function can be activated only in high-resolution mode
000503          write(CTRL_REG4, (read(CTRL_REG4) & ~BLE_BIT) | endian)                                                                                                                                                                               1113: 0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      1114: 0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      1115: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1116: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1117: 0x0900                           
                                                                                                                                                                                                                                                      1118: 0x80BF   PushConstU10            191 (0x00BF)
                                                                                                                                                                                                                                                      1119: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1120: 0x8800   PushLocalI32            endian
                                                                                                                                                                                                                                                      1121: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1122: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1123: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1124: 0x0924                           

000504      End Sub                                                                                                                                                                                                                                   1125: 0x0091   Return                  

000505      
000506      Public Function GetEndian() As Byte                                                                                                                                                                                                       1126: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000507          'Big/Little Endian data selection. Default value: 0
000508          '(0: data LSb at lower address; 1: data MSb at lower address)
000509          'The BLE function can be activated only in high-resolution mode
000510          Return (read(CTRL_REG4) & BLE_BIT)                                                                                                                                                                                                    1127: 0x8023   PushConstU10            35 (0x0023)
                                                                                                                                                                                                                                                      1128: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1129: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1130: 0x0900                           
                                                                                                                                                                                                                                                      1131: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                                      1132: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1133: 0x0092   ReturnValType           

000511      End Function                                                                                                                                                                                                                              1134: 0x0093   Return0                 

000512      
000513      Public Sub SetFilterMode(mode As Byte)                                                                                                                                                                                                    1135: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000514          'Set High Pass Filter mode, bits 6,7
000515          'High-pass filter mode selection. Default value: 00
000516          'bit 7, 6
000517          '0 0 Normal mode (reset by reading REFERENCE/DATACAPTURE (26h) register)
000518          '0 1 Reference signal for filtering
000519          '1 0 Normal mode
000520          '1 1 Autoreset on interrupt event
000521          write(CTRL_REG2, (read(CTRL_REG2) & ~HP_FILTER_MODE_MASK) | mode)                                                                                                                                                                     1136: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1137: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1138: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1139: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1140: 0x0900                           
                                                                                                                                                                                                                                                      1141: 0x803F   PushConstU10            63 (0x003F)
                                                                                                                                                                                                                                                      1142: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1143: 0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      1144: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1145: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1146: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1147: 0x0924                           

000522      End Sub                                                                                                                                                                                                                                   1148: 0x0091   Return                  

000523      
000524      Public Function GetFilterMode() As Byte                                                                                                                                                                                                   1149: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000525          'Get High Pass Filter mode, bits 6,7
000526          'High-pass filter mode selection. Default value: 00
000527          'bit 7, 6
000528          '0 0 Normal mode (reset by reading REFERENCE/DATACAPTURE (26h) register)
000529          '0 1 Reference signal for filtering
000530          '1 0 Normal mode
000531          '1 1 Autoreset on interrupt event
000532          Return (read(CTRL_REG2) & HP_FILTER_MODE_MASK)                                                                                                                                                                                        1150: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1151: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1152: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1153: 0x0900                           
                                                                                                                                                                                                                                                      1154: 0x80C0   PushConstU10            192 (0x00C0)
                                                                                                                                                                                                                                                      1155: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1156: 0x0092   ReturnValType           

000533      End Function                                                                                                                                                                                                                              1157: 0x0093   Return0                 

000534      
000535      Public Sub SetFilterBypass(mode As Boolean)                                                                                                                                                                                               1158: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000536          'Set internal filter bypassed, bit3
000537          'Filtered data selection. Default value: 0
000538          '(0: internal filter bypassed; 1: data from internal filter sent to output register and FIFO)
000539          If mode Then                                                                                                                                                                                                                          1159: 0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      1160: 0x3C0D   BranchFalse             1174

000540              write(CTRL_REG2, (read(CTRL_REG2) & ~HP_FILTER_BYPASS_BIT) | HP_FILTER_BYPASS_BIT)                                                                                                                                                1161: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1162: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1163: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1164: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1165: 0x0900                           
                                                                                                                                                                                                                                                      1166: 0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                                                                                                      1167: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1168: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      1169: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1170: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1171: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1172: 0x0924                           

                                                                                                                                                                                                                                                      1173: 0x400A   Branch                  1184
000541          Else                                                                                                                                                                                                                                  

000542              write(CTRL_REG2, (read(CTRL_REG2) & ~HP_FILTER_BYPASS_BIT))                                                                                                                                                                       1174: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1175: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1176: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1177: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1178: 0x0900                           
                                                                                                                                                                                                                                                      1179: 0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                                                                                                      1180: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1181: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1182: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1183: 0x0924                           

000543          End If 
000544      End Sub                                                                                                                                                                                                                                   1184: 0x0091   Return                  

000545      
000546      Public Function GetFilterBypass() As Boolean                                                                                                                                                                                              1185: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000547          'Get internal filter bypassed, bit3
000548          'Filtered data selection. Default value: 0
000549          '(0: internal filter bypassed; 1: data from internal filter sent to output register and FIFO)
000550          Return (read(CTRL_REG2) & HP_FILTER_BYPASS_BIT).ToBoolean()                                                                                                                                                                           1186: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1187: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1188: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1189: 0x0900                           
                                                                                                                                                                                                                                                      1190: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      1191: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1192: 0x0000   Nop                     
                                                                                                                                                                                                                                                      1193: 0x0092   ReturnValType           

000551      End Function                                                                                                                                                                                                                              1194: 0x0093   Return0                 

000552      
000553      Public Sub SetFilterClick(mode As Boolean)                                                                                                                                                                                                1195: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000554          'Set High-pass filter enable for CLICK function. bit 2
000555          '(0: filter bypassed; 1: filter enabled)
000556          If mode Then                                                                                                                                                                                                                          1196: 0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      1197: 0x3C0D   BranchFalse             1211

000557              write(CTRL_REG2, (read(CTRL_REG2) & ~HP_FILTER_CLICK_BIT) | HP_FILTER_CLICK_BIT)                                                                                                                                                  1198: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1199: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1200: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1201: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1202: 0x0900                           
                                                                                                                                                                                                                                                      1203: 0x80FB   PushConstU10            251 (0x00FB)
                                                                                                                                                                                                                                                      1204: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1205: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      1206: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1207: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1208: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1209: 0x0924                           

                                                                                                                                                                                                                                                      1210: 0x400A   Branch                  1221
000558          Else                                                                                                                                                                                                                                  

000559              write(CTRL_REG2, (read(CTRL_REG2) & ~HP_FILTER_CLICK_BIT))                                                                                                                                                                        1211: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1212: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1213: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1214: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1215: 0x0900                           
                                                                                                                                                                                                                                                      1216: 0x80FB   PushConstU10            251 (0x00FB)
                                                                                                                                                                                                                                                      1217: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1218: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1219: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1220: 0x0924                           

000560          End If
000561      End Sub                                                                                                                                                                                                                                   1221: 0x0091   Return                  

000562      
000563      Public Function GetFilterClick() As Boolean                                                                                                                                                                                               1222: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000564          'Get High-pass filter enable for CLICK function. bit 2
000565          '(0: filter bypassed; 1: filter enabled)
000566          Return (read(CTRL_REG2) & HP_FILTER_CLICK_BIT).ToBoolean()                                                                                                                                                                            1223: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1224: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1225: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1226: 0x0900                           
                                                                                                                                                                                                                                                      1227: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      1228: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1229: 0x0000   Nop                     
                                                                                                                                                                                                                                                      1230: 0x0092   ReturnValType           

000567      End Function                                                                                                                                                                                                                              1231: 0x0093   Return0                 

000568      
000569      Public Sub SetFilterAOI1(mode As Boolean)                                                                                                                                                                                                 1232: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000570          'Set High-pass filter enable for AOI function on Interrupt 1 (bit 0)
000571          '(0: filter bypassed; 1: filter enabled)
000572          If mode Then                                                                                                                                                                                                                          1233: 0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      1234: 0x3C0D   BranchFalse             1248

000573              write(CTRL_REG2, (read(CTRL_REG2) & ~HP_INT_AOI1_BIT) | HP_INT_AOI1_BIT)                                                                                                                                                          1235: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1236: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1237: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1238: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1239: 0x0900                           
                                                                                                                                                                                                                                                      1240: 0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                                      1241: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1242: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1243: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1244: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1245: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1246: 0x0924                           

                                                                                                                                                                                                                                                      1247: 0x400A   Branch                  1258
000574          Else                                                                                                                                                                                                                                  

000575              write(CTRL_REG2, (read(CTRL_REG2) & ~HP_INT_AOI1_BIT))                                                                                                                                                                            1248: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1249: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1250: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1251: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1252: 0x0900                           
                                                                                                                                                                                                                                                      1253: 0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                                      1254: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1255: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1256: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1257: 0x0924                           

000576          End If
000577      End Sub                                                                                                                                                                                                                                   1258: 0x0091   Return                  

000578      
000579      Public Function GetFilterAOI1() As Boolean                                                                                                                                                                                                1259: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000580          'Get High-pass filter enable for AOI function on Interrupt 1 (bit 0)
000581          '(0: filter bypassed; 1: filter enabled)
000582          Return (read(CTRL_REG2) & HP_INT_AOI1_BIT).ToBoolean()                                                                                                                                                                                1260: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1261: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1262: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1263: 0x0900                           
                                                                                                                                                                                                                                                      1264: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1265: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1266: 0x0000   Nop                     
                                                                                                                                                                                                                                                      1267: 0x0092   ReturnValType           

000583      End Function                                                                                                                                                                                                                              1268: 0x0093   Return0                 

000584      
000585      Public Sub SetFilterAOI2(mode As Boolean)                                                                                                                                                                                                 1269: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000586          'Set High-pass filter enable for AOI function on Interrupt 2 (bit 1)
000587          '(0: filter bypassed; 1: filter enabled)
000588          If mode Then                                                                                                                                                                                                                          1270: 0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      1271: 0x3C0D   BranchFalse             1285

000589              write(CTRL_REG2, (read(CTRL_REG2) & ~HP_INT_AOI2_BIT) | HP_INT_AOI2_BIT)                                                                                                                                                          1272: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1273: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1274: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1275: 0x5800   JumpSubr                2304
                                                                                                                                                                                                                                                      1276: 0x0900                           
                                                                                                                                                                                                                                                      1277: 0x80FE   PushConstU10            254 (0x00FE)
                                                                                                                                                                                                                                                      1278: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1279: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1280: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1281: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1282: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1283: 0x0924                           

                                                                                                                                                                                                                                                      1284: 0x4009   Branch                  1294
000590          Else                                                                                                                                                                                                                                  

000591              write(CTRL_REG2, (read(CTRL_REG2) & ~HP_INT_AOI2_BIT))                                                                                                                                                                            1285: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1286: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1287: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1288: 0x1FF7   BranchSubr              2304
                                                                                                                                                                                                                                                      1289: 0x80FE   PushConstU10            254 (0x00FE)
                                                                                                                                                                                                                                                      1290: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1291: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1292: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1293: 0x0924                           

000592          End If
000593      End Sub                                                                                                                                                                                                                                   1294: 0x0091   Return                  

000594      
000595      Public Function GetFilterAOI2() As Boolean                                                                                                                                                                                                1295: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000596          'Get High-pass filter enable for AOI function on Interrupt 2 (bit 1)
000597          '(0: filter bypassed; 1: filter enabled)
000598          Return (read(CTRL_REG2) & HP_INT_AOI2_BIT).ToBoolean()                                                                                                                                                                                1296: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1297: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1298: 0x1FED   BranchSubr              2304
                                                                                                                                                                                                                                                      1299: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1300: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1301: 0x0000   Nop                     
                                                                                                                                                                                                                                                      1302: 0x0092   ReturnValType           

000599      End Function                                                                                                                                                                                                                              1303: 0x0093   Return0                 

000600      
000601      Public Sub SetFilterBypassBits(mode As Byte)                                                                                                                                                                                              1304: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000602          'Set High Pass Filter bypass bits 0,1,2,3
000603          'see bits above
000604          write(CTRL_REG2, (read(CTRL_REG2) & ~HP_FILTER_BITS_MASK) | mode)                                                                                                                                                                     1305: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1306: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1307: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1308: 0x1FE3   BranchSubr              2304
                                                                                                                                                                                                                                                      1309: 0x80F0   PushConstU10            240 (0x00F0)
                                                                                                                                                                                                                                                      1310: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1311: 0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      1312: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1313: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1314: 0x5800   JumpSubr                2340
                                                                                                                                                                                                                                                      1315: 0x0924                           

000605      End Sub                                                                                                                                                                                                                                   1316: 0x0091   Return                  

000606      
000607      Public Function GetFilterBypassBits() As Byte                                                                                                                                                                                             1317: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000608          'Get High Pass Filter mode, bits 6,7
000609          'High-pass filter mode selection. Default value: 00
000610          'see bits above
000611          Return (read(CTRL_REG2) & HP_FILTER_BITS_MASK)                                                                                                                                                                                        1318: 0x8021   PushConstU10            33 (0x0021)
                                                                                                                                                                                                                                                      1319: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1320: 0x1FD7   BranchSubr              2304
                                                                                                                                                                                                                                                      1321: 0x800F   PushConstU10            15 (0x000F)
                                                                                                                                                                                                                                                      1322: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1323: 0x0092   ReturnValType           

000612      End Function                                                                                                                                                                                                                              1324: 0x0093   Return0                 

000613      
000614      Public Sub SetInterruptEnable1Bits(mode As Byte)                                                                                                                                                                                          1325: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000615          'Set Interrupt 1 Enable bits  bits 1,2,3,4,5,6,7 (bit 0 not used)
000616          '(0: disable; 1: enable)
000617          'I1_CLICK CLICK interrupt on INT1 pin. Default value 0. bit 7
000618          'I1_AOI1 AOI1 interrupt on INT1 pin. Default value 0. bit 6
000619          'I1_AOI2 AOI2 interrupt on INT1 pin. Default value 0. bit 5
000620          'I1_DRDY1 DRDY1 interrupt on INT1 pin. Default value 0. bit 4
000621          'I1_DRDY2 DRDY2 interrupt on INT1 pin. Default value 0. bit 3
000622          'I1_WTM FIFO watermark interrupt on INT1 pin. Default value 0. bit 2
000623          'I1_OVERRUN FIFO overrun interrupt on INT1 pin. Default value 0. bit 1
000624          write(CTRL_REG3, (read(CTRL_REG3) & ~INT1_ENABLE_MASK) | mode)                                                                                                                                                                        1326: 0x8022   PushConstU10            34 (0x0022)
                                                                                                                                                                                                                                                      1327: 0x8022   PushConstU10            34 (0x0022)
                                                                                                                                                                                                                                                      1328: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1329: 0x1FCE   BranchSubr              2304
                                                                                                                                                                                                                                                      1330: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1331: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1332: 0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      1333: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1334: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1335: 0x1FEC   BranchSubr              2340

000625      End Sub                                                                                                                                                                                                                                   1336: 0x0091   Return                  

000626      
000627      Public Function GetInterruptEnable1Bits() As Byte                                                                                                                                                                                         1337: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000628          'Get Interrupt 1 Enable bits  bits 1,2,3,4,5,6,7
000629          'High-pass filter mode selection. Default value: 00
000630          Return (read(CTRL_REG3) & INT1_ENABLE_MASK)                                                                                                                                                                                           1338: 0x8022   PushConstU10            34 (0x0022)
                                                                                                                                                                                                                                                      1339: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1340: 0x1FC3   BranchSubr              2304
                                                                                                                                                                                                                                                      1341: 0x80FE   PushConstU10            254 (0x00FE)
                                                                                                                                                                                                                                                      1342: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1343: 0x0092   ReturnValType           

000631      End Function                                                                                                                                                                                                                              1344: 0x0093   Return0                 

000632      
000633      Public Sub SetCTL5Bits(mode As Byte)                                                                                                                                                                                                      1345: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000634          'Set latching Enable bits  bits 0,1,2,3,6,7 (bits 4,5 not used)
000635          '(0: disable; 1: enable)
000636          'BOOT Reboot memory content. Default value: 0   bit 7
000637          '(0: normal mode; 1: reboot memory content)
000638          'FIFO_EN FIFO enable. Default value: 0 bit 6
000639          'LIR_INT1 Latch interrupt request on INT1_SRC (31h), with INT1_SRC (31h) register cleared
000640          'by reading INT1_SRC (31h) itself. Default value: 0. bit 3
000641          '(0: interrupt request not latched; 1: interrupt request latched)
000642          'D4D_INT1 4D enable: 4D detection is enabled on INT1 pin when 6D bit on INT1_CFG (30h) is
000643          'set to 1. bit 2
000644          'LIR_INT2 Latch interrupt request on INT2_SRC (35h) register, with INT2_SRC (35h) register
000645          'cleared by reading INT2_SRC (35h) itself. Default value: 0.
000646          '(0: interrupt request not latched; 1: interrupt request latched) bit 1
000647          'D4D_INT2 4D enable: 4D detection is enabled on INT2 pin when 6D bit on INT2_CFG (34h) is
000648          'set to 1. bit 0
000649          write(CTRL_REG5, (read(CTRL_REG5) & ~CTL5_MASK) | mode)                                                                                                                                                                               1346: 0x8024   PushConstU10            36 (0x0024)
                                                                                                                                                                                                                                                      1347: 0x8024   PushConstU10            36 (0x0024)
                                                                                                                                                                                                                                                      1348: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1349: 0x1FBA   BranchSubr              2304
                                                                                                                                                                                                                                                      1350: 0x8030   PushConstU10            48 (0x0030)
                                                                                                                                                                                                                                                      1351: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1352: 0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      1353: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1354: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1355: 0x1FD8   BranchSubr              2340

000650      End Sub                                                                                                                                                                                                                                   1356: 0x0091   Return                  

000651      
000652      Public Function GetCTL5Bits() As Byte                                                                                                                                                                                                     1357: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000653          'Get latching Enable bits  bits 1,2,3,4,5,6,7
000654          'see above
000655          Return (read(CTRL_REG5) & CTL5_MASK)                                                                                                                                                                                                  1358: 0x8024   PushConstU10            36 (0x0024)
                                                                                                                                                                                                                                                      1359: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1360: 0x1FAF   BranchSubr              2304
                                                                                                                                                                                                                                                      1361: 0x80CF   PushConstU10            207 (0x00CF)
                                                                                                                                                                                                                                                      1362: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1363: 0x0092   ReturnValType           

000656      End Function                                                                                                                                                                                                                              1364: 0x0093   Return0                 

000657      
000658      Public Sub SetCTL6Bits(mode As Byte)                                                                                                                                                                                                      1365: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000659          'Set Interrupt 2 Enable bits  bits 1,3,4,5,6,7 (bits 0,2 not used)
000660          '(0: disabled; 1: enabled)
000661          'I2_CLICKen Click interrupt on INT2 pin. Default value: 0 bit 7
000662          'I2_INT1 Interrupt 1 function enable on INT2 pin. Default value: 0 bit 6
000663          'I2_INT2 Interrupt 2 function enable on INT2 pin. Default value: 0 bit 5
000664          'BOOT_I2 Boot on INT2 pin enable. Default value: 0 bit 4
000665          'P2_ACT Activity interrupt enable on INT2 pin. Default value: 0. bit 3
000666          'H_LACTIVE interrupt active. Default value: 0. bit 1
000667          '(0: interrupt active-high; 1: interrupt active-low)
000668          write(CTRL_REG6, (read(CTRL_REG6) & ~CTL6_MASK) | mode)                                                                                                                                                                               1366: 0x8025   PushConstU10            37 (0x0025)
                                                                                                                                                                                                                                                      1367: 0x8025   PushConstU10            37 (0x0025)
                                                                                                                                                                                                                                                      1368: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1369: 0x1FA6   BranchSubr              2304
                                                                                                                                                                                                                                                      1370: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                                      1371: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1372: 0x8800   PushLocalI32            mode
                                                                                                                                                                                                                                                      1373: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1374: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1375: 0x1FC4   BranchSubr              2340

000669      End Sub                                                                                                                                                                                                                                   1376: 0x0091   Return                  

000670      
000671      Public Function GetCTL6Bits() As Byte                                                                                                                                                                                                     1377: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000672          'Get Interrupt 2 Enable bits  bits 1,3,4,5,6,7 (bits 0,2 not used)
000673          'see above
000674          Return (read(CTRL_REG6) & CTL6_MASK)                                                                                                                                                                                                  1378: 0x8025   PushConstU10            37 (0x0025)
                                                                                                                                                                                                                                                      1379: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1380: 0x1F9B   BranchSubr              2304
                                                                                                                                                                                                                                                      1381: 0x80FA   PushConstU10            250 (0x00FA)
                                                                                                                                                                                                                                                      1382: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1383: 0x0092   ReturnValType           

000675      End Function                                                                                                                                                                                                                              1384: 0x0093   Return0                 

000676      
000677      Public Sub SetINT1Threshold(threshold As Float)                                                                                                                                                                                           1385: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      1386: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000678          'A 7-bit unsigned number, with g/LSB. dependant on range setting
000679          '1 LSb = 16 mg @ FS = 2 g
000680          '1 LSb = 32 mg @ FS = 4 g
000681          '1 LSb = 62 mg @ FS = 8 g
000682          '1 LSb = 186 mg @ FS = 16 g
000683          Dim thresholdByte As Byte = 0
000684          If threshold <= 2.0 Then                                                                                                                                                                                                              1387: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1388: 0xE91E   PushConstBit            1<<30  (0x40000000 Or 1073741824)
                                                                                                                                                                                                                                                      1389: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1390: 0x300C   BranchGT                1403

000685              SetScale(SCALE_2G)                                                                                                                                                                                                                1391: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1392: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1393: 0x554C   BranchSubrBack          1062

000686              thresholdByte = map_range(threshold, 0, 2.0, 0, 0x7f)                                                                                                                                                                             1394: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1395: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1396: 0xE91E   PushConstBit            1<<30  (0x40000000 Or 1073741824)
                                                                                                                                                                                                                                                      1397: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1398: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1399: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1400: 0x5748   BranchSubrBack          561
                                                                                                                                                                                                                                                      1401: 0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      1402: 0x402F   Branch                  1450
000687          ElseIf threshold <= 4.0 Then                                                                                                                                                                                                          1403: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1404: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                                      1405: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1406: 0x300C   BranchGT                1419

000688              SetScale(SCALE_4G)                                                                                                                                                                                                                1407: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1408: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1409: 0x555C   BranchSubrBack          1062

000689              thresholdByte = map_range(threshold, 0, 4.0, 0, 0x7f)                                                                                                                                                                             1410: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1411: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1412: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                                      1413: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1414: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1415: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1416: 0x5758   BranchSubrBack          561
                                                                                                                                                                                                                                                      1417: 0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      1418: 0x401F   Branch                  1450
000690          ElseIf threshold <= 8.0 Then                                                                                                                                                                                                          1419: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1420: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                                      1421: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1422: 0x300C   BranchGT                1435

000691              SetScale(SCALE_8G)                                                                                                                                                                                                                1423: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      1424: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1425: 0x556C   BranchSubrBack          1062

000692              thresholdByte = map_range(threshold, 0, 8.0, 0, 0x7f)                                                                                                                                                                             1426: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1427: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1428: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                                      1429: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1430: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1431: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1432: 0x5768   BranchSubrBack          561
                                                                                                                                                                                                                                                      1433: 0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      1434: 0x400F   Branch                  1450
000693          ElseIf threshold <= 16.0 Then                                                                                                                                                                                                         1435: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1436: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      1437: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1438: 0x300B   BranchGT                1450

000694              SetScale(SCALE_16G)                                                                                                                                                                                                               1439: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      1440: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1441: 0x557C   BranchSubrBack          1062

000695              thresholdByte = map_range(threshold, 0, 16.0, 0, 0x7f)                                                                                                                                                                            1442: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1443: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1444: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      1445: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1446: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1447: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1448: 0x5778   BranchSubrBack          561
                                                                                                                                                                                                                                                      1449: 0x9001   PopLocalI32             thresholdByte

000696          End If
000697          If thresholdByte <= 0x7f Then                                                                                                                                                                                                         1450: 0x8801   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                                      1451: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1452: 0x3004   BranchGT                1457

000698              write(INT1_THS, thresholdByte)                                                                                                                                                                                                    1453: 0x8032   PushConstU10            50 (0x0032)
                                                                                                                                                                                                                                                      1454: 0x8801   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                                      1455: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1456: 0x1F73   BranchSubr              2340

000699          End If
000700      End Sub                                                                                                                                                                                                                                   1457: 0x0091   Return                  

000701      
000702      Public Sub SetINT2Threshold(threshold As Float)                                                                                                                                                                                           1458: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      1459: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000703          'A 7-bit unsigned number, with g/LSB. dependant on range setting
000704          '1 LSb = 16 mg @ FS = 2 g
000705          '1 LSb = 32 mg @ FS = 4 g
000706          '1 LSb = 62 mg @ FS = 8 g
000707          '1 LSb = 186 mg @ FS = 16 g
000708          Dim thresholdByte As Byte = 0
000709          If threshold <= 2.0 Then                                                                                                                                                                                                              1460: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1461: 0xE91E   PushConstBit            1<<30  (0x40000000 Or 1073741824)
                                                                                                                                                                                                                                                      1462: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1463: 0x300C   BranchGT                1476

000710              SetScale(SCALE_2G)                                                                                                                                                                                                                1464: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1465: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1466: 0x5595   BranchSubrBack          1062

000711              thresholdByte = map_range(threshold, 0, 2.0, 0, 0x7f)                                                                                                                                                                             1467: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1468: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1469: 0xE91E   PushConstBit            1<<30  (0x40000000 Or 1073741824)
                                                                                                                                                                                                                                                      1470: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1471: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1472: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1473: 0x5791   BranchSubrBack          561
                                                                                                                                                                                                                                                      1474: 0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      1475: 0x402F   Branch                  1523
000712          ElseIf threshold <= 4.0 Then                                                                                                                                                                                                          1476: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1477: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                                      1478: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1479: 0x300C   BranchGT                1492

000713              SetScale(SCALE_4G)                                                                                                                                                                                                                1480: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1481: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1482: 0x55A5   BranchSubrBack          1062

000714              thresholdByte = map_range(threshold, 0, 4.0, 0, 0x7f)                                                                                                                                                                             1483: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1484: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1485: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                                      1486: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1487: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1488: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1489: 0x57A1   BranchSubrBack          561
                                                                                                                                                                                                                                                      1490: 0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      1491: 0x401F   Branch                  1523
000715          ElseIf threshold <= 8.0 Then                                                                                                                                                                                                          1492: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1493: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                                      1494: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1495: 0x300C   BranchGT                1508

000716              SetScale(SCALE_8G)                                                                                                                                                                                                                1496: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      1497: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1498: 0x55B5   BranchSubrBack          1062

000717              thresholdByte = map_range(threshold, 0, 8.0, 0, 0x7f)                                                                                                                                                                             1499: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1500: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1501: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                                      1502: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1503: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1504: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1505: 0x57B1   BranchSubrBack          561
                                                                                                                                                                                                                                                      1506: 0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      1507: 0x400F   Branch                  1523
000718          ElseIf threshold <= 16.0 Then                                                                                                                                                                                                         1508: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1509: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      1510: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1511: 0x300B   BranchGT                1523

000719              SetScale(SCALE_16G)                                                                                                                                                                                                               1512: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      1513: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1514: 0x55C5   BranchSubrBack          1062

000720              thresholdByte = map_range(threshold, 0, 16.0, 0, 0x7f)                                                                                                                                                                            1515: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1516: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1517: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      1518: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1519: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1520: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1521: 0x57C1   BranchSubrBack          561
                                                                                                                                                                                                                                                      1522: 0x9001   PopLocalI32             thresholdByte

000721          End If
000722          If thresholdByte <= 0x7f Then                                                                                                                                                                                                         1523: 0x8801   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                                      1524: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1525: 0x3004   BranchGT                1530

000723              write(INT2_THS, thresholdByte)                                                                                                                                                                                                    1526: 0x8036   PushConstU10            54 (0x0036)
                                                                                                                                                                                                                                                      1527: 0x8801   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                                      1528: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1529: 0x1F2A   BranchSubr              2340

000724          End If
000725      End Sub                                                                                                                                                                                                                                   1530: 0x0091   Return                  

000726      
000727      Public Sub SetINT1Duration(duration As Float)                                                                                                                                                                                             1531: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      1532: 0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000728          'A 7-bit unsigned number, with duration dependant on data rate
000729          'Duration value. Default value: 000 0000
000730          '1 LSb = 1/ODR
000731          'Set Duration in ms (if set to 0, causes interrupt immediately, once threshold exceeded)
000732          'The duration in ms depends on the frequency, ie 50 Hz = 20ms per count, so 100ms = 5 counts
000733          Dim msPerCount As Float = GetmsFromDataRate()                                                                                                                                                                                         1533: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1534: 0x562F   BranchSubrBack          976
                                                                                                                                                                                                                                                      1535: 0x9001   PopLocalI32             msPerCount

000734          Dim count As Byte = (duration / msPerCount).ToByte                                                                                                                                                                                    1536: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                                      1537: 0x8801   PushLocalI32            msPerCount
                                                                                                                                                                                                                                                      1538: 0x003B   FltDiv                  
                                                                                                                                                                                                                                                      1539: 0x007B   CvtFltToInt             
                                                                                                                                                                                                                                                      1540: 0x007D   CvtIntToByt             
                                                                                                                                                                                                                                                      1541: 0x9002   PopLocalI32             count

000735          If count > 0x7f Then                                                                                                                                                                                                                  1542: 0x8802   PushLocalI32            count
                                                                                                                                                                                                                                                      1543: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1544: 0x2C02   BranchLE                1547

000736              'need to reduce frequency
000737              count = 0x7f                                                                                                                                                                                                                      1545: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1546: 0x9002   PopLocalI32             count

000738          End If
000739          write(INT1_DURATION, count)                                                                                                                                                                                                           1547: 0x8033   PushConstU10            51 (0x0033)
                                                                                                                                                                                                                                                      1548: 0x8802   PushLocalI32            count
                                                                                                                                                                                                                                                      1549: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1550: 0x1F15   BranchSubr              2340

000740      End Sub                                                                                                                                                                                                                                   1551: 0x0091   Return                  

000741      
000742      Public Sub SetINT2Duration(duration As Float)                                                                                                                                                                                             1552: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      1553: 0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000743          'A 7-bit unsigned number, with duration dependant on data rate
000744          'Duration value. Default value: 000 0000
000745          '1 LSb = 1/ODR
000746          'Set Duration in ms (if set to 0, causes interrupt immediately, once threshold exceeded)
000747          'The duration in ms depends on the frequency, ie 50 Hz = 20ms per count, so 100ms = 5 counts
000748          Dim msPerCount As Float = GetmsFromDataRate()                                                                                                                                                                                         1554: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1555: 0x5644   BranchSubrBack          976
                                                                                                                                                                                                                                                      1556: 0x9001   PopLocalI32             msPerCount

000749          Dim count As Byte = (duration / msPerCount).ToByte                                                                                                                                                                                    1557: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                                      1558: 0x8801   PushLocalI32            msPerCount
                                                                                                                                                                                                                                                      1559: 0x003B   FltDiv                  
                                                                                                                                                                                                                                                      1560: 0x007B   CvtFltToInt             
                                                                                                                                                                                                                                                      1561: 0x007D   CvtIntToByt             
                                                                                                                                                                                                                                                      1562: 0x9002   PopLocalI32             count

000750          If count > 0x7f Then                                                                                                                                                                                                                  1563: 0x8802   PushLocalI32            count
                                                                                                                                                                                                                                                      1564: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1565: 0x2C02   BranchLE                1568

000751              'need to reduce frequency
000752              count = 0x7f                                                                                                                                                                                                                      1566: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1567: 0x9002   PopLocalI32             count

000753          End If
000754          write(INT2_DURATION, count)                                                                                                                                                                                                           1568: 0x8037   PushConstU10            55 (0x0037)
                                                                                                                                                                                                                                                      1569: 0x8802   PushLocalI32            count
                                                                                                                                                                                                                                                      1570: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1571: 0x1F00   BranchSubr              2340

000755      End Sub                                                                                                                                                                                                                                   1572: 0x0091   Return                  

000756      
000757      Public Sub SetINT1ActiveInterrupt(interrupt As Byte)                                                                                                                                                                                      1573: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000758          'AOI And/Or combination of interrupt events. Default value: 0. Refer to Table 51 bit 7
000759          '6D 6-direction detection function enabled. Default value: 0. Refer to Table 51 bit 6
000760          'AOI 6D Interrupt mode
000761          ' 0  0 OR combination of interrupt events
000762          ' 0  1 6-direction movement recognition
000763          ' 1  0 AND combination of interrupt events
000764          ' 1  1 6-direction position recognition
000765          'Default value: 0 (0: disable interrupt request;1: enable interrupt request) 
000766          'ZHIE/ZUPE Enable interrupt generation on Z high event or on direction recognition. bit 5
000767          'ZLIE/ZDOWNE Enable interrupt generation on Z low event or on direction recognition. bit 4
000768          'YHIE/YUPE Enable interrupt generation on Y high event or on direction recognition. bit 3
000769          'YLIE/YDOWNE Enable interrupt generation on Y low event or on direction recognition. bit 2
000770          'XHIE/XUPE Enable interrupt generation on X high event or on direction recognition. bit 1
000771          'XLIE/XDOWNE Enable interrupt generation on X low event or on direction recognition. bit 0
000772          write(INT1_CFG, interrupt)                                                                                                                                                                                                            1574: 0x8030   PushConstU10            48 (0x0030)
                                                                                                                                                                                                                                                      1575: 0x8800   PushLocalI32            interrupt
                                                                                                                                                                                                                                                      1576: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1577: 0x1EFA   BranchSubr              2340

000773      End Sub                                                                                                                                                                                                                                   1578: 0x0091   Return                  

000774      
000775      Public Function GetINT1ActiveInterrupt() As Byte                                                                                                                                                                                          1579: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000776          'bit 7 not used
000777          'IA Interrupt active. Default value: 0 bit 6
000778          '(0: no interrupt has been generated; 1: one or more interrupts have been generated)
000779          'ZH Z high. Default value: 0 bit 5
000780          '(0: no interrupt, 1: Z high event has occurred)
000781          'ZL Z low. Default value: 0 bit 4
000782          '(0: no interrupt; 1: Z low event has occurred)
000783          'YH Y high. Default value: 0 bit 3
000784          '(0: no interrupt, 1: Y high event has occurred)
000785          'YL Y low. Default value: 0 bit 2
000786          '(0: no interrupt, 1: Y low event has occurred)
000787          'XH X high. Default value: 0 bit 1
000788          '(0: no interrupt, 1: X high event has occurred)
000789          'XL X low. Default value: 0 bit 0
000790          '(0: no interrupt, 1: X low event has occurred)
000791          Return read(INT1_SRC)                                                                                                                                                                                                                 1580: 0x8031   PushConstU10            49 (0x0031)
                                                                                                                                                                                                                                                      1581: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1582: 0x1ED1   BranchSubr              2304
                                                                                                                                                                                                                                                      1583: 0x0092   ReturnValType           

000792      End Function                                                                                                                                                                                                                              1584: 0x0093   Return0                 

000793      
000794      Public Sub SetINT2ActiveInterrupt(interrupt As Byte)                                                                                                                                                                                      1585: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000795          'AOI And/Or combination of interrupt events. Default value: 0. Refer to Table 51 bit 7
000796          '6D 6-direction detection function enabled. Default value: 0. Refer to Table 51 bit 6
000797          'AOI 6D Interrupt mode
000798          ' 0  0 OR combination of interrupt events
000799          ' 0  1 6-direction movement recognition
000800          ' 1  0 AND combination of interrupt events
000801          ' 1  1 6-direction position recognition
000802          'Default value: 0 (0: disable interrupt request;1: enable interrupt request) 
000803          'ZHIE/ZUPE Enable interrupt generation on Z high event or on direction recognition. bit 5
000804          'ZLIE/ZDOWNE Enable interrupt generation on Z low event or on direction recognition. bit 4
000805          'YHIE/YUPE Enable interrupt generation on Y high event or on direction recognition. bit 3
000806          'YLIE/YDOWNE Enable interrupt generation on Y low event or on direction recognition. bit 2
000807          'XHIE/XUPE Enable interrupt generation on X high event or on direction recognition. bit 1
000808          'XLIE/XDOWNE Enable interrupt generation on X low event or on direction recognition. bit 0
000809          write(INT2_CFG, interrupt)                                                                                                                                                                                                            1586: 0x8034   PushConstU10            52 (0x0034)
                                                                                                                                                                                                                                                      1587: 0x8800   PushLocalI32            interrupt
                                                                                                                                                                                                                                                      1588: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1589: 0x1EEE   BranchSubr              2340

000810      End Sub                                                                                                                                                                                                                                   1590: 0x0091   Return                  

000811      
000812      Public Function GetINT2ActiveInterrupt() As Byte                                                                                                                                                                                          1591: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000813          'bit 7 not used
000814          'IA Interrupt active. Default value: 0 bit 6
000815          '(0: no interrupt has been generated; 1: one or more interrupts have been generated)
000816          'ZH Z high. Default value: 0 bit 5
000817          '(0: no interrupt, 1: Z high event has occurred)
000818          'ZL Z low. Default value: 0 bit 4
000819          '(0: no interrupt; 1: Z low event has occurred)
000820          'YH Y high. Default value: 0 bit 3
000821          '(0: no interrupt, 1: Y high event has occurred)
000822          'YL Y low. Default value: 0 bit 2
000823          '(0: no interrupt, 1: Y low event has occurred)
000824          'XH X high. Default value: 0 bit 1
000825          '(0: no interrupt, 1: X high event has occurred)
000826          'XL X low. Default value: 0 bit 0
000827          '(0: no interrupt, 1: X low event has occurred)
000828          Return read(INT2_SRC)                                                                                                                                                                                                                 1592: 0x8035   PushConstU10            53 (0x0035)
                                                                                                                                                                                                                                                      1593: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1594: 0x1EC5   BranchSubr              2304
                                                                                                                                                                                                                                                      1595: 0x0092   ReturnValType           

000829      End Function                                                                                                                                                                                                                              1596: 0x0093   Return0                 

000830      
000831      Public Function GetRefDataCap() As Byte                                                                                                                                                                                                   1597: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000832          'Reference value for interrupt generation. Default value: 0
000833          Return read(REF_DATA_CAP)                                                                                                                                                                                                             1598: 0x8026   PushConstU10            38 (0x0026)
                                                                                                                                                                                                                                                      1599: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1600: 0x1EBF   BranchSubr              2304
                                                                                                                                                                                                                                                      1601: 0x0092   ReturnValType           

000834      End Function                                                                                                                                                                                                                              1602: 0x0093   Return0                 

000835      
000836      Public Sub SetClickConfig(config As Byte)                                                                                                                                                                                                 1603: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000837          'bits 0,1,2,3,4,5
000838          'ZD Enable interrupt double-click on Z-axis. Default value: 0
000839          '(0: disable interrupt request; 1: enable interrupt request on measured accel. value
000840          'higher than preset threshold)
000841          'ZS Enable interrupt single-click on Z-axis. Default value: 0
000842          'YD Enable interrupt double-click on Y-axis. Default value: 0
000843          'YS Enable interrupt single-click on Y-axis. Default value: 0
000844          'XD Enable interrupt double-click on X-axis. Default value: 0
000845          'XS Enable interrupt single-click on X-axis. Default value: 0
000846          write(CLICK_CFG, config)                                                                                                                                                                                                              1604: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                                      1605: 0x8800   PushLocalI32            config
                                                                                                                                                                                                                                                      1606: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1607: 0x1EDC   BranchSubr              2340

000847      End Sub                                                                                                                                                                                                                                   1608: 0x0091   Return                  

000848      
000849      Public Function GetClickConfig() As Byte                                                                                                                                                                                                  1609: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000850          'ZD Enable interrupt double-click on Z-axis. Default value: 0
000851          '(0: disable interrupt request; 1: enable interrupt request on measured accel. value
000852          'higher than preset threshold)
000853          'ZS Enable interrupt single-click on Z-axis. Default value: 0
000854          'YD Enable interrupt double-click on Y-axis. Default value: 0
000855          'YS Enable interrupt single-click on Y-axis. Default value: 0
000856          'XD Enable interrupt double-click on X-axis. Default value: 0
000857          'XS Enable interrupt single-click on X-axis. Default value: 0
000858          Return read(CLICK_CFG)                                                                                                                                                                                                                1610: 0x8038   PushConstU10            56 (0x0038)
                                                                                                                                                                                                                                                      1611: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1612: 0x1EB3   BranchSubr              2304
                                                                                                                                                                                                                                                      1613: 0x0092   ReturnValType           

000859      End Function                                                                                                                                                                                                                              1614: 0x0093   Return0                 

000860      
000861      Public Function GetClickSource() As Byte                                                                                                                                                                                                  1615: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000862          'IA Interrupt active. Default value: 0 bit 6
000863          '(0: no interrupt has been generated; 1: one or more interrupts have been generated)
000864          'DClick Double-click enable. Default value: 0 (0: double-click detection disabled,
000865          '1: double-click detection enabled) bit 5
000866          'SClick Single-click enable. Default value: 0 (0: single-click detection disabled, 1: single-click
000867          'detection enabled) bit 4
000868          'Sign Click sign. 0: positive detection, 1: negative detection bit 3
000869          'Z Z click detection. Default value: 0 bit 2
000870          '(0: no interrupt, 1: Z high event has occurred)
000871          'Y Y click detection. Default value: 0 bit 1
000872          'X X click detection. Default value: 0 bit 0
000873          Return read(CLICK_SRC)                                                                                                                                                                                                                1616: 0x8039   PushConstU10            57 (0x0039)
                                                                                                                                                                                                                                                      1617: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1618: 0x1EAD   BranchSubr              2304
                                                                                                                                                                                                                                                      1619: 0x0092   ReturnValType           

000874      End Function                                                                                                                                                                                                                              1620: 0x0093   Return0                 

000875      
000876      Public Sub SetClickThreshold(threshold As Float)                                                                                                                                                                                          1621: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      1622: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000877          'A 7-bit unsigned number, with g/LSB. dependant on range setting
000878          '1 LSb = 16 mg @ FS = 2 g
000879          '1 LSb = 32 mg @ FS = 4 g
000880          '1 LSb = 62 mg @ FS = 8 g
000881          '1 LSb = 186 mg @ FS = 16 g
000882          Dim thresholdByte As Byte = 0
000883          If threshold <= 2.0 Then                                                                                                                                                                                                              1623: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1624: 0xE91E   PushConstBit            1<<30  (0x40000000 Or 1073741824)
                                                                                                                                                                                                                                                      1625: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1626: 0x300D   BranchGT                1640

000884              SetScale(SCALE_2G)                                                                                                                                                                                                                1627: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1628: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1629: 0x5638   BranchSubrBack          1062

000885              thresholdByte = map_range(threshold, 0, 2.0, 0, 0x7f)                                                                                                                                                                             1630: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1631: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1632: 0xE91E   PushConstBit            1<<30  (0x40000000 Or 1073741824)
                                                                                                                                                                                                                                                      1633: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1634: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1635: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1636: 0x5800   JumpSubr                561
                                                                                                                                                                                                                                                      1637: 0x0231                           
                                                                                                                                                                                                                                                      1638: 0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      1639: 0x4032   Branch                  1690
000886          ElseIf threshold <= 4.0 Then                                                                                                                                                                                                          1640: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1641: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                                      1642: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1643: 0x300D   BranchGT                1657

000887              SetScale(SCALE_4G)                                                                                                                                                                                                                1644: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1645: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1646: 0x5649   BranchSubrBack          1062

000888              thresholdByte = map_range(threshold, 0, 4.0, 0, 0x7f)                                                                                                                                                                             1647: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1648: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1649: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                                      1650: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1651: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1652: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1653: 0x5800   JumpSubr                561
                                                                                                                                                                                                                                                      1654: 0x0231                           
                                                                                                                                                                                                                                                      1655: 0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      1656: 0x4021   Branch                  1690
000889          ElseIf threshold <= 8.0 Then                                                                                                                                                                                                          1657: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1658: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                                      1659: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1660: 0x300D   BranchGT                1674

000890              SetScale(SCALE_8G)                                                                                                                                                                                                                1661: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      1662: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1663: 0x565A   BranchSubrBack          1062

000891              thresholdByte = map_range(threshold, 0, 8.0, 0, 0x7f)                                                                                                                                                                             1664: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1665: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1666: 0xEA08   PushConstFlt            8.0
                                                                                                                                                                                                                                                      1667: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1668: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1669: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1670: 0x5800   JumpSubr                561
                                                                                                                                                                                                                                                      1671: 0x0231                           
                                                                                                                                                                                                                                                      1672: 0x9001   PopLocalI32             thresholdByte

                                                                                                                                                                                                                                                      1673: 0x4010   Branch                  1690
000892          ElseIf threshold <= 16.0 Then                                                                                                                                                                                                         1674: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1675: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      1676: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1677: 0x300C   BranchGT                1690

000893              SetScale(SCALE_16G)                                                                                                                                                                                                               1678: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      1679: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1680: 0x566B   BranchSubrBack          1062

000894              thresholdByte = map_range(threshold, 0, 16.0, 0, 0x7f)                                                                                                                                                                            1681: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1682: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1683: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      1684: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1685: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1686: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1687: 0x5800   JumpSubr                561
                                                                                                                                                                                                                                                      1688: 0x0231                           
                                                                                                                                                                                                                                                      1689: 0x9001   PopLocalI32             thresholdByte

000895          End If
000896          If thresholdByte <= 0x7f Then                                                                                                                                                                                                         1690: 0x8801   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                                      1691: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1692: 0x3004   BranchGT                1697

000897              write(CLICK_THS, thresholdByte)                                                                                                                                                                                                   1693: 0x803A   PushConstU10            58 (0x003A)
                                                                                                                                                                                                                                                      1694: 0x8801   PushLocalI32            thresholdByte
                                                                                                                                                                                                                                                      1695: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1696: 0x1E83   BranchSubr              2340

000898          End If
000899      End Sub                                                                                                                                                                                                                                   1697: 0x0091   Return                  

000900      
000901      Public Sub SetClickDuration(duration As Float)                                                                                                                                                                                            1698: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      1699: 0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000902          'A 7-bit unsigned number, with duration dependant on data rate
000903          'Duration value. Default value: 000 0000
000904          '1 LSb = 1/ODR
000905          'Set Duration in ms (if set to 0, causes interrupt immediately, once threshold exceeded)
000906          'The duration in ms depends on the frequency, ie 50 Hz = 20ms per count, so 100ms = 5 counts
000907          Dim msPerCount As Float = GetmsFromDataRate()                                                                                                                                                                                         1700: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1701: 0x56D6   BranchSubrBack          976
                                                                                                                                                                                                                                                      1702: 0x9001   PopLocalI32             msPerCount

000908          Dim count As Byte = (duration / msPerCount).ToByte                                                                                                                                                                                    1703: 0x8800   PushLocalI32            duration
                                                                                                                                                                                                                                                      1704: 0x8801   PushLocalI32            msPerCount
                                                                                                                                                                                                                                                      1705: 0x003B   FltDiv                  
                                                                                                                                                                                                                                                      1706: 0x007B   CvtFltToInt             
                                                                                                                                                                                                                                                      1707: 0x007D   CvtIntToByt             
                                                                                                                                                                                                                                                      1708: 0x9002   PopLocalI32             count

000909          If count > 0x7f Then                                                                                                                                                                                                                  1709: 0x8802   PushLocalI32            count
                                                                                                                                                                                                                                                      1710: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1711: 0x2C02   BranchLE                1714

000910              'need to reduce frequency
000911              count = 0x7f                                                                                                                                                                                                                      1712: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                                                                                                      1713: 0x9002   PopLocalI32             count

000912          End If
000913          write(TIME_LIMIT, count)                                                                                                                                                                                                              1714: 0x803B   PushConstU10            59 (0x003B)
                                                                                                                                                                                                                                                      1715: 0x8802   PushLocalI32            count
                                                                                                                                                                                                                                                      1716: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1717: 0x1E6E   BranchSubr              2340

000914      End Sub                                                                                                                                                                                                                                   1718: 0x0091   Return                  

000915      
000916      Public Sub SetClickLatency(latency As Byte)                                                                                                                                                                                               1719: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000917          'An 8-bit unsigned number
000918          write(TIME_LATENCY, latency)                                                                                                                                                                                                          1720: 0x803C   PushConstU10            60 (0x003C)
                                                                                                                                                                                                                                                      1721: 0x8800   PushLocalI32            latency
                                                                                                                                                                                                                                                      1722: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1723: 0x1E68   BranchSubr              2340

000919      End Sub                                                                                                                                                                                                                                   1724: 0x0091   Return                  

000920      
000921      Public Sub SetClickTimeWindow(window As Byte)                                                                                                                                                                                             1725: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000922          'An 8-bit unsigned number
000923          write(TIME_WINDOW, window)                                                                                                                                                                                                            1726: 0x803D   PushConstU10            61 (0x003D)
                                                                                                                                                                                                                                                      1727: 0x8800   PushLocalI32            window
                                                                                                                                                                                                                                                      1728: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1729: 0x1E62   BranchSubr              2340

000924      End Sub                                                                                                                                                                                                                                   1730: 0x0091   Return                  

000925      
000926      Public Function readAccelData() As ListOfShort                                                                                                                                                                                            1731: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                                      1732: 0xE002   AllocateStackSpace      ValTypeSize=0, RefTypeSize=2

000927          Dim rawData As ListOfByte = New ListOfByte // x/y/z accel register data stored here                                                                                                                                                   1733: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                                      1734: 0x0010   ClassNew                
                                                                                                                                                                                                                                                      1735: 0x9400   PopLocalRef             rawData

000928          Dim destination As ListOfShort = New ListOfShort                                                                                                                                                                                      1736: 0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                                                                                                      1737: 0x0010   ClassNew                
                                                                                                                                                                                                                                                      1738: 0x9401   PopLocalRef             destination

000929          rawData = read(OUT_X_L, 6) // Read the six raw data registers into data array                                                                                                                                                         1739: 0x8028   PushConstU10            40 (0x0028)
                                                                                                                                                                                                                                                      1740: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                                      1741: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1742: 0x1E48   BranchSubr              2327
                                                                                                                                                                                                                                                      1743: 0x9400   PopLocalRef             rawData

000930          If rawData <> Nothing Then                                                                                                                                                                                                            1744: 0x8C00   PushLocalRef            rawData
                                                                                                                                                                                                                                                      1745: 0x000E   PushNothing             
                                                                                                                                                                                                                                                      1746: 0x000B   RefCmpNE                
                                                                                                                                                                                                                                                      1747: 0x3C27   BranchFalse             1787

000931              destination.Add((rawData(0) << 8 | rawData(1)) >> 4)                                                                                                                                                                              1748: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1749: 0x8C00   PushLocalRef            rawData
                                                                                                                                                                                                                                                      1750: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1751: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      1752: 0x002E   IntShl                  
                                                                                                                                                                                                                                                      1753: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1754: 0x8C00   PushLocalRef            rawData
                                                                                                                                                                                                                                                      1755: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1756: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1757: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      1758: 0x002F   IntShr                  
                                                                                                                                                                                                                                                      1759: 0x8C01   PushLocalRef            destination
                                                                                                                                                                                                                                                      1760: 0x00A3   ListAdd                 

000932              destination.Add((rawData(2) << 8 | rawData(3)) >> 4)                                                                                                                                                                              1761: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      1762: 0x8C00   PushLocalRef            rawData
                                                                                                                                                                                                                                                      1763: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1764: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      1765: 0x002E   IntShl                  
                                                                                                                                                                                                                                                      1766: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      1767: 0x8C00   PushLocalRef            rawData
                                                                                                                                                                                                                                                      1768: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1769: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1770: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      1771: 0x002F   IntShr                  
                                                                                                                                                                                                                                                      1772: 0x8C01   PushLocalRef            destination
                                                                                                                                                                                                                                                      1773: 0x00A3   ListAdd                 

000933              destination.Add((rawData(4) << 8 | rawData(5)) >> 4)                                                                                                                                                                              1774: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      1775: 0x8C00   PushLocalRef            rawData
                                                                                                                                                                                                                                                      1776: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1777: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      1778: 0x002E   IntShl                  
                                                                                                                                                                                                                                                      1779: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                                      1780: 0x8C00   PushLocalRef            rawData
                                                                                                                                                                                                                                                      1781: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1782: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      1783: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      1784: 0x002F   IntShr                  
                                                                                                                                                                                                                                                      1785: 0x8C01   PushLocalRef            destination
                                                                                                                                                                                                                                                      1786: 0x00A3   ListAdd                 

000934          End If
000935          Return destination                                                                                                                                                                                                                    1787: 0x8C01   PushLocalRef            destination
                                                                                                                                                                                                                                                      1788: 0x0095   ReturnRefType           

000936      End Function                                                                                                                                                                                                                              1789: 0x0096   ReturnNothing           

000937      
000938      Public Function readAccelDataBytes() As ListOfByte                                                                                                                                                                                        1790: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                                      1791: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000939          Dim rawData As ListOfByte = New ListOfByte // x/y/z accel register data stored here                                                                                                                                                   1792: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                                      1793: 0x0010   ClassNew                
                                                                                                                                                                                                                                                      1794: 0x9400   PopLocalRef             rawData

000940          rawData = read(OUT_X_L, 6) // Read the six raw data registers into data array                                                                                                                                                         1795: 0x8028   PushConstU10            40 (0x0028)
                                                                                                                                                                                                                                                      1796: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                                      1797: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1798: 0x1E10   BranchSubr              2327
                                                                                                                                                                                                                                                      1799: 0x9400   PopLocalRef             rawData

000941          Return rawData                                                                                                                                                                                                                        1800: 0x8C00   PushLocalRef            rawData
                                                                                                                                                                                                                                                      1801: 0x0095   ReturnRefType           

000942      End Function                                                                                                                                                                                                                              1802: 0x0096   ReturnNothing           

000943      
000944      
000945      '    Setup - setup the accelerometer to be able to retreive accelerometer data
000946      '    
000947      '    operating_mode As Byte - operating mode of the accelerometer (LOW_POWER_MODE, NORMAL_MODE, HIGH_RESOLUTION_MODE)
000948      '    data_rate As Byte - data rate for the accelerometer (DATA_RATE_POWER_DOWN, DATA_RATE_1HZ, DATA_RATE_10HZ, DATA_RATE_25HZ, DATA_RATE_50HZ, DATA_RATE_100HZ, DATA_RATE_200HZ, DATA_RATE_400HZ, DATA_RATE_1620HZ_LP, DATA_RATE_1344HZ)
000949      '    scale As Byte - scale of the accelerometer (+/-2G, +/-4G, +/-8G, +/-16G (SCALE_2G, SCALE_4G, SCALE_8G, SCALE_16G) 
000950      Public Sub Setup(operating_mode As Byte, data_rate As Byte, scale As Byte)                                                                                                                                                                1803: 0x1830   EntryPoint              ValTypParams=3, RefTypParams=0

000951          'set up values for accelerator
000952          'mode = NORMAL, LOW_POWER, HIGH_RESOLUTION
000953          'data_rate = DATA_RATE_100HZ etc
000954          'scale = SCALE_16G etc
000955          
000956          'Power cycle accelerometer (odd..)
000957          Power_Cycle()                                                                                                                                                                                                                         1804: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1805: 0x5800   JumpSubr                609
                                                                                                                                                                                                                                                      1806: 0x0261                           

000958          
000959          EnableAxis(X_AXIS | Y_AXIS | Z_AXIS) 'All axis enabled                                                                                                                                                                                1807: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      1808: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1809: 0x5800   JumpSubr                721
                                                                                                                                                                                                                                                      1810: 0x02D1                           

000960          SetMode(operating_mode)                                                                                                                                                                                                               1811: 0x8800   PushLocalI32            operating_mode
                                                                                                                                                                                                                                                      1812: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1813: 0x57CA   BranchSubrBack          844

000961          SetDataRate(data_rate)                                                                                                                                                                                                                1814: 0x8801   PushLocalI32            data_rate
                                                                                                                                                                                                                                                      1815: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1816: 0x5764   BranchSubrBack          949

000962          SetScale(scale)	                                                                                                                                                                                                                      1817: 0x8802   PushLocalI32            scale
                                                                                                                                                                                                                                                      1818: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1819: 0x56F6   BranchSubrBack          1062

000963          
000964          'delay 5ms for the accelerometer to boot (after each register write?)
000965          //Thread.Delay(5000)   
000966      End Sub                                                                                                                                                                                                                                   1820: 0x0091   Return                  

000967      
000968      '    ConfigureShockInterrupt - configures device to interrupt on shock (currently will interupt on any axis, x,y,z axis configuration can be added later)
000969      '    
000970      '    Inputs:
000971      '    threshold As Float - trigger threshold (1.0 Gs ~ 23.622 Gs), 0.186mg steps 
000972      '    Duration As Integer - Duration for threshold to be present to active interrupt (0 ms (immediate) to 635ms), 5ms steps   
000973      '    
000974      '    Returns:
000975      '    result As Boolean- False if function failed, True if function successful (MORE ERROR MESSAGES TO BE ADDED IN THE FUTURE)
000976      Public Function ConfigureShockInterrupt(threshold As Float, duration As Float) As Boolean                                                                                                                                                 1821: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                                                                                                      1822: 0xE060   AllocateStackSpace      ValTypeSize=3, RefTypeSize=0

000977          Dim result As Boolean = False
000978          Dim thresholdByte As Byte = 0
000979          Dim durationByte As Byte = 0
000980          
000981          If ((threshold >= LOW_TRIGGER_THRESHOLD And threshold <= HIGH_TRIGGER_THRESHOLD)) And ((duration >= LOW_DURATION_MS And duration <= HIGH_DURATION_MS)) Then                                                                           1823: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1824: 0xEA01   PushConstFlt            1.0
                                                                                                                                                                                                                                                      1825: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1826: 0x0023   IntCmpGE                
                                                                                                                                                                                                                                                      1827: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1828: 0x0110   PushConstI32            1102903771 (0x41BCF9DB)
                                                                                                                                                                                                                                                      1829: 0xF9DB                           
                                                                                                                                                                                                                                                      1830: 0x41BC                           
                                                                                                                                                                                                                                                      1831: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1832: 0x0025   IntCmpLE                
                                                                                                                                                                                                                                                      1833: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1834: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                                      1835: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1836: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1837: 0x0023   IntCmpGE                
                                                                                                                                                                                                                                                      1838: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                                      1839: 0x0110   PushConstI32            1142865920 (0x441EC000)
                                                                                                                                                                                                                                                      1840: 0xC000                           
                                                                                                                                                                                                                                                      1841: 0x441E                           
                                                                                                                                                                                                                                                      1842: 0x003A   FltCmp                  
                                                                                                                                                                                                                                                      1843: 0x0025   IntCmpLE                
                                                                                                                                                                                                                                                      1844: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1845: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1846: 0x3C3A   BranchFalse             1905

000982              
000983              'Power cycle accelerometer
000984              Power_Cycle()                                                                                                                                                                                                                     1847: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1848: 0x5800   JumpSubr                609
                                                                                                                                                                                                                                                      1849: 0x0261                           

000985              
000986              'Set registers
000987              'Set to 200Hz, Low Power Mode, All axis enabled
000988              //EnableAxis(X_AXIS | Y_AXIS | Z_AXIS) 'All axis enabled    
000989              //SetMode(LOW_POWER_MODE)    
000990              //SetDataRate(DATA_RATE_200HZ)     
000991              //SetScale(SCALE_16G)
000992              
000993              'modified for door knock sensor
000994              'Set to 50Hz, Low Power Mode, Z axis Only, 2G range
000995              EnableAxis(Z_AXIS)                                                                                                                                                                                                                1850: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      1851: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1852: 0x5800   JumpSubr                721
                                                                                                                                                                                                                                                      1853: 0x02D1                           

000996              SetMode(LOW_POWER_MODE)                                                                                                                                                                                                           1854: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1855: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1856: 0x57F5   BranchSubrBack          844

000997              SetDataRate(DATA_RATE_50HZ)                                                                                                                                                                                                       1857: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      1858: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1859: 0x578F   BranchSubrBack          949

000998              SetScale(SCALE_2G)                                                                                                                                                                                                                1860: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1861: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1862: 0x5721   BranchSubrBack          1062

000999              
001000              'set sleep mode
001001              SetSleepToWakeThreshold(threshold)                                                                                                                                                                                                1863: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1864: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1865: 0x5800   JumpSubr                744
                                                                                                                                                                                                                                                      1866: 0x02E8                           

001002              SetSleepToWakeDuration(5000) //5 seconds in ms                                                                                                                                                                                    1867: 0x0110   PushConstI32            5000 (0x00001388)
                                                                                                                                                                                                                                                      1868: 0x1388                           
                                                                                                                                                                                                                                                      1869: 0x0000                           
                                                                                                                                                                                                                                                      1870: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      1871: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1872: 0x5800   JumpSubr                818
                                                                                                                                                                                                                                                      1873: 0x0332                           

001003              
001004              //write(CTRL_REG1_REG, 0x6f)
001005              'No filter
001006              SetFilterMode(HP_FILTER_NORMAL_MODE_RESET) //not sure this is right HP_FILTER_NORMAL_MODE?                                                                                                                                        1874: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1875: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1876: 0x56E6   BranchSubrBack          1135

001007              SetFilterBypassBits(~(HP_FILTER_BYPASS_BIT | HP_FILTER_CLICK_BIT | HP_INT_AOI1_BIT | HP_INT_AOI2_BIT))                                                                                                                            1877: 0x80F2   PushConstU10            242 (0x00F2)
                                                                                                                                                                                                                                                      1878: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1879: 0x5640   BranchSubrBack          1304

001008              'SetFilterBypass(false)
001009              'SetFilterClick(false)
001010              'SetFilterAOI1(false)
001011              'SetFilterAOI2(false)
001012              //write(CTRL_REG2_REG, 0x00)
001013              'AOI interrupt on INT1 Pin
001014              SetInterruptEnable1Bits(INT1_AOI1_BIT)                                                                                                                                                                                            1880: 0x8040   PushConstU10            64 (0x0040)
                                                                                                                                                                                                                                                      1881: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1882: 0x562E   BranchSubrBack          1325

001015              //write(CTRL_REG3_REG, 0x40)
001016              '8 bit resolution(low power mode), +/- 16G Scale (already done above)
001017              'NOTE CTRL_REG4 BDU Block data update. BLE Endian setting not implemented yet
001018              //write(CTRL_REG4_REG, 0x30)
001019              'Latch Interrupt (cleared by reading INT1_SRC register)
001020              SetCTL5Bits(LIR_INT1)                                                                                                                                                                                                             1883: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      1884: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1885: 0x561D   BranchSubrBack          1345

001021              //write(CTRL_REG5_REG, 0x08)
001022              'Set interrupt as active low on INT1 pin
001023              SetCTL6Bits(H_LACTIVE)                                                                                                                                                                                                            1886: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      1887: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1888: 0x560C   BranchSubrBack          1365

001024              //write(CTRL_REG6_REG, 0x02)
001025              'Set Threshold 0.0 ~ 23.622 Gs
001026              SetINT1Threshold(threshold)                                                                                                                                                                                                       1889: 0x8800   PushLocalI32            threshold
                                                                                                                                                                                                                                                      1890: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1891: 0x55FB   BranchSubrBack          1385

001027              //write(INT1_THS, thresholdByte)
001028              'Set Duration (if set to 0, causes interrupt immediately, once threshold exceeded
001029              SetINT1Duration(duration)                                                                                                                                                                                                         1892: 0x8801   PushLocalI32            duration
                                                                                                                                                                                                                                                      1893: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1894: 0x556C   BranchSubrBack          1531

001030              //write(INT1_DURATION_REG, durationByte)
001031              'Configure device to generate interrupt on X, Y, OR Z high event
001032              SetINT1ActiveInterrupt(INT_SRC_XH | INT_SRC_YH | INT_SRC_ZH)                                                                                                                                                                      1895: 0x802A   PushConstU10            42 (0x002A)
                                                                                                                                                                                                                                                      1896: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1897: 0x5545   BranchSubrBack          1573

001033              //write(INT1_CFG, 0x2a)
001034              
001035              
001036              'delay 5ms for the accelerometer to boot
001037              Thread.Delay(5000)                                                                                                                                                                                                                1898: 0x0110   PushConstI32            5000 (0x00001388)
                                                                                                                                                                                                                                                      1899: 0x1388                           
                                                                                                                                                                                                                                                      1900: 0x0000                           
                                                                                                                                                                                                                                                      1901: 0x00D2   ThreadDelay             

001038              
001039              result = True                                                                                                                                                                                                                     1902: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1903: 0x9002   PopLocalI32             result

                                                                                                                                                                                                                                                      1904: 0x4002   Branch                  1907
001040          Else                                                                                                                                                                                                                                  

001041              'incorrect range, return error
001042              result = False                                                                                                                                                                                                                    1905: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      1906: 0x9002   PopLocalI32             result

001043          End If
001044          
001045      End Function                                                                                                                                                                                                                              1907: 0x0093   Return0                 

001046      
001047      
001048      'GetAccel - returns the acceleration of all axis NOTE: Setup() MUST BE RUN PRIOR TO CALLING THIS FUNCTION
001049      '
001050      'Returns:
001051      'returns the acceleration value in Gs As ListOfFloat
001052      Public Function GetAccel() As ListOfFloat                                                                                                                                                                                                 1908: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                                      1909: 0xE0C2   AllocateStackSpace      ValTypeSize=6, RefTypeSize=2

001053          'Returns the acceleration reading of the specified axis in Gs
001054          'Z-axis acceleration data. The value is expressed as two’s complement left-justified.
001055          Dim scaleFactor As Float = 0.0
001056          Dim XaccelerationReading As Short = 0
001057          Dim YaccelerationReading As Short = 0
001058          Dim ZaccelerationReading As Short = 0
001059          Dim acceleration As ListOfFloat = New ListOfFloat // x/y/z accel output data stored here                                                                                                                                              1910: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                                                                                                      1911: 0x0010   ClassNew                
                                                                                                                                                                                                                                                      1912: 0x9400   PopLocalRef             acceleration

001060          
001061          Dim scale As Byte = GetScale()                                                                                                                                                                                                        1913: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1914: 0x5745   BranchSubrBack          1078
                                                                                                                                                                                                                                                      1915: 0x9004   PopLocalI32             scale

001062          Dim mode As Byte = GetMode()                                                                                                                                                                                                          1916: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1917: 0x57E5   BranchSubrBack          921
                                                                                                                                                                                                                                                      1918: 0x9005   PopLocalI32             mode

001063          
001064          Select scale                                                                                                                                                                                                                          1919: 0x8804   PushLocalI32            scale
                                                                                                                                                                                                                                                      1920: 0x0122   CaseComputed            
                                                                                                                                                                                                                                                      1921: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                                      1922: 0x0004                           NumberOfCaseEntries=4
                                                                                                                                                                                                                                                      1923: 0x001B                           CaseElseBranch=1951
                                                                                                                                                                                                                                                      1924: 0x0000                           CaseValue=0
                                                                                                                                                                                                                                                      1925: 0x0008                           CaseBranch=1932
                                                                                                                                                                                                                                                      1926: 0x0001                           CaseValue=1
                                                                                                                                                                                                                                                      1927: 0x000D                           CaseBranch=1937
                                                                                                                                                                                                                                                      1928: 0x0002                           CaseValue=2
                                                                                                                                                                                                                                                      1929: 0x0012                           CaseBranch=1942
                                                                                                                                                                                                                                                      1930: 0x0003                           CaseValue=3
                                                                                                                                                                                                                                                      1931: 0x0017                           CaseBranch=1947

001065              Case SCALE_2G
001066                  scaleFactor = 0.016 '16mg per bit                                                                                                                                                                                             1932: 0x0110   PushConstI32            1015222895 (0x3C83126F)
                                                                                                                                                                                                                                                      1933: 0x126F                           
                                                                                                                                                                                                                                                      1934: 0x3C83                           
                                                                                                                                                                                                                                                      1935: 0x9000   PopLocalI32             scaleFactor

                                                                                                                                                                                                                                                      1936: 0x400E   Branch                  1951
001067              Case SCALE_4G                                                                                                                                                                                                                     

001068                  scaleFactor = 0.032 '32mg per bit                                                                                                                                                                                             1937: 0x0110   PushConstI32            1023611503 (0x3D03126F)
                                                                                                                                                                                                                                                      1938: 0x126F                           
                                                                                                                                                                                                                                                      1939: 0x3D03                           
                                                                                                                                                                                                                                                      1940: 0x9000   PopLocalI32             scaleFactor

                                                                                                                                                                                                                                                      1941: 0x4009   Branch                  1951
001069              Case SCALE_8G                                                                                                                                                                                                                     

001070                  scaleFactor = 0.064 '64mg per bit                                                                                                                                                                                             1942: 0x0110   PushConstI32            1032000111 (0x3D83126F)
                                                                                                                                                                                                                                                      1943: 0x126F                           
                                                                                                                                                                                                                                                      1944: 0x3D83                           
                                                                                                                                                                                                                                                      1945: 0x9000   PopLocalI32             scaleFactor

                                                                                                                                                                                                                                                      1946: 0x4004   Branch                  1951
001071              Case SCALE_16G                                                                                                                                                                                                                    

001072                  scaleFactor = 0.192 '192mg per bit                                                                                                                                                                                            1947: 0x0110   PushConstI32            1044683686 (0x3E449BA6)
                                                                                                                                                                                                                                                      1948: 0x9BA6                           
                                                                                                                                                                                                                                                      1949: 0x3E44                           
                                                                                                                                                                                                                                                      1950: 0x9000   PopLocalI32             scaleFactor

001073          End Select
001074          
001075          'read acceleration registers
001076          Dim Data As ListOfByte = readAccelDataBytes()                                                                                                                                                                                         1951: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      1952: 0x54A3   BranchSubrBack          1790
                                                                                                                                                                                                                                                      1953: 0x9401   PopLocalRef             Data

001077          
001078          Select mode                                                                                                                                                                                                                           1954: 0x8805   PushLocalI32            mode
                                                                                                                                                                                                                                                      1955: 0x0122   CaseComputed            
                                                                                                                                                                                                                                                      1956: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                                      1957: 0x0003                           NumberOfCaseEntries=3
                                                                                                                                                                                                                                                      1958: 0x011C                           CaseElseBranch=2243
                                                                                                                                                                                                                                                      1959: 0x0001                           CaseValue=1
                                                                                                                                                                                                                                                      1960: 0x0006                           CaseBranch=1965
                                                                                                                                                                                                                                                      1961: 0x0002                           CaseValue=2
                                                                                                                                                                                                                                                      1962: 0x005B                           CaseBranch=2050
                                                                                                                                                                                                                                                      1963: 0x0003                           CaseValue=3
                                                                                                                                                                                                                                                      1964: 0x00BC                           CaseBranch=2147

001079              Case LOW_POWER_MODE
001080                  '8 bit signed
001081                  XaccelerationReading = Data(1)                                                                                                                                                                                                1965: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1966: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      1967: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1968: 0x9001   PopLocalI32             XaccelerationReading

001082                  YaccelerationReading = Data(3)                                                                                                                                                                                                1969: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      1970: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      1971: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1972: 0x9002   PopLocalI32             YaccelerationReading

001083                  ZaccelerationReading = Data(5)                                                                                                                                                                                                1973: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                                      1974: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      1975: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1976: 0x9003   PopLocalI32             ZaccelerationReading

001084                  If ((Data(1) & 0x80) = 0x80) Then                                                                                                                                                                                             1977: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1978: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      1979: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1980: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                                      1981: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1982: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                                      1983: 0x2408   BranchNE                1992

001085                      'negative number
001086                      XaccelerationReading = (Data(1) ^ 0xff) * -1                                                                                                                                                                              1984: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      1985: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      1986: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1987: 0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                                      1988: 0x0032   IntXor                  
                                                                                                                                                                                                                                                      1989: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                                      1990: 0x002A   IntMul                  
                                                                                                                                                                                                                                                      1991: 0x9001   PopLocalI32             XaccelerationReading

001087                  End If
001088                  If ((Data(3) & 0x80) = 0x80) Then                                                                                                                                                                                             1992: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      1993: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      1994: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      1995: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                                      1996: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      1997: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                                      1998: 0x2408   BranchNE                2007

001089                      'negative number
001090                      YaccelerationReading = (Data(3) ^ 0xff) * -1                                                                                                                                                                              1999: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      2000: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2001: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2002: 0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                                      2003: 0x0032   IntXor                  
                                                                                                                                                                                                                                                      2004: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                                      2005: 0x002A   IntMul                  
                                                                                                                                                                                                                                                      2006: 0x9002   PopLocalI32             YaccelerationReading

001091                  End If
001092                  If ((Data(5) & 0x80) = 0x80) Then                                                                                                                                                                                             2007: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                                      2008: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2009: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2010: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                                      2011: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      2012: 0x8080   PushConstU10            128 (0x0080)
                                                                                                                                                                                                                                                      2013: 0x2408   BranchNE                2022

001093                      'negative number
001094                      ZaccelerationReading = (Data(5) ^ 0xff) * -1                                                                                                                                                                              2014: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                                      2015: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2016: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2017: 0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                                      2018: 0x0032   IntXor                  
                                                                                                                                                                                                                                                      2019: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                                      2020: 0x002A   IntMul                  
                                                                                                                                                                                                                                                      2021: 0x9003   PopLocalI32             ZaccelerationReading

001095                  End If
001096                  
001097                  'convert to acceleration        
001098                  acceleration.Add(XaccelerationReading * scaleFactor * LP_FACTOR)                                                                                                                                                              2022: 0x8801   PushLocalI32            XaccelerationReading
                                                                                                                                                                                                                                                      2023: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      2024: 0x8800   PushLocalI32            scaleFactor
                                                                                                                                                                                                                                                      2025: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                                      2026: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2027: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      2028: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2029: 0x8C00   PushLocalRef            acceleration
                                                                                                                                                                                                                                                      2030: 0x00A3   ListAdd                 

001099                  acceleration.Add(ZaccelerationReading * scaleFactor * LP_FACTOR)                                                                                                                                                              2031: 0x8803   PushLocalI32            ZaccelerationReading
                                                                                                                                                                                                                                                      2032: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      2033: 0x8800   PushLocalI32            scaleFactor
                                                                                                                                                                                                                                                      2034: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                                      2035: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2036: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      2037: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2038: 0x8C00   PushLocalRef            acceleration
                                                                                                                                                                                                                                                      2039: 0x00A3   ListAdd                 

001100                  acceleration.Add(ZaccelerationReading * scaleFactor * LP_FACTOR)                                                                                                                                                              2040: 0x8803   PushLocalI32            ZaccelerationReading
                                                                                                                                                                                                                                                      2041: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      2042: 0x8800   PushLocalI32            scaleFactor
                                                                                                                                                                                                                                                      2043: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                                      2044: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2045: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      2046: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2047: 0x8C00   PushLocalRef            acceleration
                                                                                                                                                                                                                                                      2048: 0x00A3   ListAdd                 

001101                  
                                                                                                                                                                                                                                                      2049: 0x40C1   Branch                  2243
001102              Case NORMAL_MODE                                                                                                                                                                                                                  

001103                  '10 bit signed            
001104                  XaccelerationReading = ((Data(1) << 8) | Data(0)) >> 6                                                                                                                                                                        2050: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2051: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2052: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2053: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      2054: 0x002E   IntShl                  
                                                                                                                                                                                                                                                      2055: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2056: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2057: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2058: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      2059: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                                      2060: 0x002F   IntShr                  
                                                                                                                                                                                                                                                      2061: 0x9001   PopLocalI32             XaccelerationReading

001105                  YaccelerationReading = ((Data(3) << 8) | Data(2)) >> 6                                                                                                                                                                        2062: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      2063: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2064: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2065: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      2066: 0x002E   IntShl                  
                                                                                                                                                                                                                                                      2067: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      2068: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2069: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2070: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      2071: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                                      2072: 0x002F   IntShr                  
                                                                                                                                                                                                                                                      2073: 0x9002   PopLocalI32             YaccelerationReading

001106                  ZaccelerationReading = ((Data(5) << 8) | Data(4)) >> 6                                                                                                                                                                        2074: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                                      2075: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2076: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2077: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      2078: 0x002E   IntShl                  
                                                                                                                                                                                                                                                      2079: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      2080: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2081: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2082: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      2083: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                                      2084: 0x002F   IntShr                  
                                                                                                                                                                                                                                                      2085: 0x9003   PopLocalI32             ZaccelerationReading

001107                  If ((XaccelerationReading & 0x0200) = 0x0200) Then                                                                                                                                                                            2086: 0x8801   PushLocalI32            XaccelerationReading
                                                                                                                                                                                                                                                      2087: 0x8200   PushConstU10            512 (0x0200)
                                                                                                                                                                                                                                                      2088: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      2089: 0x8200   PushConstU10            512 (0x0200)
                                                                                                                                                                                                                                                      2090: 0x2406   BranchNE                2097

001108                      'negative number
001109                      XaccelerationReading = (XaccelerationReading ^ 0x03ff) * -1                                                                                                                                                               2091: 0x8801   PushLocalI32            XaccelerationReading
                                                                                                                                                                                                                                                      2092: 0x83FF   PushConstU10            1023 (0x03FF)
                                                                                                                                                                                                                                                      2093: 0x0032   IntXor                  
                                                                                                                                                                                                                                                      2094: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                                      2095: 0x002A   IntMul                  
                                                                                                                                                                                                                                                      2096: 0x9001   PopLocalI32             XaccelerationReading

001110                  End If
001111                  If ((YaccelerationReading & 0x0200) = 0x0200) Then                                                                                                                                                                            2097: 0x8802   PushLocalI32            YaccelerationReading
                                                                                                                                                                                                                                                      2098: 0x8200   PushConstU10            512 (0x0200)
                                                                                                                                                                                                                                                      2099: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      2100: 0x8200   PushConstU10            512 (0x0200)
                                                                                                                                                                                                                                                      2101: 0x2406   BranchNE                2108

001112                      'negative number
001113                      YaccelerationReading = (YaccelerationReading ^ 0x03ff) * -1                                                                                                                                                               2102: 0x8802   PushLocalI32            YaccelerationReading
                                                                                                                                                                                                                                                      2103: 0x83FF   PushConstU10            1023 (0x03FF)
                                                                                                                                                                                                                                                      2104: 0x0032   IntXor                  
                                                                                                                                                                                                                                                      2105: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                                      2106: 0x002A   IntMul                  
                                                                                                                                                                                                                                                      2107: 0x9002   PopLocalI32             YaccelerationReading

001114                  End If      
001115                  If ((ZaccelerationReading & 0x0200) = 0x0200) Then                                                                                                                                                                            2108: 0x8803   PushLocalI32            ZaccelerationReading
                                                                                                                                                                                                                                                      2109: 0x8200   PushConstU10            512 (0x0200)
                                                                                                                                                                                                                                                      2110: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      2111: 0x8200   PushConstU10            512 (0x0200)
                                                                                                                                                                                                                                                      2112: 0x2406   BranchNE                2119

001116                      'negative number
001117                      ZaccelerationReading = (ZaccelerationReading ^ 0x03ff) * -1                                                                                                                                                               2113: 0x8803   PushLocalI32            ZaccelerationReading
                                                                                                                                                                                                                                                      2114: 0x83FF   PushConstU10            1023 (0x03FF)
                                                                                                                                                                                                                                                      2115: 0x0032   IntXor                  
                                                                                                                                                                                                                                                      2116: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                                      2117: 0x002A   IntMul                  
                                                                                                                                                                                                                                                      2118: 0x9003   PopLocalI32             ZaccelerationReading

001118                  End If
001119                  'convert to acceleration        
001120                  acceleration.Add(XaccelerationReading * scaleFactor * NM_FACTOR)                                                                                                                                                              2119: 0x8801   PushLocalI32            XaccelerationReading
                                                                                                                                                                                                                                                      2120: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      2121: 0x8800   PushLocalI32            scaleFactor
                                                                                                                                                                                                                                                      2122: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                                      2123: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2124: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                                      2125: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2126: 0x8C00   PushLocalRef            acceleration
                                                                                                                                                                                                                                                      2127: 0x00A3   ListAdd                 

001121                  acceleration.Add(ZaccelerationReading * scaleFactor * NM_FACTOR)                                                                                                                                                              2128: 0x8803   PushLocalI32            ZaccelerationReading
                                                                                                                                                                                                                                                      2129: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      2130: 0x8800   PushLocalI32            scaleFactor
                                                                                                                                                                                                                                                      2131: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                                      2132: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2133: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                                      2134: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2135: 0x8C00   PushLocalRef            acceleration
                                                                                                                                                                                                                                                      2136: 0x00A3   ListAdd                 

001122                  acceleration.Add(ZaccelerationReading * scaleFactor * NM_FACTOR)                                                                                                                                                              2137: 0x8803   PushLocalI32            ZaccelerationReading
                                                                                                                                                                                                                                                      2138: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      2139: 0x8800   PushLocalI32            scaleFactor
                                                                                                                                                                                                                                                      2140: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                                      2141: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2142: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                                                                                                      2143: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2144: 0x8C00   PushLocalRef            acceleration
                                                                                                                                                                                                                                                      2145: 0x00A3   ListAdd                 

001123                  
                                                                                                                                                                                                                                                      2146: 0x4060   Branch                  2243
001124              Case HIGH_RESOLUTION_MODE                                                                                                                                                                                                         

001125                  '12 bit signed
001126                  XaccelerationReading = ((Data(1) << 8) | Data(0)) >> 4                                                                                                                                                                        2147: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2148: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2149: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2150: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      2151: 0x002E   IntShl                  
                                                                                                                                                                                                                                                      2152: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2153: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2154: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2155: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      2156: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      2157: 0x002F   IntShr                  
                                                                                                                                                                                                                                                      2158: 0x9001   PopLocalI32             XaccelerationReading

001127                  YaccelerationReading = ((Data(3) << 8) | Data(2)) >> 4                                                                                                                                                                        2159: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      2160: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2161: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2162: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      2163: 0x002E   IntShl                  
                                                                                                                                                                                                                                                      2164: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      2165: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2166: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2167: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      2168: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      2169: 0x002F   IntShr                  
                                                                                                                                                                                                                                                      2170: 0x9002   PopLocalI32             YaccelerationReading

001128                  ZaccelerationReading = ((Data(5) << 8) | Data(4)) >> 4                                                                                                                                                                        2171: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                                                                                                      2172: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2173: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2174: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                                                                                                      2175: 0x002E   IntShl                  
                                                                                                                                                                                                                                                      2176: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      2177: 0x8C01   PushLocalRef            Data
                                                                                                                                                                                                                                                      2178: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2179: 0x002D   IntOr                   
                                                                                                                                                                                                                                                      2180: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      2181: 0x002F   IntShr                  
                                                                                                                                                                                                                                                      2182: 0x9003   PopLocalI32             ZaccelerationReading

001129                  If ((XaccelerationReading & 0x0800) = 0x0800) Then                                                                                                                                                                            2183: 0x8801   PushLocalI32            XaccelerationReading
                                                                                                                                                                                                                                                      2184: 0xE90B   PushConstBit            1<<11  (0x00000800 Or 2048)
                                                                                                                                                                                                                                                      2185: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      2186: 0xE90B   PushConstBit            1<<11  (0x00000800 Or 2048)
                                                                                                                                                                                                                                                      2187: 0x2408   BranchNE                2196

001130                      'negative number
001131                      XaccelerationReading = (XaccelerationReading ^ 0x0fff) * -1                                                                                                                                                               2188: 0x8801   PushLocalI32            XaccelerationReading
                                                                                                                                                                                                                                                      2189: 0x0110   PushConstI32            4095 (0x00000FFF)
                                                                                                                                                                                                                                                      2190: 0x0FFF                           
                                                                                                                                                                                                                                                      2191: 0x0000                           
                                                                                                                                                                                                                                                      2192: 0x0032   IntXor                  
                                                                                                                                                                                                                                                      2193: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                                      2194: 0x002A   IntMul                  
                                                                                                                                                                                                                                                      2195: 0x9001   PopLocalI32             XaccelerationReading

001132                  End If
001133                  If ((YaccelerationReading & 0x0800) = 0x0800) Then                                                                                                                                                                            2196: 0x8802   PushLocalI32            YaccelerationReading
                                                                                                                                                                                                                                                      2197: 0xE90B   PushConstBit            1<<11  (0x00000800 Or 2048)
                                                                                                                                                                                                                                                      2198: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      2199: 0xE90B   PushConstBit            1<<11  (0x00000800 Or 2048)
                                                                                                                                                                                                                                                      2200: 0x2408   BranchNE                2209

001134                      'negative number
001135                      YaccelerationReading = (YaccelerationReading ^ 0x0fff) * -1                                                                                                                                                               2201: 0x8802   PushLocalI32            YaccelerationReading
                                                                                                                                                                                                                                                      2202: 0x0110   PushConstI32            4095 (0x00000FFF)
                                                                                                                                                                                                                                                      2203: 0x0FFF                           
                                                                                                                                                                                                                                                      2204: 0x0000                           
                                                                                                                                                                                                                                                      2205: 0x0032   IntXor                  
                                                                                                                                                                                                                                                      2206: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                                      2207: 0x002A   IntMul                  
                                                                                                                                                                                                                                                      2208: 0x9002   PopLocalI32             YaccelerationReading

001136                  End If
001137                  If ((ZaccelerationReading & 0x0800) = 0x0800) Then                                                                                                                                                                            2209: 0x8803   PushLocalI32            ZaccelerationReading
                                                                                                                                                                                                                                                      2210: 0xE90B   PushConstBit            1<<11  (0x00000800 Or 2048)
                                                                                                                                                                                                                                                      2211: 0x001F   IntAnd                  
                                                                                                                                                                                                                                                      2212: 0xE90B   PushConstBit            1<<11  (0x00000800 Or 2048)
                                                                                                                                                                                                                                                      2213: 0x2408   BranchNE                2222

001138                      'negative number
001139                      ZaccelerationReading = (ZaccelerationReading ^ 0x0fff) * -1                                                                                                                                                               2214: 0x8803   PushLocalI32            ZaccelerationReading
                                                                                                                                                                                                                                                      2215: 0x0110   PushConstI32            4095 (0x00000FFF)
                                                                                                                                                                                                                                                      2216: 0x0FFF                           
                                                                                                                                                                                                                                                      2217: 0x0000                           
                                                                                                                                                                                                                                                      2218: 0x0032   IntXor                  
                                                                                                                                                                                                                                                      2219: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                                      2220: 0x002A   IntMul                  
                                                                                                                                                                                                                                                      2221: 0x9003   PopLocalI32             ZaccelerationReading

001140                  End If
001141                  'convert to acceleration        
001142                  acceleration.Add(XaccelerationReading * scaleFactor)                                                                                                                                                                          2222: 0x8801   PushLocalI32            XaccelerationReading
                                                                                                                                                                                                                                                      2223: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      2224: 0x8800   PushLocalI32            scaleFactor
                                                                                                                                                                                                                                                      2225: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                                      2226: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2227: 0x8C00   PushLocalRef            acceleration
                                                                                                                                                                                                                                                      2228: 0x00A3   ListAdd                 

001143                  acceleration.Add(ZaccelerationReading * scaleFactor)                                                                                                                                                                          2229: 0x8803   PushLocalI32            ZaccelerationReading
                                                                                                                                                                                                                                                      2230: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      2231: 0x8800   PushLocalI32            scaleFactor
                                                                                                                                                                                                                                                      2232: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                                      2233: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2234: 0x8C00   PushLocalRef            acceleration
                                                                                                                                                                                                                                                      2235: 0x00A3   ListAdd                 

001144                  acceleration.Add(ZaccelerationReading * scaleFactor)                                                                                                                                                                          2236: 0x8803   PushLocalI32            ZaccelerationReading
                                                                                                                                                                                                                                                      2237: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      2238: 0x8800   PushLocalI32            scaleFactor
                                                                                                                                                                                                                                                      2239: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                                      2240: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2241: 0x8C00   PushLocalRef            acceleration
                                                                                                                                                                                                                                                      2242: 0x00A3   ListAdd                 

001145          End Select
001146          
001147          Return acceleration                                                                                                                                                                                                                   2243: 0x8C00   PushLocalRef            acceleration
                                                                                                                                                                                                                                                      2244: 0x0095   ReturnRefType           

001148          
001149      End Function                                                                                                                                                                                                                              2245: 0x0096   ReturnNothing           

001150      
001151      'Accel - returns the acceleration of the specified axis NOTE: Setup() MUST BE RUN PRIOR TO CALLING THIS FUNCTION
001152      '
001153      'Inputs:
001154      'xyz As Byte - axis of acceleration to return (X_AXIS, Y_AXIS, Z_AXIS)
001155      '
001156      'Returns:
001157      'returns the acceleration value in Gs As Float
001158      Public Function Accel(xyz As Byte) As Float                                                                                                                                                                                               2246: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      2247: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

001159          Dim accelValues As ListOfFloat = GetAccel()                                                                                                                                                                                           2248: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      2249: 0x5556   BranchSubrBack          1908
                                                                                                                                                                                                                                                      2250: 0x9400   PopLocalRef             accelValues

001160          If accelValues = Nothing Then                                                                                                                                                                                                         2251: 0x8C00   PushLocalRef            accelValues
                                                                                                                                                                                                                                                      2252: 0x000E   PushNothing             
                                                                                                                                                                                                                                                      2253: 0x000A   RefCmpEQ                
                                                                                                                                                                                                                                                      2254: 0x3C01   BranchFalse             2256

001161              Return Nothing                                                                                                                                                                                                                    2255: 0x0096   ReturnNothing           

001162          End If
001163          
001164          Select xyz                                                                                                                                                                                                                            2256: 0x8800   PushLocalI32            xyz
                                                                                                                                                                                                                                                      2257: 0x0122   CaseComputed            
                                                                                                                                                                                                                                                      2258: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                                                                                                      2259: 0x0003                           NumberOfCaseEntries=3
                                                                                                                                                                                                                                                      2260: 0x0015                           CaseElseBranch=2282
                                                                                                                                                                                                                                                      2261: 0x0001                           CaseValue=1
                                                                                                                                                                                                                                                      2262: 0x0006                           CaseBranch=2267
                                                                                                                                                                                                                                                      2263: 0x0002                           CaseValue=2
                                                                                                                                                                                                                                                      2264: 0x000B                           CaseBranch=2272
                                                                                                                                                                                                                                                      2265: 0x0003                           CaseValue=3
                                                                                                                                                                                                                                                      2266: 0x0010                           CaseBranch=2277

001165              Case X_AXIS
001166                  Return accelValues(0)                                                                                                                                                                                                         2267: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2268: 0x8C00   PushLocalRef            accelValues
                                                                                                                                                                                                                                                      2269: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2270: 0x0092   ReturnValType           

                                                                                                                                                                                                                                                      2271: 0x400B   Branch                  2283
001167              Case Y_AXIS                                                                                                                                                                                                                       

001168                  Return accelValues(1)                                                                                                                                                                                                         2272: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2273: 0x8C00   PushLocalRef            accelValues
                                                                                                                                                                                                                                                      2274: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2275: 0x0092   ReturnValType           

                                                                                                                                                                                                                                                      2276: 0x4006   Branch                  2283
001169              Case Z_AXIS                                                                                                                                                                                                                       

001170                  Return accelValues(2)                                                                                                                                                                                                         2277: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      2278: 0x8C00   PushLocalRef            accelValues
                                                                                                                                                                                                                                                      2279: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2280: 0x0092   ReturnValType           

                                                                                                                                                                                                                                                      2281: 0x4001   Branch                  2283
001171              Case Else                                                                                                                                                                                                                         

001172                  Return Nothing                                                                                                                                                                                                                2282: 0x0096   ReturnNothing           

001173          End Select
001174          
001175      End Function                                                                                                                                                                                                                              2283: 0x0093   Return0                 

001176      
001177      
001178      'GetID() - returns the ID of the LISDH12
001179      '
001180      'Inputs: NONE
001181      '
001182      'Returns:
001183      'returns the ID of the LISDH12, should be 0x33 if device is seen (actually returns 0)
001184      Public Function GetID() As Byte                                                                                                                                                                                                           2284: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

001185          Return read(WHO_AM_I)                                                                                                                                                                                                                 2285: 0x800F   PushConstU10            15 (0x000F)
                                                                                                                                                                                                                                                      2286: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      2287: 0x1C10   BranchSubr              2304
                                                                                                                                                                                                                                                      2288: 0x0092   ReturnValType           

001186      End Function                                                                                                                                                                                                                              2289: 0x0093   Return0                 

001187      
001188      Public Sub SetRegister(reg As Byte)                                                                                                                                                                                                       2290: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      2291: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

001189          Dim data As ListOfByte = New ListOfByte                                                                                                                                                                                               2292: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                                      2293: 0x0010   ClassNew                
                                                                                                                                                                                                                                                      2294: 0x9400   PopLocalRef             data

001190          data.Add(reg)                                                                                                                                                                                                                         2295: 0x8800   PushLocalI32            reg
                                                                                                                                                                                                                                                      2296: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                                      2297: 0x00A3   ListAdd                 

001191          gAccelerometer.Write(data, False)                                                                                                                                                                                                     2298: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                                      2299: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2300: 0xA400   PushMemberRef           gAccelerometer
                                                                                                                                                                                                                                                      2301: 0x00E1   I2cDeviceWrite          
                                                                                                                                                                                                                                                      2302: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

001192      End Sub                                                                                                                                                                                                                                   2303: 0x0091   Return                  

001193      
001194      Public Function read(address As Byte) As Byte                                                                                                                                                                                             2304: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                                                                                                      2305: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

001195          // read single byte
001196          SetRegister(address)                                                                                                                                                                                                                  2306: 0x8800   PushLocalI32            address
                                                                                                                                                                                                                                                      2307: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      2308: 0x5413   BranchSubrBack          2290

001197          Dim result As Byte = UNDEFINED                                                                                                                                                                                                        2309: 0x80FF   PushConstU10            255 (0x00FF)
                                                                                                                                                                                                                                                      2310: 0x9001   PopLocalI32             result

001198          Dim value As ListOfByte = gAccelerometer.Read(1, True)                                                                                                                                                                                2311: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2312: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2313: 0xA400   PushMemberRef           gAccelerometer
                                                                                                                                                                                                                                                      2314: 0x00E0   I2cDeviceRead           
                                                                                                                                                                                                                                                      2315: 0x9400   PopLocalRef             value

001199          If value <> Nothing Then                                                                                                                                                                                                              2316: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2317: 0x000E   PushNothing             
                                                                                                                                                                                                                                                      2318: 0x000B   RefCmpNE                
                                                                                                                                                                                                                                                      2319: 0x3C04   BranchFalse             2324

001200              result = value(0)                                                                                                                                                                                                                 2320: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2321: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2322: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2323: 0x9001   PopLocalI32             result

001201          End If
001202          Return result                                                                                                                                                                                                                         2324: 0x8801   PushLocalI32            result
                                                                                                                                                                                                                                                      2325: 0x0092   ReturnValType           

001203      End Function                                                                                                                                                                                                                              2326: 0x0093   Return0                 

001204      
001205      Public Function read(address As Byte, length As Byte) As ListOfByte                                                                                                                                                                       2327: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                                                                                                      2328: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

001206          //read multiple bytes
001207          SetRegister(address)                                                                                                                                                                                                                  2329: 0x8800   PushLocalI32            address
                                                                                                                                                                                                                                                      2330: 0x000D   PushMe                  
                                                                                                                                                                                                                                                      2331: 0x542A   BranchSubrBack          2290

001208          Dim value As ListOfByte = gAccelerometer.Read(length, True)                                                                                                                                                                           2332: 0x8801   PushLocalI32            length
                                                                                                                                                                                                                                                      2333: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2334: 0xA400   PushMemberRef           gAccelerometer
                                                                                                                                                                                                                                                      2335: 0x00E0   I2cDeviceRead           
                                                                                                                                                                                                                                                      2336: 0x9400   PopLocalRef             value

001209          Return value                                                                                                                                                                                                                          2337: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2338: 0x0095   ReturnRefType           

001210      End Function                                                                                                                                                                                                                              2339: 0x0096   ReturnNothing           

001211      
001212      Public Sub write(address As Byte, value As Byte)                                                                                                                                                                                          2340: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                                                                                                      2341: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

001213          //write single byte
001214          Dim data As ListOfByte = New ListOfByte                                                                                                                                                                                               2342: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                                      2343: 0x0010   ClassNew                
                                                                                                                                                                                                                                                      2344: 0x9400   PopLocalRef             data

001215          data.Add(address)                                                                                                                                                                                                                     2345: 0x8800   PushLocalI32            address
                                                                                                                                                                                                                                                      2346: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                                      2347: 0x00A3   ListAdd                 

001216          data.Add(value)                                                                                                                                                                                                                       2348: 0x8801   PushLocalI32            value
                                                                                                                                                                                                                                                      2349: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                                      2350: 0x00A3   ListAdd                 

001217          gAccelerometer.Write(data, True)                                                                                                                                                                                                      2351: 0x8C00   PushLocalRef            data
                                                                                                                                                                                                                                                      2352: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2353: 0xA400   PushMemberRef           gAccelerometer
                                                                                                                                                                                                                                                      2354: 0x00E1   I2cDeviceWrite          
                                                                                                                                                                                                                                                      2355: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

001218      End Sub                                                                                                                                                                                                                                   2356: 0x0091   Return                  

001219      
001220      'GetVersion() - returns version of this driver
001221      '
001222      'Inputs: NONE
001223      '
001224      'Returns:
001225      'version As Integer - returns the version of the driver
001226      Public Function GetVersion() As Integer                                                                                                                                                                                                   2357: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

001227          Return VERSION                                                                                                                                                                                                                        2358: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      2359: 0x0092   ReturnValType           

001228      End Function                                                                                                                                                                                                                              2360: 0x0093   Return0                 

001229      
001230  End Class                                                                                                                                                                                                                                     543:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for LIS2DH12
    Block Class (Line 7:1230)
        LIS2DH12        Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        Integer         VERSION         (Literal=3)
        Byte            LIS2DH12_I2C_ADD(Literal=25)
        Integer         I2C_SPEED       (Literal=250000)
        Byte            STATUS_REG_AUX  (Literal=7)
        Byte            OUT_TEMP_L      (Literal=12)
        Byte            OUT_TEMP_H      (Literal=13)
        Byte            WHO_AM_I        (Literal=15)
        Byte            TEMP_CFG        (Literal=31)
        Byte            CTRL_REG1       (Literal=32)
        Byte            CTRL_REG2       (Literal=33)
        Byte            CTRL_REG3       (Literal=34)
        Byte            CTRL_REG4       (Literal=35)
        Byte            CTRL_REG5       (Literal=36)
        Byte            CTRL_REG6       (Literal=37)
        Byte            REF_DATA_CAP    (Literal=38)
        Byte            STATUS          (Literal=39)
        Byte            OUT_X_L         (Literal=40)
        Byte            OUT_X_H         (Literal=41)
        Byte            OUT_Y_L         (Literal=42)
        Byte            OUT_Y_H         (Literal=43)
        Byte            OUT_Z_L         (Literal=44)
        Byte            OUT_Z_H         (Literal=45)
        Byte            FIFO_CTRL       (Literal=46)
        Byte            FIFO_SRC        (Literal=47)
        Byte            INT1_CFG        (Literal=48)
        Byte            INT1_SRC        (Literal=49)
        Byte            INT1_THS        (Literal=50)
        Byte            INT1_DURATION   (Literal=51)
        Byte            INT2_CFG        (Literal=52)
        Byte            INT2_SRC        (Literal=53)
        Byte            INT2_THS        (Literal=54)
        Byte            INT2_DURATION   (Literal=55)
        Byte            CLICK_CFG       (Literal=56)
        Byte            CLICK_SRC       (Literal=57)
        Byte            CLICK_THS       (Literal=58)
        Byte            TIME_LIMIT      (Literal=59)
        Byte            TIME_LATENCY    (Literal=60)
        Byte            TIME_WINDOW     (Literal=61)
        Byte            ACT_THS         (Literal=62)
        Byte            ACT_DUR         (Literal=63)
        Byte            TEMP_ENABLE     (Literal=192)
        Byte            TOR             (Literal=64)
        Byte            TDA             (Literal=4)
        Byte            ZYXOR           (Literal=128)
        Byte            ZOR             (Literal=64)
        Byte            YOR             (Literal=32)
        Byte            XOR             (Literal=16)
        Byte            ZYXDA           (Literal=8)
        Byte            ZDA             (Literal=4)
        Byte            YDA             (Literal=2)
        Byte            XDA             (Literal=1)
        Byte            DATA_RATE_POWER_(Literal=0)
        Byte            DATA_RATE_1HZ   (Literal=1)
        Byte            DATA_RATE_10HZ  (Literal=2)
        Byte            DATA_RATE_25HZ  (Literal=3)
        Byte            DATA_RATE_50HZ  (Literal=4)
        Byte            DATA_RATE_100HZ (Literal=5)
        Byte            DATA_RATE_200HZ (Literal=6)
        Byte            DATA_RATE_400HZ (Literal=7)
        Byte            DATA_RATE_1620HZ(Literal=8)
        Byte            DATA_RATE_1344HZ(Literal=9)
        Byte            DATA_RATE_MASK  (Literal=240)
        Byte            SCALE_2G        (Literal=0)
        Byte            SCALE_4G        (Literal=1)
        Byte            SCALE_8G        (Literal=2)
        Byte            SCALE_16G       (Literal=3)
        Byte            SCALE_MASK      (Literal=48)
        Byte            UNDEFINED       (Literal=255)
        Byte            LOW_POWER_MODE  (Literal=1)
        Byte            NORMAL_MODE     (Literal=2)
        Byte            HIGH_RESOLUTION_(Literal=3)
        Byte            LPEN_BIT        (Literal=8)
        Byte            HR_BIT          (Literal=8)
        Byte            BDU_BIT         (Literal=128)
        Byte            BLE_BIT         (Literal=64)
        Byte            CTL5_MASK       (Literal=207)
        Byte            RST_MASK        (Literal=128)
        Byte            BOOT            (Literal=128)
        Byte            FIFO_EN         (Literal=64)
        Byte            LIR_INT1        (Literal=8)
        Byte            D4D_INT1        (Literal=4)
        Byte            LIR_INT2        (Literal=2)
        Byte            D4D_INT2        (Literal=1)
        Byte            CTL6_MASK       (Literal=250)
        Byte            I2_CLICKen      (Literal=128)
        Byte            I2_INT1         (Literal=64)
        Byte            I2_INT2         (Literal=32)
        Byte            BOOT_I2         (Literal=16)
        Byte            P2_ACT          (Literal=8)
        Byte            H_LACTIVE       (Literal=2)
        Byte            INT1_ENABLE_MASK(Literal=254)
        Byte            INT1_CLICK_BIT  (Literal=128)
        Byte            INT1_AOI1_BIT   (Literal=64)
        Byte            INT1_AOI2_BIT   (Literal=32)
        Byte            INT1_DRDY1_BIT  (Literal=16)
        Byte            INT1_DRDY2_BIT  (Literal=8)
        Byte            INT1_WTM_BIT    (Literal=4)
        Byte            INT1_OVERRUN_BIT(Literal=2)
        Byte            INT1_PIN        (Literal=1)
        Byte            INT2_PIN        (Literal=2)
        Byte            INT_ACTIVE      (Literal=64)
        Byte            INT_SRC_ZH      (Literal=32)
        Byte            INT_SRC_ZL      (Literal=16)
        Byte            INT_SRC_YH      (Literal=8)
        Byte            INT_SRC_YL      (Literal=4)
        Byte            INT_SRC_XH      (Literal=2)
        Byte            INT_SRC_XL      (Literal=1)
        Byte            HP_FILTER_MODE_M(Literal=192)
        Byte            HP_FILTER_NORMAL(Literal=0)
        Byte            HP_FILTER_REF_MO(Literal=1)
        Byte            HP_FILTER_NORMAL(Literal=2)
        Byte            HP_FILTER_NORMAL(Literal=3)
        Byte            HP_FILTER_BITS_M(Literal=15)
        Byte            HP_FILTER_BYPASS(Literal=8)
        Byte            HP_FILTER_CLICK_(Literal=4)
        Byte            HP_INT_AOI1_BIT (Literal=0)
        Byte            HP_INT_AOI2_BIT (Literal=1)
        Byte            ZD              (Literal=32)
        Byte            ZS              (Literal=16)
        Byte            YD              (Literal=8)
        Byte            YS              (Literal=4)
        Byte            XD              (Literal=2)
        Byte            XS              (Literal=1)
        Byte            CLICK_IA        (Literal=64)
        Byte            DClick          (Literal=32)
        Byte            SClick          (Literal=16)
        Byte            Sign            (Literal=8)
        Byte            CLICK_Z         (Literal=4)
        Byte            CLICK_Y         (Literal=2)
        Byte            CLICK_X         (Literal=1)
        Float           LOW_TRIGGER_THRE(Literal=1)
        Float           HIGH_TRIGGER_THR(Literal=23.622)
        Float           LSB_RESOLUTION_T(Literal=0.186)
        Float           LOW_DURATION_MS (Literal=0)
        Float           HIGH_DURATION_MS(Literal=635)
        Float           DURATION_RESOLUT(Literal=5)
        Float           LP_FACTOR       (Literal=16)
        Float           NM_FACTOR       (Literal=4)
        Byte            X_AXIS          (Literal=1)
        Byte            Y_AXIS          (Literal=2)
        Byte            Z_AXIS          (Literal=3)
        Boolean         online          (MemberValTypVariableOffset=4)
        I2c             gAccelerometer  (MemberRefTypVariableOffset=0)
        Byte            gScale          (MemberValTypVariableOffset=5)
        Byte            gOperatingMode  (MemberValTypVariableOffset=6)
        Byte            gDataRate       (MemberValTypVariableOffset=7)
        Block Sub New (Line 205:211)
            Block If Then  (Line 208:210)
            End Block
        End Block
        Block Function map_range (Line 213:218)
            Float           old_range       (LocalValTypVariableOffset=5)
            Float           new_range       (LocalValTypVariableOffset=6)
            Float           var             (LocalValTypVariableOffset=0)
            Float           old_min         (LocalValTypVariableOffset=1)
            Float           old_max         (LocalValTypVariableOffset=2)
            Byte            new_min         (LocalValTypVariableOffset=3)
            Byte            new_max         (LocalValTypVariableOffset=4)
        End Block
        Block Function map_range (Line 220:225)
            Float           old_range       (LocalValTypVariableOffset=5)
            Float           new_range       (LocalValTypVariableOffset=6)
            Float           var             (LocalValTypVariableOffset=0)
            Byte            old_min         (LocalValTypVariableOffset=1)
            Byte            old_max         (LocalValTypVariableOffset=2)
            Float           new_min         (LocalValTypVariableOffset=3)
            Float           new_max         (LocalValTypVariableOffset=4)
        End Block
        Block Sub Power_Cycle (Line 227:235)
        End Block
        Block Sub reset (Line 237:240)
        End Block
        Block Sub EnableTemperature (Line 244:254)
            Byte            enable          (LocalValTypVariableOffset=1)
            Boolean         temp            (LocalValTypVariableOffset=0)
            Block If Then  (Line 249:252)
            End Block
        End Block
        Block Function GetTemperatureEnabled (Line 256:265)
            Block If Then  (Line 260:262)
            End Block
            Block Else (Line 262:264)
            End Block
        End Block
        Block Sub SetTemperatureBits (Line 267:272)
            Byte            temp            (LocalValTypVariableOffset=0)
        End Block
        Block Function GetTemperatureBits (Line 274:279)
        End Block
        Block Function GetTemperatureStatus (Line 281:287)
        End Block
        Block Function NewTemperatureAvailable (Line 289:291)
        End Block
        Block Function GetTemp (Line 293:300)
            Byte            Temp            (LocalValTypVariableOffset=0)
        End Block
        Block Function GetStatus (Line 304:316)
        End Block
        Block Sub EnableAxis (Line 319:322)
            Byte            axis            (LocalValTypVariableOffset=0)
        End Block
        Block Function GetAxisEnabled (Line 324:326)
        End Block
        Block Sub SetSleepToWakeThreshold (Line 328:353)
            Byte            thresholdByte   (LocalValTypVariableOffset=1)
            Float           threshold       (LocalValTypVariableOffset=0)
            Block If Then  (Line 337:340)
            End Block
            Block ElseIf (Line 340:343)
            End Block
            Block ElseIf (Line 343:346)
            End Block
            Block ElseIf (Line 346:349)
            End Block
            Block If Then  (Line 350:352)
            End Block
        End Block
        Block Sub SetSleepToWakeDuration (Line 355:372)
            Float           msPerCount      (LocalValTypVariableOffset=1)
            Byte            count           (LocalValTypVariableOffset=2)
            Float           duration        (LocalValTypVariableOffset=0)
            Block If Then  (Line 367:370)
            End Block
        End Block
        Block Sub SetMode (Line 374:395)
            Byte            mode            (LocalValTypVariableOffset=0)
            Block If Then  (Line 382:386)
            End Block
            Block ElseIf (Line 386:390)
            End Block
            Block ElseIf (Line 390:394)
            End Block
        End Block
        Block Function GetMode (Line 397:417)
            Boolean         LPbit           (LocalValTypVariableOffset=0)
            Boolean         HRbit           (LocalValTypVariableOffset=1)
            Block If Then  (Line 408:410)
            End Block
            Block If Then  (Line 412:414)
            End Block
        End Block
        Block Sub SetDataRate (Line 419:424)
            Byte            rate            (LocalValTypVariableOffset=0)
        End Block
        Block Function GetDataRate (Line 426:431)
        End Block
        Block Function GetmsFromDataRate (Line 434:469)
            Float           ms              (LocalValTypVariableOffset=0)
            Byte            mode            (LocalValTypVariableOffset=1)
            Byte            dataRate        (LocalValTypVariableOffset=2)
        End Block
        Block Sub SetScale (Line 471:476)
            Byte            scale           (LocalValTypVariableOffset=0)
        End Block
        Block Function GetScale (Line 478:483)
        End Block
        Block Sub SetBlockData (Line 485:490)
            Byte            block           (LocalValTypVariableOffset=0)
        End Block
        Block Function GetBlockData (Line 492:497)
        End Block
        Block Sub SetEndian (Line 499:504)
            Byte            endian          (LocalValTypVariableOffset=0)
        End Block
        Block Function GetEndian (Line 506:511)
        End Block
        Block Sub SetFilterMode (Line 513:522)
            Byte            mode            (LocalValTypVariableOffset=0)
        End Block
        Block Function GetFilterMode (Line 524:533)
        End Block
        Block Sub SetFilterBypass (Line 535:544)
            Boolean         mode            (LocalValTypVariableOffset=0)
            Block If Then  (Line 539:541)
            End Block
            Block Else (Line 541:543)
            End Block
        End Block
        Block Function GetFilterBypass (Line 546:551)
        End Block
        Block Sub SetFilterClick (Line 553:561)
            Boolean         mode            (LocalValTypVariableOffset=0)
            Block If Then  (Line 556:558)
            End Block
            Block Else (Line 558:560)
            End Block
        End Block
        Block Function GetFilterClick (Line 563:567)
        End Block
        Block Sub SetFilterAOI1 (Line 569:577)
            Boolean         mode            (LocalValTypVariableOffset=0)
            Block If Then  (Line 572:574)
            End Block
            Block Else (Line 574:576)
            End Block
        End Block
        Block Function GetFilterAOI1 (Line 579:583)
        End Block
        Block Sub SetFilterAOI2 (Line 585:593)
            Boolean         mode            (LocalValTypVariableOffset=0)
            Block If Then  (Line 588:590)
            End Block
            Block Else (Line 590:592)
            End Block
        End Block
        Block Function GetFilterAOI2 (Line 595:599)
        End Block
        Block Sub SetFilterBypassBits (Line 601:605)
            Byte            mode            (LocalValTypVariableOffset=0)
        End Block
        Block Function GetFilterBypassBits (Line 607:612)
        End Block
        Block Sub SetInterruptEnable1Bits (Line 614:625)
            Byte            mode            (LocalValTypVariableOffset=0)
        End Block
        Block Function GetInterruptEnable1Bits (Line 627:631)
        End Block
        Block Sub SetCTL5Bits (Line 633:650)
            Byte            mode            (LocalValTypVariableOffset=0)
        End Block
        Block Function GetCTL5Bits (Line 652:656)
        End Block
        Block Sub SetCTL6Bits (Line 658:669)
            Byte            mode            (LocalValTypVariableOffset=0)
        End Block
        Block Function GetCTL6Bits (Line 671:675)
        End Block
        Block Sub SetINT1Threshold (Line 677:700)
            Byte            thresholdByte   (LocalValTypVariableOffset=1)
            Float           threshold       (LocalValTypVariableOffset=0)
            Block If Then  (Line 684:687)
            End Block
            Block ElseIf (Line 687:690)
            End Block
            Block ElseIf (Line 690:693)
            End Block
            Block ElseIf (Line 693:696)
            End Block
            Block If Then  (Line 697:699)
            End Block
        End Block
        Block Sub SetINT2Threshold (Line 702:725)
            Byte            thresholdByte   (LocalValTypVariableOffset=1)
            Float           threshold       (LocalValTypVariableOffset=0)
            Block If Then  (Line 709:712)
            End Block
            Block ElseIf (Line 712:715)
            End Block
            Block ElseIf (Line 715:718)
            End Block
            Block ElseIf (Line 718:721)
            End Block
            Block If Then  (Line 722:724)
            End Block
        End Block
        Block Sub SetINT1Duration (Line 727:740)
            Float           msPerCount      (LocalValTypVariableOffset=1)
            Byte            count           (LocalValTypVariableOffset=2)
            Float           duration        (LocalValTypVariableOffset=0)
            Block If Then  (Line 735:738)
            End Block
        End Block
        Block Sub SetINT2Duration (Line 742:755)
            Float           msPerCount      (LocalValTypVariableOffset=1)
            Byte            count           (LocalValTypVariableOffset=2)
            Float           duration        (LocalValTypVariableOffset=0)
            Block If Then  (Line 750:753)
            End Block
        End Block
        Block Sub SetINT1ActiveInterrupt (Line 757:773)
            Byte            interrupt       (LocalValTypVariableOffset=0)
        End Block
        Block Function GetINT1ActiveInterrupt (Line 775:792)
        End Block
        Block Sub SetINT2ActiveInterrupt (Line 794:810)
            Byte            interrupt       (LocalValTypVariableOffset=0)
        End Block
        Block Function GetINT2ActiveInterrupt (Line 812:829)
        End Block
        Block Function GetRefDataCap (Line 831:834)
        End Block
        Block Sub SetClickConfig (Line 836:847)
            Byte            config          (LocalValTypVariableOffset=0)
        End Block
        Block Function GetClickConfig (Line 849:859)
        End Block
        Block Function GetClickSource (Line 861:874)
        End Block
        Block Sub SetClickThreshold (Line 876:899)
            Byte            thresholdByte   (LocalValTypVariableOffset=1)
            Float           threshold       (LocalValTypVariableOffset=0)
            Block If Then  (Line 883:886)
            End Block
            Block ElseIf (Line 886:889)
            End Block
            Block ElseIf (Line 889:892)
            End Block
            Block ElseIf (Line 892:895)
            End Block
            Block If Then  (Line 896:898)
            End Block
        End Block
        Block Sub SetClickDuration (Line 901:914)
            Float           msPerCount      (LocalValTypVariableOffset=1)
            Byte            count           (LocalValTypVariableOffset=2)
            Float           duration        (LocalValTypVariableOffset=0)
            Block If Then  (Line 909:912)
            End Block
        End Block
        Block Sub SetClickLatency (Line 916:919)
            Byte            latency         (LocalValTypVariableOffset=0)
        End Block
        Block Sub SetClickTimeWindow (Line 921:924)
            Byte            window          (LocalValTypVariableOffset=0)
        End Block
        Block Function readAccelData (Line 926:936)
            ListOfByte      rawData         (LocalRefTypVariableOffset=0)
            ListOfShort     destination     (LocalRefTypVariableOffset=1)
            Block If Then  (Line 930:934)
            End Block
        End Block
        Block Function readAccelDataBytes (Line 938:942)
            ListOfByte      rawData         (LocalRefTypVariableOffset=0)
        End Block
        Block Sub Setup (Line 950:966)
            Byte            operating_mode  (LocalValTypVariableOffset=0)
            Byte            data_rate       (LocalValTypVariableOffset=1)
            Byte            scale           (LocalValTypVariableOffset=2)
        End Block
        Block Function ConfigureShockInterrupt (Line 976:1045)
            Boolean         result          (LocalValTypVariableOffset=2)
            Byte            thresholdByte   (LocalValTypVariableOffset=3)
            Byte            durationByte    (LocalValTypVariableOffset=4)
            Float           threshold       (LocalValTypVariableOffset=0)
            Float           duration        (LocalValTypVariableOffset=1)
            Block If Then  (Line 981:1040)
            End Block
            Block Else (Line 1040:1043)
            End Block
        End Block
        Block Function GetAccel (Line 1052:1149)
            Float           scaleFactor     (LocalValTypVariableOffset=0)
            Short           XaccelerationRea(LocalValTypVariableOffset=1)
            Short           YaccelerationRea(LocalValTypVariableOffset=2)
            Short           ZaccelerationRea(LocalValTypVariableOffset=3)
            ListOfFloat     acceleration    (LocalRefTypVariableOffset=0)
            Byte            scale           (LocalValTypVariableOffset=4)
            Byte            mode            (LocalValTypVariableOffset=5)
            ListOfByte      Data            (LocalRefTypVariableOffset=1)
        End Block
        Block Function Accel (Line 1158:1175)
            ListOfFloat     accelValues     (LocalRefTypVariableOffset=0)
            Byte            xyz             (LocalValTypVariableOffset=0)
            Block If Then  (Line 1160:1162)
            End Block
        End Block
        Block Function GetID (Line 1184:1186)
        End Block
        Block Sub SetRegister (Line 1188:1192)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
        End Block
        Block Function read (Line 1194:1203)
            Byte            result          (LocalValTypVariableOffset=1)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            address         (LocalValTypVariableOffset=0)
            Block If Then  (Line 1199:1201)
            End Block
        End Block
        Block Function read (Line 1205:1210)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            address         (LocalValTypVariableOffset=0)
            Byte            length          (LocalValTypVariableOffset=1)
        End Block
        Block Sub write (Line 1212:1218)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            Byte            address         (LocalValTypVariableOffset=0)
            Byte            value           (LocalValTypVariableOffset=1)
        End Block
        Block Function GetVersion (Line 1226:1228)
        End Block
        Total Size of Member data including base classes = 8.
    End Block


*************************************************************************************************************

000003  Enum dataType As Byte
000004      NONE = 0
000005      VERSION = 1 //default beacon data for MQTT
000006      UPTIME = 2
000007      BATTVOLTAGE = 3
000008      TEMPERATURE = 4
000009      TEMPERATURE2 = 5
000010      HUMIDITY = 6
000011      DEWPOINT = 7
000012      PRESSURE = 8
000013      ALTITUDE = 9
000014      MOTION = 10
000015      DOOR = 11
000016      KNOCK = 12
000017  End Enum

****** BLOCKS and VARIABLES for dataType
    Block Struct (Line 3:17)
        dataType        NONE            (Literal=0)
        dataType        VERSION         (Literal=1)
        dataType        UPTIME          (Literal=2)
        dataType        BATTVOLTAGE     (Literal=3)
        dataType        TEMPERATURE     (Literal=4)
        dataType        TEMPERATURE2    (Literal=5)
        dataType        HUMIDITY        (Literal=6)
        dataType        DEWPOINT        (Literal=7)
        dataType        PRESSURE        (Literal=8)
        dataType        ALTITUDE        (Literal=9)
        dataType        MOTION          (Literal=10)
        dataType        DOOR            (Literal=11)
        dataType        KNOCK           (Literal=12)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000019  Class MQTT                                                                                                                                                                                                                                    2361: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000020      Shared mcUIDString As String
000021      
000022      Shared Sub Publish(topic As String, value As String)                                                                                                                                                                                      2363: 0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                                                                                                      2364: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000023          If mcUIDString = Nothing Then                                                                                                                                                                                                         2365: 0x000C   PushGlobal              
                                                                                                                                                                                                                                                      2366: 0xC408   PushFieldRef            mcUIDString
                                                                                                                                                                                                                                                      2367: 0x000E   PushNothing             
                                                                                                                                                                                                                                                      2368: 0x000A   RefCmpEQ                
                                                                                                                                                                                                                                                      2369: 0x3C06   BranchFalse             2376

000024              mcUIDString = Device.mcUID().ToString("X8")                                                                                                                                                                                       2370: 0x8416   PushLiteral             22
                                                                                                                                                                                                                                                      2371: 0x00F8   DeviceUID               
                                                                                                                                                                                                                                                      2372: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      2373: 0x0069   StrFormat               
                                                                                                                                                                                                                                                      2374: 0x000C   PushGlobal              
                                                                                                                                                                                                                                                      2375: 0xD408   PopFieldRef             mcUIDString

000025          End If
000026          Dim text_string As ListOfByte = New ListOfByte()                                                                                                                                                                                      2376: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                                      2377: 0x0010   ClassNew                
                                                                                                                                                                                                                                                      2378: 0x9402   PopLocalRef             text_string

000027          text_string.Add(value)                                                                                                                                                                                                                2379: 0x8C01   PushLocalRef            value
                                                                                                                                                                                                                                                      2380: 0x8C02   PushLocalRef            text_string
                                                                                                                                                                                                                                                      2381: 0x00A6   ListAddString           

000028          Lplan.Publish("MCThings/" + mcUIDString + "/" + topic, text_string)                                                                                                                                                                   2382: 0x8412   PushLiteral             18
                                                                                                                                                                                                                                                      2383: 0x000C   PushGlobal              
                                                                                                                                                                                                                                                      2384: 0xC408   PushFieldRef            mcUIDString
                                                                                                                                                                                                                                                      2385: 0x0056   StrAdd                  
                                                                                                                                                                                                                                                      2386: 0x8460   PushLiteral             96
                                                                                                                                                                                                                                                      2387: 0x0056   StrAdd                  
                                                                                                                                                                                                                                                      2388: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                                      2389: 0x0056   StrAdd                  
                                                                                                                                                                                                                                                      2390: 0x8C02   PushLocalRef            text_string
                                                                                                                                                                                                                                                      2391: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2392: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2393: 0x0101   LplanPublish            

000029      End Sub                                                                                                                                                                                                                                   2394: 0x0091   Return                  

000030      
000031      Shared Sub Publish(topic As String, value As Object)                                                                                                                                                                                      2395: 0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                                                                                                      2396: 0xE002   AllocateStackSpace      ValTypeSize=0, RefTypeSize=2

000032          Dim text As String = value.ToString()                                                                                                                                                                                                 2397: 0x8C01   PushLocalRef            value
                                                                                                                                                                                                                                                      2398: 0x0081   CvtObjToStr             
                                                                                                                                                                                                                                                      2399: 0x9402   PopLocalRef             text

000033          If mcUIDString = Nothing Then                                                                                                                                                                                                         2400: 0x000C   PushGlobal              
                                                                                                                                                                                                                                                      2401: 0xC408   PushFieldRef            mcUIDString
                                                                                                                                                                                                                                                      2402: 0x000E   PushNothing             
                                                                                                                                                                                                                                                      2403: 0x000A   RefCmpEQ                
                                                                                                                                                                                                                                                      2404: 0x3C06   BranchFalse             2411

000034              mcUIDString = Device.mcUID().ToString("X8")                                                                                                                                                                                       2405: 0x8416   PushLiteral             22
                                                                                                                                                                                                                                                      2406: 0x00F8   DeviceUID               
                                                                                                                                                                                                                                                      2407: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      2408: 0x0069   StrFormat               
                                                                                                                                                                                                                                                      2409: 0x000C   PushGlobal              
                                                                                                                                                                                                                                                      2410: 0xD408   PopFieldRef             mcUIDString

000035          End If
000036          Dim text_string As ListOfByte = New ListOfByte()                                                                                                                                                                                      2411: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                                      2412: 0x0010   ClassNew                
                                                                                                                                                                                                                                                      2413: 0x9403   PopLocalRef             text_string

000037          text_string.Add(text)                                                                                                                                                                                                                 2414: 0x8C02   PushLocalRef            text
                                                                                                                                                                                                                                                      2415: 0x8C03   PushLocalRef            text_string
                                                                                                                                                                                                                                                      2416: 0x00A6   ListAddString           

000038          Lplan.Publish("MCThings/" + mcUIDString + "/" + topic, text_string)                                                                                                                                                                   2417: 0x8412   PushLiteral             18
                                                                                                                                                                                                                                                      2418: 0x000C   PushGlobal              
                                                                                                                                                                                                                                                      2419: 0xC408   PushFieldRef            mcUIDString
                                                                                                                                                                                                                                                      2420: 0x0056   StrAdd                  
                                                                                                                                                                                                                                                      2421: 0x8460   PushLiteral             96
                                                                                                                                                                                                                                                      2422: 0x0056   StrAdd                  
                                                                                                                                                                                                                                                      2423: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                                      2424: 0x0056   StrAdd                  
                                                                                                                                                                                                                                                      2425: 0x8C03   PushLocalRef            text_string
                                                                                                                                                                                                                                                      2426: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2427: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2428: 0x0101   LplanPublish            

000039      End Sub                                                                                                                                                                                                                                   2429: 0x0091   Return                  

000040      
000041      Shared Sub Publish_exact(topic As String, text As String)                                                                                                                                                                                 2430: 0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                                                                                                      2431: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000042          Dim text_String As ListOfByte = New ListOfByte()                                                                                                                                                                                      2432: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                                      2433: 0x0010   ClassNew                
                                                                                                                                                                                                                                                      2434: 0x9402   PopLocalRef             text_String

000043          text_String.Add(text)                                                                                                                                                                                                                 2435: 0x8C01   PushLocalRef            text
                                                                                                                                                                                                                                                      2436: 0x8C02   PushLocalRef            text_String
                                                                                                                                                                                                                                                      2437: 0x00A6   ListAddString           

000044          Lplan.Publish(topic, text_String)                                                                                                                                                                                                     2438: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                                      2439: 0x8C02   PushLocalRef            text_String
                                                                                                                                                                                                                                                      2440: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2441: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2442: 0x0101   LplanPublish            

000045      End Sub                                                                                                                                                                                                                                   2443: 0x0091   Return                  

000046      
000047      //**************************************************************************/
000048      //*!
000049      //    Encodes Float or Integer into 4 bytes of beacon data
000050      //    encoding is - byte 0 is data type (numeric value)
000051      //    Integer as Short (2 bytes) 
000052      //    Fraction as byte (1 byte)
000053      //*/
000054      //**************************************************************************/
000055      Shared Sub BeaconPublish(data_Type As Byte, value As Object)                                                                                                                                                                              2444: 0x1811   EntryPoint              ValTypParams=1, RefTypParams=1
                                                                                                                                                                                                                                                      2445: 0xE041   AllocateStackSpace      ValTypeSize=2, RefTypeSize=1

000056          Dim fraction As Byte = 0
000057          Dim data As Short = 0
000058          If value Is Float Then                                                                                                                                                                                                                2446: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2447: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                                      2448: 0x0006   ClassIs                 
                                                                                                                                                                                                                                                      2449: 0x3C12   BranchFalse             2468

000059              data = value.Cast(Float).ToShort() //get integer part (16 bit only)                                                                                                                                                               2450: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                                      2451: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2452: 0x0007   Cast                    
                                                                                                                                                                                                                                                      2453: 0x007B   CvtFltToInt             
                                                                                                                                                                                                                                                      2454: 0x007F   CvtIntToSho             
                                                                                                                                                                                                                                                      2455: 0x9002   PopLocalI32             data

000060              fraction = ((value.Cast(Float) - data) * 100.0).ToByte()                                                                                                                                                                          2456: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                                                                                                      2457: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2458: 0x0007   Cast                    
                                                                                                                                                                                                                                                      2459: 0x8802   PushLocalI32            data
                                                                                                                                                                                                                                                      2460: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      2461: 0x003F   FltSub                  
                                                                                                                                                                                                                                                      2462: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                                                                                                      2463: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2464: 0x007B   CvtFltToInt             
                                                                                                                                                                                                                                                      2465: 0x007D   CvtIntToByt             
                                                                                                                                                                                                                                                      2466: 0x9001   PopLocalI32             fraction

                                                                                                                                                                                                                                                      2467: 0x4029   Branch                  2509
000061          ElseIf value Is Integer Then                                                                                                                                                                                                          2468: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2469: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      2470: 0x0006   ClassIs                 
                                                                                                                                                                                                                                                      2471: 0x3C06   BranchFalse             2478

000062              data = value.Cast(Integer).ToShort() //get integer part (16 bit only)                                                                                                                                                             2472: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      2473: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2474: 0x0007   Cast                    
                                                                                                                                                                                                                                                      2475: 0x007F   CvtIntToSho             
                                                                                                                                                                                                                                                      2476: 0x9002   PopLocalI32             data

                                                                                                                                                                                                                                                      2477: 0x401F   Branch                  2509
000063          ElseIf value Is Short Then                                                                                                                                                                                                            2478: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2479: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      2480: 0x0006   ClassIs                 
                                                                                                                                                                                                                                                      2481: 0x3C05   BranchFalse             2487

000064              data = value.Cast(Short)                                                                                                                                                                                                          2482: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                                                                                                      2483: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2484: 0x0007   Cast                    
                                                                                                                                                                                                                                                      2485: 0x9002   PopLocalI32             data

                                                                                                                                                                                                                                                      2486: 0x4016   Branch                  2509
000065          ElseIf value Is Byte Then                                                                                                                                                                                                             2487: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2488: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      2489: 0x0006   ClassIs                 
                                                                                                                                                                                                                                                      2490: 0x3C05   BranchFalse             2496

000066              data = value.Cast(Byte).ToShort() //get integer part (16 bit only)                                                                                                                                                                2491: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      2492: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2493: 0x0007   Cast                    
                                                                                                                                                                                                                                                      2494: 0x9002   PopLocalI32             data

                                                                                                                                                                                                                                                      2495: 0x400D   Branch                  2509
000067          ElseIf value Is Boolean Then                                                                                                                                                                                                          2496: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2497: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2498: 0x0006   ClassIs                 
                                                                                                                                                                                                                                                      2499: 0x3C09   BranchFalse             2509
                                                                                                                                                                                                                                                      2500: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000068              Dim on As Boolean = value.Cast(Boolean)                                                                                                                                                                                           2501: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2502: 0x8C00   PushLocalRef            value
                                                                                                                                                                                                                                                      2503: 0x0007   Cast                    
                                                                                                                                                                                                                                                      2504: 0x9003   PopLocalI32             on

000069              If on Then                                                                                                                                                                                                                        2505: 0x8803   PushLocalI32            on
                                                                                                                                                                                                                                                      2506: 0x3C01   BranchFalse             2508

000070                  data = 1                                                                                                                                                                                                                      2507: 0x6402   Const1toLocalI32        data

000071              End If
                                                                                                                                                                                                                                                      2508: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000072          End If                                                                                                                                                                                                                                

000073          Dim beaconData As ListOfByte = New ListOfByte()                                                                                                                                                                                       2509: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                                                                                                      2510: 0x0010   ClassNew                
                                                                                                                                                                                                                                                      2511: 0x9401   PopLocalRef             beaconData

000074          beaconData.Add(data_Type)                                                                                                                                                                                                             2512: 0x8800   PushLocalI32            data_Type
                                                                                                                                                                                                                                                      2513: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                                      2514: 0x00A3   ListAdd                 

000075          beaconData.AddShort(data)                                                                                                                                                                                                             2515: 0x8802   PushLocalI32            data
                                                                                                                                                                                                                                                      2516: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                                      2517: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2518: 0x00A7   ListAdd2Byte            

000076          beaconData.Add(fraction)                                                                                                                                                                                                              2519: 0x8801   PushLocalI32            fraction
                                                                                                                                                                                                                                                      2520: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                                      2521: 0x00A3   ListAdd                 

000077          Lplan.SetBeaconData(beaconData)                                                                                                                                                                                                       2522: 0x8C01   PushLocalRef            beaconData
                                                                                                                                                                                                                                                      2523: 0x0016   PushConstMinus1         
                                                                                                                                                                                                                                                      2524: 0x0105   LplanSetBeacon          

000078          Lplan.SendBeacon()                                                                                                                                                                                                                    2525: 0x0104   LplanSendBeacon         

000079          //Lplan.BeaconNow () //does not seem to work
000080      End Sub                                                                                                                                                                                                                                   2526: 0x0091   Return                  

000081      
000082      Shared Sub Subscribe(topic As String)                                                                                                                                                                                                     2527: 0x1801   EntryPoint              ValTypParams=0, RefTypParams=1

000083          Lplan.Subscribe(topic)                                                                                                                                                                                                                2528: 0x8C00   PushLocalRef            topic
                                                                                                                                                                                                                                                      2529: 0x0102   LplanSubscribe          

000084      End Sub                                                                                                                                                                                                                                   2530: 0x0091   Return                  

000085      
000086  End Class                                                                                                                                                                                                                                     2362: 0x0097   ReturnMe                


****** BLOCKS and VARIABLES for MQTT
    Block Class (Line 19:86)
        MQTT            Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          mcUIDString     (SharedRefTypVariableOffset=8)
        Block Sub Publish (Line 22:29)
            ListOfByte      text_string     (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            String          value           (LocalRefTypVariableOffset=1)
            Block If Then  (Line 23:25)
            End Block
        End Block
        Block Sub Publish (Line 31:39)
            String          text            (LocalRefTypVariableOffset=2)
            ListOfByte      text_string     (LocalRefTypVariableOffset=3)
            String          topic           (LocalRefTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=1)
            Block If Then  (Line 33:35)
            End Block
        End Block
        Block Sub Publish_exact (Line 41:45)
            ListOfByte      text_String     (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
        End Block
        Block Sub BeaconPublish (Line 55:80)
            Byte            fraction        (LocalValTypVariableOffset=1)
            Short           data            (LocalValTypVariableOffset=2)
            ListOfByte      beaconData      (LocalRefTypVariableOffset=1)
            Byte            data_Type       (LocalValTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=0)
            Block If Then  (Line 58:61)
            End Block
            Block ElseIf (Line 61:63)
            End Block
            Block ElseIf (Line 63:65)
            End Block
            Block ElseIf (Line 65:67)
            End Block
            Block ElseIf (Line 67:72)
                Boolean         on              (LocalValTypVariableOffset=3)
                Block If Then  (Line 69:71)
                End Block
            End Block
        End Block
        Block Sub Subscribe (Line 82:84)
            String          topic           (LocalRefTypVariableOffset=0)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000001  Class TempSensor                                                                                                                                                                                                                              2531: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000002      // Function returns the temperature in degree celcius or 
000003      // Float.NaN if something is wrong
000004      Shared Function GetTemp() As Float                                                                                                                                                                                                        2533: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                                                                                                      2534: 0xE022   AllocateStackSpace      ValTypeSize=1, RefTypeSize=2

000005          // Define the properties of the I2C peripheral and device address
000006          Dim sensor As I2c
000007          sensor = I2c.Create(250000, Pin.SCL, Pin.SDA, 0x48)                                                                                                                                                                                   2535: 0x0110   PushConstI32            250000 (0x0003D090)
                                                                                                                                                                                                                                                      2536: 0xD090                           
                                                                                                                                                                                                                                                      2537: 0x0003                           
                                                                                                                                                                                                                                                      2538: 0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                                                                                                      2539: 0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                                                                                                      2540: 0x8048   PushConstU10            72 (0x0048)
                                                                                                                                                                                                                                                      2541: 0x803B   PushConstU10            59 (0x003B)
                                                                                                                                                                                                                                                      2542: 0x0010   ClassNew                
                                                                                                                                                                                                                                                      2543: 0x9400   PopLocalRef             sensor

000008          
000009          // Power up the sensor and give it some time to settle
000010          Device.EnableTempSensor()                                                                                                                                                                                                             2544: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2545: 0x00F0   DeviceEnableTemp        

000011          Thread.Sleep(40000) // See page 13 of the datasheet                                                                                                                                                                                   2546: 0x0110   PushConstI32            40000 (0x00009C40)
                                                                                                                                                                                                                                                      2547: 0x9C40                           
                                                                                                                                                                                                                                                      2548: 0x0000                           
                                                                                                                                                                                                                                                      2549: 0x00D5   ThreadSleep             
                                                                                                                                                                                                                                                      2550: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000012          
000013          // Read the sensor (only 2 bytes to read
000014          Dim res As ListOfByte = sensor.Read(2)                                                                                                                                                                                                2551: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                                                                                                      2552: 0x8C00   PushLocalRef            sensor
                                                                                                                                                                                                                                                      2553: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2554: 0x00E0   I2cDeviceRead           
                                                                                                                                                                                                                                                      2555: 0x9401   PopLocalRef             res

000015          
000016          // See Tmp102 documentation how to interpret the data (page 8)
000017          Dim temp As Float = Float.NaN                                                                                                                                                                                                         2556: 0x0110   PushConstI32            -4194304 (0xFFC00000)
                                                                                                                                                                                                                                                      2557: 0x0000                           
                                                                                                                                                                                                                                                      2558: 0xFFC0                           
                                                                                                                                                                                                                                                      2559: 0x9000   PopLocalI32             temp

000018          If res <> Nothing Then                                                                                                                                                                                                                2560: 0x8C01   PushLocalRef            res
                                                                                                                                                                                                                                                      2561: 0x000E   PushNothing             
                                                                                                                                                                                                                                                      2562: 0x000B   RefCmpNE                
                                                                                                                                                                                                                                                      2563: 0x3C16   BranchFalse             2586
                                                                                                                                                                                                                                                      2564: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000019              // Shift the partial part to the right nibble
000020              Dim part As Float = res(1) >> 4                                                                                                                                                                                                   2565: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                                                                                                      2566: 0x8C01   PushLocalRef            res
                                                                                                                                                                                                                                                      2567: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2568: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                                                                                                      2569: 0x002F   IntShr                  
                                                                                                                                                                                                                                                      2570: 0x007E   CvtIntToFlt             
                                                                                                                                                                                                                                                      2571: 0x9001   PopLocalI32             part

000021              // Temperature partial is 1/16*n where n is between 0 and 15            
000022              part = part / 16                                                                                                                                                                                                                  2572: 0x8801   PushLocalI32            part
                                                                                                                                                                                                                                                      2573: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                                                                                                      2574: 0x003B   FltDiv                  
                                                                                                                                                                                                                                                      2575: 0x9001   PopLocalI32             part

000023              // Sign extend the byte to an integer
000024              temp = res(0).SignExtend() + part                                                                                                                                                                                                 2576: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2577: 0x8C01   PushLocalRef            res
                                                                                                                                                                                                                                                      2578: 0x00B4   ListItemGet             
                                                                                                                                                                                                                                                      2579: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2580: 0x0005   SignExtend              
                                                                                                                                                                                                                                                      2581: 0x8801   PushLocalI32            part
                                                                                                                                                                                                                                                      2582: 0x0078   CvtIntToFlt1            
                                                                                                                                                                                                                                                      2583: 0x0039   FltAdd                  
                                                                                                                                                                                                                                                      2584: 0x9000   PopLocalI32             temp

                                                                                                                                                                                                                                                      2585: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000025          End If                                                                                                                                                                                                                                

000026          
000027          // power off
000028          Device.DisableTempSensor()                                                                                                                                                                                                            2586: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                                                                                                      2587: 0x00F0   DeviceEnableTemp        

000029          Return temp                                                                                                                                                                                                                           2588: 0x8800   PushLocalI32            temp
                                                                                                                                                                                                                                                      2589: 0x0092   ReturnValType           

000030      End Function                                                                                                                                                                                                                              2590: 0x0093   Return0                 

000031      
000032      Shared Function GetDieTemp() As Float                                                                                                                                                                                                     2591: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000033          // Just get the temperature and return
000034          Return Device.TempDie                                                                                                                                                                                                                 2592: 0x00F7   DeviceTempDie           
                                                                                                                                                                                                                                                      2593: 0x0092   ReturnValType           

000035      End Function                                                                                                                                                                                                                              2594: 0x0093   Return0                 

000036      
000037      Shared Function ToFarenheit(celcius As Float) As Float                                                                                                                                                                                    2595: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000038          Return (celcius * 9) / 5 + 32                                                                                                                                                                                                         2596: 0x8800   PushLocalI32            celcius
                                                                                                                                                                                                                                                      2597: 0xEA09   PushConstFlt            9.0
                                                                                                                                                                                                                                                      2598: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2599: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                                      2600: 0x003B   FltDiv                  
                                                                                                                                                                                                                                                      2601: 0xEA20   PushConstFlt            32.0
                                                                                                                                                                                                                                                      2602: 0x0039   FltAdd                  
                                                                                                                                                                                                                                                      2603: 0x0092   ReturnValType           

000039      End Function                                                                                                                                                                                                                              2604: 0x0093   Return0                 

000040      
000041      Shared Function ToCelcius(farenheit As Float) As Float                                                                                                                                                                                    2605: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000042          Return (farenheit - 32) * 5 / 9                                                                                                                                                                                                       2606: 0x8800   PushLocalI32            farenheit
                                                                                                                                                                                                                                                      2607: 0xEA20   PushConstFlt            32.0
                                                                                                                                                                                                                                                      2608: 0x003F   FltSub                  
                                                                                                                                                                                                                                                      2609: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                                                                                                      2610: 0x003C   FltMul                  
                                                                                                                                                                                                                                                      2611: 0xEA09   PushConstFlt            9.0
                                                                                                                                                                                                                                                      2612: 0x003B   FltDiv                  
                                                                                                                                                                                                                                                      2613: 0x0092   ReturnValType           

000043      End Function                                                                                                                                                                                                                              2614: 0x0093   Return0                 

000044      
000045  End Class                                                                                                                                                                                                                                     2532: 0x0097   ReturnMe                


****** BLOCKS and VARIABLES for TempSensor
    Block Class (Line 1:45)
        TempSensor      Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        Block Function GetTemp (Line 4:30)
            I2c             sensor          (LocalRefTypVariableOffset=0)
            ListOfByte      res             (LocalRefTypVariableOffset=1)
            Float           temp            (LocalValTypVariableOffset=0)
            Block If Then  (Line 18:25)
                Float           part            (LocalValTypVariableOffset=1)
            End Block
        End Block
        Block Function GetDieTemp (Line 32:35)
        End Block
        Block Function ToFarenheit (Line 37:39)
            Float           celcius         (LocalValTypVariableOffset=0)
        End Block
        Block Function ToCelcius (Line 41:43)
            Float           farenheit       (LocalValTypVariableOffset=0)
        End Block
        Total Size of Member data including base classes = 0.
    End Block




****** GLOBAL_VARIABLES **********************************************
Sub_Topic_Knock_Enable, Class=String, Offset=0, SourceClass=LISDH12_Test
accel, Class=LIS2DH12, Offset=4, SourceClass=LISDH12_Test
mcUIDString, Class=String, Offset=8, SourceClass=MQTT
Number, Class=Integer, Offset=12, IsReadoly, SourceClass=Intrinsic
Data, Class=Integer, Offset=16, IsReadoly, SourceClass=Intrinsic
ProgramCounter, Class=Integer, Offset=20, IsReadoly, SourceClass=Intrinsic
data, Class=dataType, Offset=28, SourceClass=LISDH12_Test
Publish_data, Class=Boolean, Offset=24, SourceClass=LISDH12_Test
TimeSinceKnockTriggered, Class=Integer, Offset=32, SourceClass=LISDH12_Test
TimeSinceDoorClosed, Class=Integer, Offset=36, SourceClass=LISDH12_Test


****** LITERALS ***********************************************
     1 String "True"
     4 String "False"
     7 String "\r\n"
     9 String "V1.00"
    12 String "MCThings/Publish"
    18 String "MCThings/"
    22 String "X8"
    24 String "/EnableDoorKnock"
    30 String "Status"
    33 String "Booted: V1.00"
    38 String "LIS2DH12TR Sensor Online"
    46 String "KnockEnable"
    50 String "Accel Sensor Offline"
    57 String "Doorknock"
    61 String "Door"
    64 String "Publish"
    67 String " :Boolean Conversion failed"
    75 String " :Unknown Command"
    81 String "Uptime"
    84 String "BatteryVoltage"
    89 String "Temperature"
    93 String "OnLine"
    96 String "/"
